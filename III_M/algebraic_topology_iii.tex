\documentclass[a4paper]{article}

\def\npart {III}
\def\nterm {Michaelmas}
\def\nyear {2016}
\def\nlecturer {O. Randal-Williams}
\def\ncourse {Algebraic Topology}
\def\nlectures {MWF.12}

\input{header}

\begin{document}
\maketitle
{\small
\setlength{\parindent}{0em}
\setlength{\parskip}{1em}

Algebraic Topology assigns algebraic invariants to topological spaces; it permeates modern pure mathematics. This course will focus on (co)homology, with an emphasis on applications to the topology of manifolds. We will cover singular homology and cohomology, vector bundles and the Thom Isomorphism theorem, and the cohomology of manifolds up to Poincar\'e duality. Time permitting, there will also be some discussion of characteristic classes and cobordism, and conceivably some homotopy theory.

\subsubsection*{Pre-requisites}

Basic topology: topological spaces, compactness and connectedness, at the level of Sutherland's book. The course will not assume any knowledge of Algebraic Topology, but will go quite fast in order to reach more interesting material, so some previous exposure to simplicial homology or the fundamental group would be helpful. The Part III Differential Geometry course will also contain useful, relevant material.

Hatcher's book is especially recommended for the course, but there are many other suitable texts.
}
\tableofcontents

\section{Homotopy}
In this course, ``map'' means ``continuous function''.

\begin{defi}[Homotopy]\index{homotopy}
  Let $X, Y$ be a topological space. A \emph{homotopy} between $f_0, f_1: X \to Y$ is a map $F: [0, 1] \times X \to Y$ such that $F(0, x) = f_0(x)$ and $F(1, x) = f_1(x)$. If such an $F$ exists, we say $f_0$ is \emph{homotopic} to $f_1$, and write $f_0 \simeq f_1$.

  This $\simeq$ defines an equivalence relation on the set of maps from $X$ to $Y$.
\end{defi}
This should be thought of as a continuous deformation from $f_0$ to $f_1$. Note that two homotopic functions can be homotopic in several ways.

If we view homotopic functions as ``the same'', then we have to change our respective notion of isomorphism. To do so, we just write down the usual definition of bijection, but with equality replaced with homotopy.

\begin{defi}[Homotopy equivalence]\index{homotopy equivalence}
  A map $f: X \to Y$ is a \emph{homotopy equivalence} if there is some $g: Y \to X$ such that $f \circ g \simeq \id_X$ and $g \circ f \simeq \id_Y$. We call $g$ the \emph{homotopy inverse}\index{homotopy inverse} to $f$.
\end{defi}

\begin{eg}[Stupid example]
  If $f: X \to Y$ is a homeomorphism, then it is a homotopy equivalence --- we take the actual inverse for the homotopy inverse, since equal functions are homotopic.
\end{eg}

\begin{eg}[Interesting example]
  Let $i: \{0\} \to \R^n$ be the inclusion map. To show this is a homotopy equivalence, we have to find a homotopy inverse. Fortunately, there is only one map $\R^n \to \{0\}$, namely the constant function $0$. We call this $r: \R^n \to \{0\}$. The composition $r \circ i: \{0\} \to \{0\}$ is exactly the identity. So this is good.

  In the other direction, the map $r \circ i: \R^n \to \R^n$ sends everything to $0$. We need to produce a homotopy to the identity. We let $F: [0, 1] \to \R^n \to \R^n$ be
  \[
    F(t, \mathbf{v}) = t\mathbf{v}.
  \]
  We have $F(0, \mathbf{v}) = 0$ and $F(1, \mathbf{v}) = \mathbf{v}$. So this is indeed a homotopy from $r \circ i$ to $\id_{\R^n}$.
\end{eg}

So from the point of view of homotopy, the one-point space $\{0\}$ is the same as $\R^n$. So dimension, or even cardinality, is now a meaningless concept. So what is left?

\begin{eg}[Also interesting example]
  Let $S^n \subseteq \R^{n + 1}$ be the unit sphere, and $i: S^n \hookrightarrow \R^{n + 1} \setminus \{0\}$. We show that this is a homotopy equivalence. We define $r: \R^{n + 1} \setminus \{0\} \to S^n$ by
  \[
    r(\mathbf{v}) = \frac{\mathbf{v}}{\|\mathbf{v}\|}.
  \]
  Again, we have $r \circ i = \id_{S^n}$. In the other direction, we need to construct a path from each $\mathbf{v}$ to $\frac{\mathbf{v}}{\|\mathbf{v}\|}$ in a continuous way. We could do so by
  \begin{align*}
    H: [0, 1] \times (\R^{n + 1} \setminus \{0\}) &\to \R^{n + 1} \setminus \{0\}\\
    (t, \mathbf{v}) &\mapsto (1 - t) \mathbf{v} + t \frac{\mathbf{v}}{\|\mathbf{v}\|}.
  \end{align*}
  We can easily check that this is a homotopy from $\id_{\R^{n + 1}\setminus \{0\}}$ to $i \circ r$.
\end{eg}

While dimension is not a meaningful concept in the homotopy world, we can still say something useful about dimensions using homotopies. Suppose we are given that $\R^n \cong \R^m$. Then we know that $\R^n \setminus \{0\} \cong \R^m \{0\}$. Since these are homotopy equivalent to $S^{n - 1}$ and $S^{m - 1}$, this implies that $S^{n - 1} \sim S^{m - 1}$ are homotopy equivalent. We will later show (by calculating homology of both spheres) that this can only happen if $m \not= n$. So by doing some homotopies, we show that dimension is a meaningful concept if we talk about homeomorphism.

We now see a problem in homotopy theory. If we want to show that two spaces are homotopy equivalent, then we just produce a pair of homotopy inverses. The idea is to assign algebraic objects to each topological space that is homotopy invariant. Thus if two spaces are assigned different algebraic objects, then they cannot be homotopy equivalent.

\section{Chain complex}
The first bit of algebra we need is the notion of a chain complex.
\begin{defi}[Chain complex]\index{chain complex}
  A \emph{chain complex} is a sequence of abelian groups and homomorphisms
  \[
    \begin{tikzcd}
      \cdots \ar[r] & C_3 \ar[r, "d_3"] & C_2 \ar[r, "d_2"] & C_1 \ar[r, "d_1"] & C_0 \ar[r, "d_0"] & 0
    \end{tikzcd}
  \]
  such that
  \[
    d_i \circ d_{i + 1} = 0
  \]
  for all $i$.
\end{defi}

Very related to the notion of a chain complex is a \emph{co}chain complex, which is the same thing with the maps the other way.

\begin{defi}[Cochain complex]\index{cochain complex}
  A \emph{cochain complex} is a sequence of abelian groups and homomorphisms
  \[
    \begin{tikzcd}
      0 \ar[r] & C^0 \ar[r, "d^0"] & C^1 \ar[r, "d^1"] & C^2 \ar[r, "d^2"] & C^3 \ar[r] & \cdots
    \end{tikzcd}
  \]
  such that
  \[
    d^{i + 1} \circ d^i = 0
  \]
  for all $i$.
\end{defi}

\begin{defi}[Differentials]\index{differentials}
  The maps $d^i$ and $d_i$ are known as \emph{differentials}.
\end{defi}
Eventually, we will get lazy and just write all the differentials as $d$.

Given a chain complex, the only thing we know is that the composition of any two maps is zero. In other words, we have $\im d_i \subseteq \ker d_{i + 1}$. We can then ask how good this containment is. Is it that $\im d_i = \ker d_{i + 1}$, or perhaps that $\ker d_{i + 1}$ is huge but $\im d_i$ is trivial? The homology or cohomology measures what happens.

\begin{defi}[Homology]\index{homology}
  The \emph{homology} of a chain complex $C_{\Cdot}$ is
  \[
    H_i(C_{\Cdot}) = \frac{\ker (d_i: C_i \to C_{i - 1})}{\im (d_{i + 1}: C_{i + 1} \to C_i)}.
  \]
  An element of $H_i(C_{\Cdot})$ is known as a \term{homology class}.
\end{defi}

Dually, we have
\begin{defi}[Cohomology]\index{cohomology}
  The \emph{cohomology} of a cochain complex $C^{\Cdot}$ is
  \[
    H^i(C^{\Cdot}) = \frac{\ker (d^i: C^i \to C^{i + 1})}{\im (d^{i - 1}: C^{i - 1} \to C^i)}.
  \]
  An element of $H^i(C^{\Cdot})$ is known as a \term{cohomology class}.
\end{defi}

\begin{defi}[Cycles and cocycles]\index{cycle}\index{cocycle}
  The elements of $\ker d_i$ are the \emph{cycles}, and the elements of $\ker d^i$ are the \emph{cocycles}.
\end{defi}

\begin{defi}[Boundaries and coboundaries]\index{boundary}\index{coboundary}
  The elements of $\im d_i$ are the \emph{boundaries}, and the elements of $\im d^i$ are the \emph{coboundaries}.
\end{defi}

So far, this is just algebraic gadgets. We are going to construct chain complexes from topological spaces, and study their (co)homology.

We will define two versions of chain complexes --- one is a really ``big'' one, known as singular (co)chains, which are easy to study formally, but difficult to compute. We will then introduce ``smaller'' ones, which are easy to compute. We will then do some magic to show that they are actually equivalent, which makes us happy.

\section{Singular (co)chains}
\begin{defi}[Standard $n$-simplex]\index{standard $n$-simplex}
  The standard $n$-simplex is
  \[
    \Delta^n = \{(t_0, \cdots, t_n) \in \R^{n + 1} : t_i \geq 0, \sum t_i = 1\}.
  \]
\end{defi}
% insert picture

We notice that $\Delta^n$ has $n + 1$ ``faces''.
\begin{defi}[Face of standard simplex]\index{face of standard simplex}
  The \emph{$i$th face} of $\Delta^n$ is
  \[
    \Delta_i^n = \Delta^n \{(t_0, \cdots, t_n): t_i = 0\}.
  \]
\end{defi}
\begin{center}
  \begin{tikzpicture}
    \draw [->] (-1, 0) -- (3, 0) node [right] {$t_0$};
    \draw [->] (0, -1) -- (0, 3) node [above] {$t_1$};

    \draw (2, 0) -- (0, 2) node [pos=0.5, anchor = south west] {$\Delta_1$};
    \node [circ] at (2, 0) {};
    \node [circ] at (0, 2) {};
    \node at (2, 0) [below] {$\Delta_1^1$};
    \node at (0, 2) [left] {$\Delta_0^1$};
  \end{tikzpicture}
\end{center}
We see that the $i$th face of $\Delta^n$ looks like the standard $n-1$ simplex. Of course, it is just homeomorphic to it, with the map given by
\begin{align*}
  \delta_i: \Delta^{n - 1} &\to \Delta^n\\
  (t_0, \cdots, t_{n - 1}) &\to (t_0, \cdots, t_{i - 1}, 0, t_i, \cdots, t_{n - 1})
\end{align*}
This is a homeomorphism onto $\Delta_i^n$.

\begin{defi}[Singular $n$-simplex]\index{singular $n$-simplex}
  Let $X$ is a space. Then a \emph{singular $n$-simplex} in $X$ is a map $\sigma: \Delta^n \to X$.
\end{defi}

\begin{eg}
  The inclusion of the standard $n$-simplex into $\R^n$ is a singular simplex, but so is the constant map to any point in $X$. So the singular $n$-simplices can be stupid.
\end{eg}

We let $C_n(X)$ be the free abelian group on the set of singular $n$-simplices in $X$. More explicitly, we have
\[
  C_n(X) = \left\{\sum n_\sigma \sigma: \sigma: \Delta^n \to X, n_\sigma \in \Z, \text{only finitely many $n_\sigma$ non-zero}\right\}.
\]
We define $d_n: C_n(X) \to C_{n - 1}(X)$ by
\[
  \sigma \mapsto \sum_{I = 0}^n (-1)^i \sigma \circ \delta_i,
\]
and then extending linearly.

To show this indeed gives a chain complex, we first show the following:
\begin{lemma}
  If $i < j$, then $\delta_j \circ \delta_i = \delta_i \circ \delta_{j - 1} : \Delta^{n - 2} \to \Delta^n$.
\end{lemma}

\begin{proof}
  Both send $(t_0, \cdots, t_{n - 2})$ to $(t_0, \cdots, t_{i - 1}, 0, t_i, \cdots, t_{j - 2}, 0, t_{j - 1}, \cdots, t_{n - 2})$.
\end{proof}

\begin{cor}
  The homomorphism $d_{n - 1} \circ d_n: C_n(X) \to C_{n - 2}(X)$ vanishes.
\end{cor}

\begin{proof}
  It suffices to check this on each basis element $\sigma: \sigma^n \to X$. We have
  \begin{align*}
    d_{n - 1} \circ d_n (\sigma) &= \sum_{i = 0}^{n - 1}(-1)^i \sum_{j = 0}^n (-1)^j \sigma \circ \delta_j \circ \delta_i.
    \intertext{We use the previous lemma to split the sum up into $i < j$ and $i \geq j$:}
    &= \sum_{i < j} (-1)^{i + j} \sigma \circ \delta_j \delta_i + \sum_{i \geq j} (-1)^{i + j} \sigma \circ \delta_j \circ \delta_i\\
    &= \sum_{i < j} (-1)^{i + j} \sigma \circ \delta_i \delta_{j - 1} + \sum_{i \geq j} (-1)^{i + j} \sigma \circ \delta_j \circ \delta_i\\
    &= \sum_{i \leq j} (-1)^{i + j + 1} \sigma \circ \delta_i \circ \delta_j + \sum_{i \geq j} (-1)^{i + j} \sigma \circ \delta_j \circ \delta_i\\
    &= 0.
  \end{align*}
\end{proof}
So the data $d_i: C_n (X) \to d_{i - 1}(X)$ is indeed a chain complex. The only thing we can do to a chain complex is to take its homology!

\begin{defi}[Singular homology]\index{singular homology}
  The \emph{singular homology} of a chain complex $X$ is the homology of the chain complex
  \[
    H_i(X) = H_i(C_{\Cdot}(X), d_{\Cdot}) = \frac{\ker (d_i: C_i(X) \to C_{i - 1}(X))}{ \im(d_{I + 1}: C_{i + 1}(X) \to C_i(X))}.
  \]
\end{defi}
As one might expect, this would be rather hard to compute. Before we do some computations, we construct a ``dual'' version of this as follows:
\begin{defi}[Singular cohomology]\index{singular cohomology}
  We define the dual cochain complex by
  \[
    C^n(X) = \Hom(C_n(X), \Z).
  \]
  We let
  \[
    d^n: C^n(X) \to C^{n + 1}(X)
  \]
  be the adjoint to $d_{n + 1}$, ie.
  \[
    (\varphi: C_n(X) \to \Z) \mapsto (\varphi \circ d_{n + 1}: C_{n + 1}(X) \to \Z).
  \]
  We observe that
  \[
    \begin{tikzcd}
      0 \ar[r] & C^0(X) \ar[r, "d^0"] & C^1(X) \ar[r] & \cdots
    \end{tikzcd}
  \]
  is indeed a cochain complex, since
  \[
    d^{n + 1}(d^n(\varphi)) = \varphi \circ d_{n + 1} \circ d_{n + 2} = \varphi \circ 0 = 0.
  \]
  The \emph{singular cohomology} of $X$ is the cohomology of this cohain complex, ie.
  \[
    H^i(X) = H^i(C^{\Cdot}, d^{\Cdot}) = \frac{\ker(d^i: C^i(X) \to C^{i + 1}(X))}{\im(d^{i - 1}: C^{i - 1}(X) \to C^i (X))}.
  \]
\end{defi}

If we have a space, then we obtain a chain complex like this, which gives us homology groups. What happens to maps between spaces? The object we get is a chain map.

\begin{defi}[Chain map]\index{chain map}
  If $(C_{\Cdot}, d_{\Cdot}^C)$ and $(D_{\Cdot}, d_{\Cdot}^D)$ are chain complexes, then a \emph{chain map} $C_{\Cdot} \to D_{\Cdot}$ is a collection of homomorphism $f_n: C_n \to D_n$ such that $d_n^D \circ f_n = f_{n - 1} \circ d_n^C$. In other words, the following diagram has to commute for all $n$:
  \[
    \begin{tikzcd}
      C_n \ar[r, "f_n"] \ar[d, "d_n^C"] & D_n \ar[d, "d_n^D"]\\
      C_{n - 1} \ar[r, "f_{n - 1}"] & D_{n - 1}
    \end{tikzcd}
  \]
\end{defi}
There is an obvious analogous definition for \term{cochain maps} between cochain complexes.

\begin{lemma}
  If $f_{\Cdot}: C_{\Cdot} \to D_{\Cdot}$ is a chain map, then $f_*: H_n(C_{\Cdot}) \to H_n(D_{\Cdot})$ given by $[x] \mapsto [f_n(x)]$ is a well-defined homomorphism , where $x \in C_n$ is any element representing the homology class $[x] \in H_n(C_{\Cdot})$.
\end{lemma}

\begin{proof}
  Before we check if it is well-defined, we first need to check if it is defined at all! In other words, we need to check if $f_n(x)$ is a cycle. Suppose $x \in C_n$ is a cycle, ie. $d_n^C(x) = 0$. Then we have
  \[
    d_n^D(f_n(x)) = f_{n - 1}(d_n^C(x)) = f_{n - 1}(x) = 0.
  \]
  So $f_n(x)$ is a cycle, and it does represent a homology class.

  To check this is well-defined, if $[x] = [y] \in H_n(C_{\Cdot})$, then $x - y = d_{n + 1}^C(z)$ for some $z$. So $f_n(x) - f_n(y) = f_n d_{n + 1}^C(z) = d_{n + 1}^D (f_{n + 1}(z))$ is a boundary. So we have $[f_n(x)] = [f_n(y)] \in H_n(D_{\Cdot})$.
\end{proof}

\begin{prop}
  If $f: X \to Y$ is a continuous map of topological spaces, then the maps
  \begin{align*}
    f_n: C_n(X) &\to C_n(Y)\\
    (\sigma: \Delta^n \to X) &\mapsto (f \circ \sigma: \Delta^n \to Y)
  \end{align*}
  give a chain map. This induces a map on the homology (and cohomology).
\end{prop}
To see that the $f_n$ and $d_n$ commute, we just notice that $f_n$ acts by composing on the left, and $d_n$ acts by composing on the right, and these two operations commute by the associativity of cuntional composition.

Now if in addition we ahve a map $g: Y \to Z$, then we obtain two maps $H_n(X) \to H_n(Z)$ by
\[
  \begin{tikzcd}
    H_n(X) \ar[rr, "(g \circ f)_*"] \ar[rd, "f_*"] & & H_n(Z)\\
    & H_n(Y) \ar[ru, "g_*"]
  \end{tikzcd}.
\]
By direct inspection of the formula, we see that this diagram commutes. In equation form, we have $(g \circ f)_* = g_* \circ f_*$. Moreover, we have $(\id_X)_* = \id_{H_n(X)}: H_n(X) \to H_n(X)$. Thus we have
\begin{prop}
  If $f: X \to Y$ is a homomeorphism, then $f_*: H_n(X) \to H_n(Y)$ is an isomorphism of abelian groups.
\end{prop}

\begin{proof}
  If $g: Y \to X$ is an inverse to $f$, then $g_*$ is an inverse to $f_*$, as $f_* \circ g_* = (f \circ g)_* = (\id)_* = \id$, and similarly the other way round.
\end{proof}
This is not too exciting. We will later show that \emph{homotopy equivalences} induce isomorphisms of homology groups, which is much harder.

Similarly, applying $\Hom(\ph, \Z)$ to $f_{\Cdot}: C_{\Cdot}(X) \to C_{\Cdot}(Y)$ gives homomorphisms $f^n: C^n(Y) \to C^n(X)$ by mapping $\phi: C_n(Y) \to \Z$ to $\varphi \circ f_n: C_n(X) \to \Z$. Note that this goes the other way!
\[
  \begin{tikzcd}
     C_n(X) \ar[r, "f_n"] & C_n(Y) \ar[r, "\varphi"] & \Z
  \end{tikzcd}
\]
Again, this is a cochain map, and induces maps $f^*: H^n(Y) \to H^n(X)$.

\begin{fact}
  In general, it is \emph{not} true that $H^n(X) = \Hom(H_n(X), \Z)$. Thus, dualizing and taking homology do not commute with each other. However, we will later (hopefully) come up with a relation between the two objects.
\end{fact}

So what does singular homology measure? There are two notions here --- cycles and boundaries.

Suppose we have have a single chain complex $\sigma: \Delta^1 \to X$. Then its boundary $d_1(\sigma) = \sigma(1) - \sigma(0)$. This is in general non-zero, unless we have $\sigma(0) = \sigma(1)$. In other words, this has to be a loop!

% draw diagram with one edge

There can be more ways to obtain cycles. We could have, say, four $1$-simplices $\sigma_1, \sigma_2, \sigma_3, \sigma_4$. In this case we have
\begin{align*}
  \sigma_1(1) &= \sigma_2(0)\\
  \sigma_2(1) &= \sigma_3(0)\\
  \sigma_3(1) &= \sigma_4(0)\\
  \sigma_4(1) &= \sigma_1(0)
\end{align*}
Thus, we have $\sigma_1 + \sigma_2 + \sigma_3 + \sigma_4 \in C_1(X)$. We can view these cycles as detecting the holes by surrounding them. But there are some stupid cycles. % include picture
These are the boundaries. The boundaries also allow us to identify two cycles that surround the same hole, so that we don't double count.
% draw diagram with four edges

\begin{eg}
  We have
  \[
    H^n(\pt) = H_n(\pt) =
    \begin{cases}
      \Z & n = 0\\
      0 & n > 0
    \end{cases}.
  \]
  This is because there is always a single singular $n$-simplex $\sigma_n: \Delta^n \to \pt$. So $C_n(\pt) = \Z$, and is generated by $\sigma_n$. Now note that
  \[
    d_n(\sigma_n) = \sum_{i = 0}^n (-1)^i \sigma_n \delta_i =
    \begin{cases}
      \sigma_{n - 1} & n\text{ even}\\
      0 & n\text{ odd}
    \end{cases}.
  \]
  So the singular chain complex looks like
  \[
    \begin{tikzcd}
      \Z \ar[r, "1"] & \Z\ar[r, "0"] & \Z \ar[r, "1"] & \Z \ar[r, "0"] & \Z \ar[r] & 0.
    \end{tikzcd}
  \]
  The homology groups then follow from direct computation. The cohomology groups are similar.
\end{eg}

\begin{eg}
  If $X = \coprod_{\alpha \in I} X_\alpha$ is a disjoint union of path components, then each singular simplex must lie in some $X_\alpha$. This implies that
  \[
    H_n(X) \cong \bigoplus_{\alpha \in I} H_n(X_\alpha).
  \]
\end{eg}
Now we know how to compute, say, the homology of three points.

\begin{lemma}
  If $X$ is path-connected and non-empty, then $H_0(X) \cong \Z$.
\end{lemma}

\begin{proof}
  Define a homomorphism $\varepsilon: C_0(X) \to \Z$ given by
  \[
    \sum n_\sigma \sigma \mapsto \sum n_\sigma.
  \]
  Then this is surjective. We claim that the composition
  \[
    \begin{tikzcd}
      C_1(X) \ar[r, "d"] & C_0(x) \ar[r, "\varepsilon"] & \Z
    \end{tikzcd}
  \]
  is zero. Indeed, each simplex has two ends, annd a $\sigma: \Delta^1 \to X$ is mapped to $\sigma \circ \delta_0 - \sigma \circ \delta_1$, which is mapped by $\varepsilon$ to $1 - 1 = 0$.

  Thus, we obtain a well-defined map $\varepsilon: H_0(X) \to \Z$ mapping $[x] \mapsto \varepsilon(x)$, and is surjective.

  So far, this is true for a general space. Now suppose $\sum n_\sigma \sigma \in C_0(X)$ lies in $\ker \varepsilon$. We choose an $x_0 \in X$. As $X$ is path-conected, for each of $\Delta^0 \to X$ we can choose a path $\tau_\sigma: \Delta^1 \to X$ with $\tau_\sigma \circ \delta_0 = \sigma$ and $\tau_\sigma \circ \delta_1 = x_0$.

  Given these $1$-simplices, we can form a $1$-chain $\sum n_\sigma \tau_\sigma \in C_1(X)$, and
  \[
    d_1\left(\sum n_\sigma \tau_\sigma\right)= \sum n_\sigma(\sigma + x_0) = \sum n_\sigma \cdot \sigma - \left(\sum n_\sigma\right) x_0.
  \]
  Now we use the fact that $\sum n_\sigma = 0$. So $\sum n_\sigma \cdot \sigma$ is a boundary. So it is zero in $H_0(X)$.
\end{proof}

Combining with the coproduct formula, we have
\begin{prop}
  For any space $X$, we have $H_0(X)$ is a free abelian group generated by the path components of $X$.
\end{prop}
These are pretty much the things we can do by hand. To do more things, we need to use some tools. We will first state them and use them, and leave the proof for a later time.

\section{Four major tools of (co)homology}
\subsection{Homotopy invariance}
\begin{thm}[Homotopy invariance theorem]\index{homotopy invariance theorem}
  Let $f \simeq g: X \to Y$ be homotopic maps. Then
  \[
    f_* = g_*: H_{\Cdot}(X) \to H_{\Cdot}(Y)
  \]
  and
  \[
    f^* = g^* = H^{\Cdot}(X) \to H^{\Cdot}(Y).
  \]
\end{thm}

\begin{cor}
  If $f: X \to Y$ is a homotopy equivalence, then $f_*: H_{\Cdot}(X) \to H_{\Cdot}(Y)$ and $f^*: H^{\Cdot}(X) \to H^{\Cdot}(Y)$ are isomorphisms.
\end{cor}

\begin{proof}
  If $g: Y \to X$ is a homotopy inverse, then
  \[
    g_* \circ f_* = (g \circ f)_* = (\id_X)_* = \id_{H_{\Cdot}(X)}.
  \]
  Similarly, we have $f_* \circ g_* = (\id_Y)_* = \id_{H_{\Cdot}(Y)}$. So $f_*$ is an isomorphism when an inverse of $g_*$.

  The case for cohomology is similar.
\end{proof}

\begin{eg}
  We have
  \[
    H^n(\R^n) = H_n(\R^n) =
    \begin{cases}
      \Z & n = 0\\
      0 & n > 0
    \end{cases}.
  \]
\end{eg}

The next tool is something that allows us to compute (co)homology by computing the (co)homology of smaller subspaces. Before we do that, we need to introduce an algebraic notion.

\subsection{Mayer-Vietoris}
\begin{defi}[Exact sequence]\index{exact sequence}
  We say homomorphisms
  \[
    \begin{tikzcd}
      A \ar[r, "f"] & B \ar[r, "g"] & C
    \end{tikzcd}
  \]
  is \emph{exact at $B$} if $\im(F) = \ker(G)$.

  We say a sequence
  \[
    \begin{tikzcd}
      \cdots \ar[r] & X_0 \ar[r] & X_1 \ar[r] & X_2 \ar[r] & \cdots
    \end{tikzcd}
  \]
  is \emph{exact} if it is exact at each $X_n$.
\end{defi}

\begin{eg}
  If
  \[
    \begin{tikzcd}
      0 \ar[r] & A \ar[r, "f"] & B \ar[r] & 0
    \end{tikzcd}.
  \]
  is exact, then $f$ is an isomorphism.
\end{eg}

\begin{defi}[Short exact sequence]\index{short exact sequence}
  A \emph{short exact sequence} is a sequence of the form
  \[
    \begin{tikzcd}
      0 \ar[r] & A \ar[r] & B \ar[r] & C \ar[r] & 0
    \end{tikzcd}.
  \]
\end{defi}

\begin{lemma}
  In a short exact sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & A \ar[r, "f"] & B \ar[r, "g"] & C \ar[r] & 0
    \end{tikzcd},
  \]
  the map $f$ is injective; $g$ is surjective, and $C \cong B/A$.
\end{lemma}

\begin{eg}
  Consider the sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z/n\Z \ar[r] & A \ar[r] & \Z/m\Z \ar[r] & 0
    \end{tikzcd}
  \]
  There are many possible values of $A$. A few obvious examples are $A = \Z/nm\Z$ and $A = \Z/n\Z \oplus \Z/m\Z$. If $n$ and $m$ are not coprime, then these are different groups.
\end{eg}
Many of the important theorems for computing homology groups tell us that the homology groups of certain spaces fall into some exact sequence, and we have to try figure out what the groups are.

\begin{thm}[Mayer-Vietoris theorem]\index{Mayer-Vietoris theorem}
  Let $X = A \cup B$ be the union of two open subsets. We have inclusions
  \[
    \begin{tikzcd}
      A \cup B \ar[r, "i_A", hook] \ar[d, "i_B", hook] & A \ar[d, hook, "j_A"]\\
      B \ar[r, hook, "j_B"] & X
    \end{tikzcd}.
  \]
  Then there are homomorphisms $\partial_{MV}: H_n(X) \to H_{n - 1}(A \cap B)$ such that the following sequence is exact:
  \[
    \begin{tikzcd}
      \cdots \ar[r, "\partial_{MV}"] & H_n(A \cap B) \ar[r, "i_{A*} \oplus i_{B*}"] & H_n(A) \oplus H_n(B) \ar[r, "j_{A*} - j_{B*}"] & H_n(X)\ar[out=0, in=180, looseness=2, overlay, lld, "\partial_{MV}"']\\
      & H_{n - 1}(A \cap B) \ar[r, "i_{A*} \oplus i_{B*}"] & H_{n - 1}(A) \oplus H_{n - 1}(B) \ar[r, "j_{A*} - j_{B*}"] & H_{n - 1}(X) \ar [r] & \cdots\\
      &\cdots \ar[r] & H_0(A) \oplus H_0(B) \ar[r, "j_{A*} - j_{B*}"] & H_0(X) \ar [r] & 0
    \end{tikzcd}
  \]
  Furthermore, the Mayer-Vietoris sequence is \emph{natural}, ie. if $f: X = A\cup B \to Y = U \cup V$ satisfies $f(A) \subseteq U$ and $f(B) \subseteq V$, then the diagram
  \[
    \begin{tikzcd}
       H_{n + 1}(X) \ar[r, "\partial_{MV}"] \ar[d, "f_*"] & H_{n}(A \cap B) \ar[r, "i_{A*} \oplus i_{B*}"] \ar[d, "f|_{A \cap B*}"] & H_n(A) \oplus H_n(B) \ar[r, "j_{A*} - j_{B*}"] \ar[d, "f|_{A*} \oplus f|_{B*}"] & H_n(X) \ar[d, "f_*"]\\
       H_{n + 1}(Y) \ar[r, "\partial_{MV}"] & H_{n}(U \cap V) \ar[r, "i_{U*} \oplus i_{V*}"] & H_n(U) \oplus H_n(V) \ar[r, "j_{U*} - j_{V*}"] & H_n(Y)
    \end{tikzcd}
  \]
  commutes.
\end{thm}
For certain elements of $H_{n + 1}(X)$, we can easily specify what $\partial_{MV}$ does to it. The meat of the proof is to show that every element of $H_{n + 1}(X)$ can be made to look like that.

Indeed, if $[a + b] \in H_n(X)$ is such that $a \in C_n(A)$ and $b \in C_n(B)$, then we have
\[
  \partial_{MV}([a + b]) = [d_n(a)] = [-d_n(b)] \in H_n(A \cap B).
\]
To see this makes sense, note that we have $d_n(a + b) = 0$. So $d_n(a) = - d_n(b)$. Moreover, since $a \in C_n(A)$, we have $d_n(a) \in C_{n - 1}(A)$. Similarly, $d_n(b) \in C_{n - 1}(B)$. So $d_n(a) = - d_n(b) \in C_n(A) \cap C_n(B) = C_n(A \cap B)$.

\subsection{Relative homology}
The next tool involves relative homology.
\begin{defi}[Relative homology]\index{relative homology}
  Let $A \subseteq X$. We write $i: A \to X$ for the inclusion map. Then the map $i_n: C_n(A) \to C_n(X)$ is injective as well, and we write
  \[
    C_n(X, A) = \frac{C_n(X)}{C_n(A)}.
  \]
  The differential $d_n: C_n(X) \to C_{n - 1}(X)$ restricts to a map $C_n(A) \to C_{n - 1}(A)$, and thus gives a well-defined differential $d_n: C_n(X, A) \to C_{n - 1}(X, A)$, sending $[c] \mapsto [d_n(c)]$. So we write
  \[
    H_n(X, a) = H_n(C_{\Cdot}(X, A)).
  \]
\end{defi}
We think of this as chains in $X$ where we ignore everything that happens in $A$.

\begin{thm}[Exact sequence for relative homology]\index{exact sequence for relative homology}
  There are homomorphisms $\partial: H_n(X, A) \to H_{n - 1}(A)$ given by mapping
  \[
    \big[[c]\big] \mapsto [d_n c].
  \]
  This makes sense because $c \in C_n(x)$, so $[c] \in C_n(X)/C_n(A)$. We know $[d_n c] = 0 \in C_{n - 1}(X)/C_{n - 1}(A)$. So $d_n c \in C_{n - 1}(A)$. So this notation makes sense.

  Moreover, there is a long exact sequence
  \[
    \begin{tikzcd}
      \cdots \ar[r, "\partial"] & H_n(A) \ar[r, "i_*"] & H_n(X) \ar[r, "q_*"] & H_n(X, A)\ar[out=0, in=180, looseness=2, overlay, lld, "\partial"']\\
      & H_{n - 1}(A) \ar[r, "i_*"] & H_{n - 1}(X) \ar[r, "q_*"] & H_{n - 1}(X, A) \ar [r] & \cdots\\
      &\cdots \ar[r] & H_0(X) \ar[r, "q_*"] & H_0(X, A) \ar [r] & 0
    \end{tikzcd},
  \]
  where $i_*$ is induced by $i: C_{\Cdot}(A) \to C_{\Cdot}(X)$ and $q_*$ is induced by the quotient $q: C_{\Cdot}(X) \to C_{\Cdot}(X, A)$.
\end{thm}

\begin{defi}[Map of pairs]\index{map of pairs}
  Let $(X, A)$ and $(Y, B)$ be topological spaces with $A \subseteq X$ and $B \subseteq Y$. A \emph{map of pairs} is a map $f: X \to Y$ such that $f(A) \subseteq B$.
\end{defi}

Such a map induces a map $f_*: H_n(X, A) \to H_n(Y, B)$, and the exact sequence for relative homology is natural for such maps.

\subsection{Excision theorem}
The main point of relative homology is that we want to think of $H_n(X, A)$ as the homology of $X$ when we ignore $A$. However, it is not true in general that, say, $H_n(X, A) = H_n(X \setminus A)$. However, we are allowed to remove subspaces of $A$ that are ``not too big'', as specified by the excision theorem:

\begin{thm}[Excision theorem]\index{excision theorem}
  Let $X(, A)$ be a pair of spaces, and $Z \subseteq A$ be such that $\overline{Z} \subseteq \mathring{A}$. Then the map
  \[
    H_n(X \setminus Z, A \setminus Z) \to H_n(X, A)
  \]
  is an isomorphism.
\end{thm}
% insert picture

While we've only been talking about homology, everything so far holds analogously for cohomology too. It is again homotopy invariant, and there is a Mayer-Vietoris sequence (with maps $\partial_{MV}: H^n(A \cap B) \to H^{n + 1}(X)$). The relative cohomology is defined by $C^{\Cdot}(X, A) = \Hom(C_{\Cdot}(X, A), \Z)$ and so $H^*(X, A)$ is the cohomology of that. Similarly, excision holds.

\subsection{Applications}
\begin{eg}
  Consider the space $S^1$. We can split $S^1$ up as
  \begin{center}
    \begin{tikzpicture}
      \draw circle [radius=1];
      \draw [red] (1.105, -0.4673) arc(-22.9:202.9:1.2);
      \node [red, above] at (0, 1.2) {$A$};

      \draw [blue] (1.279, 0.545) arc(22.9:-202.9:1.4);
      \node [blue, below] at (0, -1.4) {$B$};

      \node [circ] at (1, 0) {};
      \node at (1, 0) [left] {$q$};
      \node [circ] at (-1, 0) {};
      \node at (-1, 0) [right] {$p$};
    \end{tikzpicture}
  \end{center}
  We want to apply Mayer-Vietoris. We have
  \[
    A \cong B \cong \R \simeq *,\quad A \cap B \cong \R \coprod \R \simeq \{p\} \coprod \{q\}.
  \]
  We obtain
  \[
    \begin{tikzcd}
      \cdots \ar[r] & H_1(A \cap B) \ar[r] & H_1(A) \oplus H_1(B) \ar[r] & H_1(S^1)\ar[out=0, in=180, looseness=2, overlay, lld]\\
      & H_0(A \cap B) \ar[r, "i_{A*} \oplus i_{B*}"] & H_0(A) \oplus H_0(B) \ar[r] & H_0(S^1) \ar [r] & 0
    \end{tikzcd}
  \]
  We replace these with the known objects to get
  \[
    \begin{tikzcd}
      \cdots \ar[r] & 0 \ar[r] & 0 \ar[r] & H_1(S^1)\ar[out=0, in=180, looseness=2, overlay, lld, "f"]\\
      & \Z \oplus \Z \ar[r, "g"] & \Z \oplus \Z \ar[r] & \Z \ar [r] & 0
    \end{tikzcd}
  \]
  We can now try to figure out what the maps are. We know that $H_0(A \cap B) \cong \Z \oplus \Z$ is generated by $p$ and $q$, and the inclusion map sends each of $p$ and $q$ to the unique connected components of $A$ and $B$. So the homology classes are both sent to $(1, 1) \in H_0(A) \oplus H_0(B) \cong \Z \oplus \Z$. We then see that the kernel of $g$ is generated by $(p - q)$, and is thus isomorphic to $\Z$.

  Since the map into $H_1(S^1)$ is from $0$, it has trivial image. So the map $f$ must be injective by exactness. So $H_1(S^1)$ is isomorphic to its image in $H_0(A \cap B)$ The image of $f$ is the kernel of $g$, and is thus isomorphic to $\Z$.

  By looking higher up the exact sequence, we see that all other homology groups vanish.
\end{eg}

We can do the sphere in general in the same way.

\begin{thm}
  For any $n \geq 1$, we have
  \[
    H_i(S^n) =
    \begin{cases}
      \Z & i = 0, n\\
      0 & \text{otherwise}
    \end{cases}.
  \]
\end{thm}

\begin{proof}
  We cut up $^n$ as
  \begin{align*}
    A &= S^n \setminus \{N\} \cong \R^n \simeq *,\\
    B &= S^n \setminus \{S\} \cong \R^n \simeq *,
  \end{align*}
  where $N$ and $S$ are the north and south poles. Moreover, we have
  \[
    A\cap B \cong \R \times S^{n - 1} \simeq S^{n - 1}
  \]
  So we can ``induct up'' using the Mayer-Vietoris sequence:
  \[
    \begin{tikzcd}
      \cdots \ar[r] & H_i(S^{n - 1}) \ar[r] & H_i(*) \oplus H_i(*) \ar[r] & H_i(S^n)\ar[out=0, in=180, looseness=2, overlay, lld, "\partial"]\\
      & H_{i - 1}(S^{n - 1}) \ar[r] & H_{i - 1}(*) \oplus H_{i - 1}(*) \ar[r] & H_{i - 1}(S^n) \ar [r] & \cdots
    \end{tikzcd}
  \]
  Now suppose $n \geq 2$, as we already did $S^1$ already. If $i > 1$, then $H_1(*) = 0 = H_{i - 1}(*)$. So the Mayer-Vietoris map
  \[
    \begin{tikzcd}
      H_i(S^n) \ar[r, "\partial"] & H_{i - 1}(S^{n - 1})
    \end{tikzcd}
  \]
  is an isomorphism.

  All that remains is to look at $i = 0, 1$. The $i = 0$ case is trivial. For $i = 1$, we look at
  \[
    \begin{tikzcd}
      & \cdots \ar[r] & H_1(*) \oplus H_1(*) \ar[r] & H_1(S^n)\ar[out=0, in=180, looseness=2, overlay, lld, "\partial"]\\
      & H_0(S^{n - 1}) \ar[r] & H_0(*) \oplus H_0(*) \ar[r] & H_0(S^n) \ar [r] & 0
    \end{tikzcd}
  \]
  Again, we plug in the known values to obtain
  \[
    \begin{tikzcd}
      & \cdots \ar[r] & 0 \ar[r] & H_1(S^n)\ar[out=0, in=180, looseness=2, overlay, lld]\\
      & \Z \ar[r, "f"] & \Z \oplus \Z \ar[r] & \Z \ar [r] & 0
    \end{tikzcd}
  \]
  To conclude that $H_1(S^n)$ is trivial, it suffices to show that the map $f$ is injective. But picking the canonical generators, it is given by $1 \mapsto (1, 1)$.
\end{proof}
While we know what the groups are, it is difficult for us to figure out what the generators of the groups are, since we need to trace through lots of Mayer-Vietoris homomorphisms. Later, we will develop cellular homology, which will make this much easier.

\begin{cor}
  If $n \not= m$, then $S^{n - 1} \not\simeq S^{m - 1}$, since they have different homology groups.
\end{cor}

\begin{cor}
  If $n \not= m$, then $\R^n \not \cong \R^m$.
\end{cor}

We can also use homology to define a useful notion.
\begin{defi}[Degree of a map]\index{degree of map}
  Let $f: S^n \to S^n$ be a map. Then we obtain a map $f_*: H_n(S^n) \to H_n(S^n)$. But we know $H_n(S^n) \cong \Z$. We know that any map from $\Z$ to itself is multiplication by an integer, which we call the \emph{degree} of $f$, written $\deg(f)$.
\end{defi}

In particular, for $n = 1$, the degree is the winding number.

Elementary properties of the degree follows from properties of homology.
\begin{prop}\leavevmode
  \begin{enumerate}
    \item $\deg(\id_{S^n}) = 1$.
    \item If $f$ is not surjective, then $\deg(f) = 0$.
    \item We have $\deg(f\circ g) = (\deg f)(\deg g)$.
    \item Homotopic maps have equal degrees.
  \end{enumerate}
\end{prop}

\begin{proof}\leavevmode
  \begin{enumerate}
    \item Obvious.
    \item If $f$ is not surjective, then $f$ can be factored as
      \[
        \begin{tikzcd}
          S^n \ar[r, "f"] & S^n \setminus \{p\} \ar[r, hook] & S^n
        \end{tikzcd},
      \]
      where $p$ is some point not in the image of $f$. But $S^n \setminus \{p\}$ is contractible. So $f_*$ factors as
      \[
        \begin{tikzcd}
          f_*: H_n(S^n) \ar[r] & H_n(*) = 0 \ar[r] & H_n(S^n)
        \end{tikzcd}.
      \]
      So $f_*$ is the zero homomorphism, and is thus multiplication by $0$.
    \item This follows from the functoriality of $H_n$.
    \item Obvious as well.
  \end{enumerate}
\end{proof}

\begin{cor}[Brouwer's fixed point theorem]\index{Brouwer's fixed point theorem}
  any map $f: D^n \to D^n$ has a fixed point.\term{fixed point}
\end{cor}

\begin{proof}
  Suppose $f$ has no fixed point. Define $r: D^n \to S^{n - 1} = \partial D^n$ by taking the intersection of the ray from $f(x)$ through $x$ with $\partial D^n$. This is continuous.
  \begin{center}
    \begin{tikzpicture}
      \draw circle [radius=2cm];
      \node [circ] at (-0.4, -0.3) {};
      \node at (-0.4, -0.3) [below] {$x$};

      \node [circ] at (0.4, 0.3) {};
      \node at (0.4, 0.3) [right] {$f(x)$};
      \draw (0.4, 0.3) -- (-1.6, -1.2);
      \node at (-1.6, -1.2) [circ] {};
      \node at (-1.6, -1.2) [anchor = north east] {$r(x)$};
    \end{tikzpicture}
  \end{center}
  Now if $x \in \partial D^n$, then $r(x) = x$. So we have
  \[
    \begin{tikzcd}
      S^{n - 1} = \partial D^n \ar[r, "i"] & D^n \ar[r, "S^{n - 1}"] & \partial D^n = S^{n - 1}
    \end{tikzcd},
  \]
  and the composition is the identity. This is a contradiction --- contracting $D^n$ to a point, this gives a homotopy from the identity map $S^{n - 1} \to S^{n - 1}$ to the constant map at a point. This is impossible, as the two maps have different degrees.
\end{proof}
A more manual argument to show this would be to apply $H_{n - 1}$ to the chain of maps above to obtain a contradiction.

We know there is a map of degree $1$, namely the identity, and a map of degree $0$, namely the constant map. How about other degrees?

\begin{prop}
  A reflection $r: S^n \to S^n$ about a hyperplane has degree $-1$. As before, we cover $S^n$ by
  \begin{align*}
    A &= S^n \setminus \{N\} \cong \R^n \simeq *,\\
    B &= S^n \setminus \{S\} \cong \R^n \simeq *,
  \end{align*}
  where we suppose the north and south poles lie in the hyperplane of reflection. Then both $A$ and $B$ are invariant under the reflection. Consider the diagram
  \[
    \begin{tikzcd}
      H_n(S^n) \ar[r, "\partial_{MV}", "\sim"'] \ar[d, "r_*"] & H_{n - 1}(A \cap B) \ar[d, "r_*"] & H_{n - 1}(S^{n - 1}) \ar[l, "\sim"] \ar[d, "r_*"]\\
      H_n(S^n) \ar[r, "\partial_{MV}", "\sim"'] & H_{n - 1}(A \cap B) & H_{n - 1}(S^{n - 1}) \ar[l, "\sim"]
    \end{tikzcd}
  \]
  where the $S^{n - 1}$ on the right most column is given by contracting $A \cap B$ to the equator. Note that $r$ restricts to a reflection on the equation. By tracing through the isomorphisms, we see that $\deg(r) = \deg(r|_{\mathrm{equator}})$. So by induction, we only have to consider the case when $n = 1$. Then we have
  \[
    \begin{tikzcd}
      0 \ar[r] & H_1(S^1) \ar[r, "\partial_{MV}", "\sim"'] \ar[d, "r_*"] & H_0(A \cap B) \ar[d, "r_*"] \ar[r] & H_0(A) \oplus H_0(B) \ar[d, "r_* \oplus r_*"]\\
      0 \ar[r] & H_1(S^1) \ar[r, "\partial_{MV}", "\sim"'] & H_0(A \cap B) \ar[r] & H_0(A) \oplus H_0(B)
    \end{tikzcd}
  \]
  Now the middle vertical map sends $p \mapsto q$ and $q \mapsto p$. Since $H_1(S^1)$ is given by the kernel of $H_0(A \cap B) \to H_0(A) \oplus H_0(B)$, and is generated by $p - q$, we see that this sends the generator to its negation. So this is given by multiplication by $-1$. So the degree is $-1$.
\end{prop}

\begin{cor}
  The antipodal map $a: S^n \to S^n$ given by
  \[
    a(x_1, \cdots, x_{n + 1}) = (-x_1, \cdots, -x_n)
  \]
  has degree $(-1)^{n + 1}$ because it is a composition of $(n + 1)$ reflections.
\end{cor}

\begin{cor}[Hairy ball theorem]\index{Hairy ball theorem}
  $S^n$ has a nowhere $0$ vector field iff $n$ is odd.
\end{cor}

\begin{proof}
  Viewing $S^n \subseteq \R^{n + 1}$, a vector field on $S^n$ is a function $v: S^n \to \R^{n + 1}$ such that $\bra v(x), x\ket = 0$, ie. $v(x)$ is perpendicular to $x$.

  If $n$ is odd, say $n = 2k - 1$, then
  \[
    v(x_1, y_1, x_2, y_2, \cdots, x_k, y_k) = (y_1, -x_1, y_2, -x_2, \cdots, y_k, -x_k)
  \]
  works.

  Conversely, if $v: S^n \to \R^{n + 1} \setminus \{0\}$ is a vector field, we let $w = \frac{v}{\abs{v}}: S^n \to S^n$. We can construct a homotopy from $w$ to the antipodal map by ``linear interpolation'', but in a way so that it stays on the sphere. We let
  \begin{align*}
    H: [0, \pi] \times S^n &\to S^n\\
    (t, x) &\mapsto \cos(t) x + \sin(t) w(x)
  \end{align*}
  Since $w(x)$ and $x$ are perpendicular, it follows that this always has norm $1$, so indeed it stays on the sphere.

  Now we have
  \[
    H(0, x) = x,\quad H(\pi, x) = -x.
  \]
  So this gives a homotopy from $\id$ to $a$, which is a contradiction since they have different degrees.
\end{proof}


\begin{eg}
  Let $K$ be the Klein bottle. We cut them up by
  \begin{center}
    \begin{tikzpicture}
      \draw [->-=0.55, mred] (0, 0) -- (3, 0);
      \draw [->-=0.55, mred] (3, 3) -- (0, 3);
      \draw [->-=0.55, mblue] (3, 0) -- (3, 3);
      \draw [->-=0.55, mblue] (0, 0) -- (0, 3);

      \fill [morange, opacity=0.5] (0, 0) rectangle (3, 1.2);
      \fill [morange, opacity=0.5] (0, 1.8) rectangle (3, 3);
      \node [right, morange] at (3, 2.5) {$A$};

      \fill [mgreen, opacity=0.5] (0, 0.8) rectangle (3, 2.2);
      \node [right, mgreen] at (3, 1.5) {$B$};

      \foreach \n in {0,1,2,3,4,5,6,7,8,9,10,11,12,13} {
        \begin{scope}[shift={(0.15 + 0.2 * \n, 0.9)}]
          \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
        \end{scope}

        \begin{scope}[shift={(0.15 + 0.2 * \n, 1.9)}]
          \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
        \end{scope}
      }
    \end{tikzpicture}
  \end{center}
  Then both $A$ and $B$ are cylinders, and their intersection is two cylinders:
  \begin{center}
    \begin{tikzpicture}
      \fill [morange, opacity=0.5] (0, 0) rectangle (3, 2.6);
      \draw [->-=0.55, mblue] (3, 0) -- (3, 2.6);
      \draw [->-=0.55, mblue] (0, 0) -- (0, 2.6);
      \draw [->-=0.55, mred] (3, 1.3) -- (0, 1.3);
      \fill [mgreen, opacity=0.5] (0, 0) rectangle (3, 0.4);
      \fill [mgreen, opacity=0.5] (0, 2.2) rectangle (3, 2.6);

      \foreach \n in {0,1,2,3,4,5,6,7,8,9,10,11,12,13} {
        \begin{scope}[shift={(0.15 + 0.2 * \n, 0.1)}]
          \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
        \end{scope}

        \begin{scope}[shift={(0.2 + 0.2 * \n, 2.3)}]
          \fill (0, 0) -- (0.05, 0) -- (0, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (-0.05, 0.1) -- cycle;
        \end{scope}
      }
      \node at (1.5, -0.1) [morange, below] {$A$};

      \fill [morange, opacity=0.5] (4, 0.6) rectangle (7, 1);
      \fill [morange, opacity=0.5] (4, 1.6) rectangle (7, 2);
      \fill [mgreen, opacity=0.5] (4, 0.6) rectangle (7, 2);
      \draw [->-=0.57, mblue] (4, 0.6) -- (4, 2);
      \draw [->-=0.57, mblue] (7, 0.6) -- (7, 2);

      \foreach \n in {0,1,2,3,4,5,6,7,8,9,10,11,12,13} {
        \begin{scope}[shift={(4.15 + 0.2 * \n, 0.7)}]
          \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
        \end{scope}

        \begin{scope}[shift={(4.15 + 0.2 * \n, 1.7)}]
          \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
        \end{scope}
      }

      \node at (5.5, -0.1) [mgreen, below] {$B$};

      \begin{scope}[shift={(4, 0)}]
        \fill [morange, opacity=0.5] (4, 0.6) rectangle (7, 1);
        \fill [morange, opacity=0.5] (4, 1.6) rectangle (7, 2);
        \fill [mgreen, opacity=0.5] (4, 0.6) rectangle (7, 1);
        \fill [mgreen, opacity=0.5] (4, 1.6) rectangle (7, 2);
        \draw [->-=0.8, mblue] (4, 0.6) -- (4, 1) node [left, pos=0.5] {$s$};
        \draw [->-=0.8, mblue] (7, 0.6) -- (7, 1);
        \draw [->-=0.8, mblue] (4, 1.6) -- (4, 2) node [left, pos=0.5] {$t$};
        \draw [->-=0.8, mblue] (7, 1.6) -- (7, 2);

        \foreach \n in {0,1,2,3,4,5,6,7,8,9,10,11,12,13} {
          \begin{scope}[shift={(4.15 + 0.2 * \n, 0.7)}]
            \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
          \end{scope}

          \begin{scope}[shift={(4.15 + 0.2 * \n, 1.7)}]
            \fill (0, 0) -- (0.05, 0) -- (0.1, 0.1) -- (0.05, 0.2) -- (0, 0.2) -- (0.05, 0.1) -- cycle;
          \end{scope}
        }

        \node at (5.5, -0.1) [mgreen!50!morange, below] {$A \cap B$};
      \end{scope}
    \end{tikzpicture}
  \end{center}
  We have a long exact sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & H_2(K) \ar[r] & H_1(A \cap B) \ar[r, "{(i_A, i_B)}"] & H_1(A) \oplus H_1(B) \ar[r, "j_A - j_B"] & \vphantom{0}\\
      & H_1(K) \ar[r] & H_0(A \cap B) \ar[r, "{(i_A, i_B)}"] & H_0(A) \oplus H_0(B) \ar[r, "j_A - j_B"] & \vphantom{0}\\
      & H_0(K) \ar[r] & 0
    \end{tikzcd}
  \]
  We plug in the numbers to get
  \[
    \begin{tikzcd}
      0 \ar[r] & H_2(K) \ar[r] & \Z \oplus \Z \ar[r, "{(i_A, i_B)}"] & \Z \oplus \Z \ar[r, "j_A - j_B"] & \vphantom{0}\\
      & H_1(K) \ar[r] & \Z \oplus \Z \ar[r, "{(i_A, i_B)}"] & \Z \oplus \Z \ar[r, "j_A - j_B"] & \Z \ar[r] & 0
    \end{tikzcd}
  \]
  Now let's look at the first $(i_A, i_B)$ map. We suppose each $H_1$ is generated by the left-to-right loops. Then we have
  \begin{align*}
    i_A(s) &= -1\\
    i_A(t) &= 1\\
    i_B(s) &= 1\\
    i_B(s) &= 1
  \end{align*}
  So the matrix of $(i_A, i_B)$ is
  \[
    \begin{pmatrix}
      -1 & 1\\
      1 & 1
    \end{pmatrix}.
  \]
  This has determinant $2$, so it is injective and has trivial kernel. So we must have $H_2(K) = 0$. We also have
  \[
    \frac{H_1(A) \oplus H_1(B)}{\im(i_A, i_B)} = \frac{\bra a, b\ket}{\bra -a + b, a + b\ket} \frac{\bra a\ket}{\bra 2a\ket} \cong \Z/2\Z.
  \]
  Now the the second $(i_A, i_B)$ is given by
  \[
    \begin{pmatrix}
      1 & 1\\
      1 & 1
    \end{pmatrix},
  \]
  which is isomorphic to $\Z$. So we have
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z/2\Z \ar[r] & H_1(K) \ar[r] & \Z \ar[r] & 0
    \end{tikzcd}.
  \]
  So we have $H_1(K) \cong \Z \oplus \Z/2\Z$.

  % explain better
\end{eg}

We are now going to give an application of excision to compute degrees.

\begin{lemma}
  Let $M$ be a $d$-dimensional manifold (ie. a Hausdorff, second-countable space locally homeomorphic to $\R^d$). Then
  \[
    H_n(M, M \setminus x) \cong
    \begin{cases}
      \Z & n = d\\
      0 & \text{otherwise}
    \end{cases}.
  \]
  This is known as the \term{local homology}
\end{lemma}
This gives us a homological way to define the dimension of a space.

\begin{proof}
  Let $U$ be an open neighbourhood isomorphic to $\R^d$ that maps $x \mapsto 0$. We let $\Z = M\setminus U$. Then
  \[
    \overline{Z} = Z \subseteq M \setminus \{x\} = \mathring{(M \setminus \{x\})}.
  \]
  So we can apply excision, and get
  \[
    H_n(U, U \setminus \{x\}) = H_n(M\setminus Z, (M\setminus \{x\})\setminus \Z) \cong H_n(M, M\setminus X).
  \]
  Using the fact that $U \cong \R^d \simeq *$ and $\R^d \setminus \{0\} \simeq S^{d - 1}$, the long exact sequence for relative homology gives the result.
\end{proof}

Now let $f: S^d \to S^d$ be a map. Suppose there is a $y \in S^d$ such that
\[
  f^{-1}(y) = \{x_1, \cdots, x_k\}
\]
is finite. We choose an open enighbourhood $V$ of $y$, and open neighbourhoods $U_i$ of $x_i$ such that
\begin{enumerate}
  \item $U_i \cap U_j = \emptyset$ for $i \not= j$.
  \item $f(U_i) \subseteq V$.
\end{enumerate}
We have a map
\[
  \begin{tikzcd}
    H_d(U_i, U_i \setminus \{x\}) \ar[r, "(f|_{U_i})_*"] & H_d(V, V \setminus \{y\})
  \end{tikzcd},
\]
and we know each object is isomorphic to $\Z$. So the map is multiplication by some integer, and we want to call that the degree. However, we have to be careful how we identify each object with $\Z$, or else the degree is only well-defined up to a sign.

So we consider the maps
\[
  \begin{tikzcd}
    H_d(U_i, U_i \setminus \{x\}) \ar[r, "(f|_{U_i})_*"] \ar[d, "i"] & H_d(V, V \setminus \{y\}) \ar[d, "i"]\\
    H_d(S^d, S^d\setminus\{x_i\}) \ar[d] & H_d(S^d, S^d\setminus\{x_i\}) \ar[d]\\
    H_d(S^d) & H_d(S^d)
  \end{tikzcd}
\]
All the maps shown are canonically defined. So as long as we are consistent in how we identify $H_d(S^d)$ with $\Z$, we have a well-defined degree, called the \emph{local degree}, written $\deg(f)_{x_i}$.

\begin{thm}
  Let $f: S^d \to S^d$ be a map. Suppose there is a $y \in S^d$ such that
  \[
    f^{-1}(y) = \{x_1, \cdots, x_k\}
  \]
  is finite. Then
  \[
    \deg (f) = \sum_{i = 1}^k \deg(f)_{x_i}.
  \]
\end{thm}

\begin{proof}
  \[
    \begin{tikzcd}
      H_d(S^d) \ar[r, "f_*"] \ar[d] & H_d(S^d) \ar[d, "\sim"] & 1 \ar[r, maps to] \ar[ddd, maps to]& \deg(f) \ar[ddd, maps to]\\
      H_d(S^d, S^d \setminus \{x_1, \cdots, x_k\}) \ar[r, "f_*"] & H_d(S^d, S^d \setminus \{y\})\\
      H_d\left(\coprod U_i, \coprod (U_i \setminus x_i)\right) \ar[u, "\text{excision}"]\\
      \bigoplus_{i = 1}^ k H_d(U_i, U_i \setminus x_i) \ar[r, "\bigoplus f_*"] \ar[u, "\sim"] & H_d(V, V\setminus \{y\}) \ar[uu, "\sim"] & (1, \cdots, 1) \ar[r, maps to] & \sum_{i = 1}^k \deg(f)_{x_i}
    \end{tikzcd}
  \]
\end{proof}
\subsection{Repaying the technical debt}
We are now going to prove the theorems!

\subsubsection*{Long exact sequence of relative homology}
Let $A \subseteq X$ , and let $C_{\Cdot}(X, A) = C_{\Cdot}(X)/C_{\Cdot}(A)$. The long exact sequence on homology relates $H_{\Cdot}(A), H_{\Cdot}(X)$ and $H_{\Cdot}(X, A)$.

This is in fact a completely general theorem.
\begin{thm}[Snake lemma]
  Suppose we have a short exact sequence of complexes
  \[
    \begin{tikzcd}
      0 \ar[r] & A_{\Cdot} \ar [r, "i_{\Cdot}"] & B_{\Cdot} \ar [r, "q_{\Cdot}"] & C_{\Cdot} \ar[r] & 0
    \end{tikzcd}.
  \]
  Then there are maps
  \[
    \partial: H_n(C_{\Cdot}) \to H_{n - 1}(A_{\Cdot})
  \]
  such that there is a long exact sequence
  \[
    \begin{tikzcd}
      \cdots \ar [r] & H_n(A) \ar[r, "i_*"] & H_n(B) \ar[r, "q_*"] & H_n(C) \ar[out=0, in=180, looseness=2, overlay, dll, "\partial_*"']\\
      & H_{n - 1}(A) \ar[r, "i_*"] & H_{n - 1}(B) \ar[r, "q_*"] & H_{n - 1}(C) \ar [r] & \cdots
    \end{tikzcd}.
  \]
\end{thm}
The method of proving this is sometimes known as ``diagram chasing'', where we just ``chase'' around commutative diagrams to find the elements we need. The idea of the proof is as follows --- in the short exact sequence, we can think of $A$ as a subgroup of $B$, and $C$ as the quotient $B/A$, by the first isomorphism theorem. So any element of $C$ can be represented by an element of $B$. We apply the boundary map to this representative, and then exactness shows that this must come from some element of $A$. We then check carefully that these is well-defined, ie. does not depend on the representatives chosen.

\begin{proof}
  The proof of this is in general not hard. It just involves a lot of checking of the details, such as making sure the homomorphisms are well-defined, are actually homomorphisms, are exact at all the places etc. The only important and non-trivial part is just the construction of the map $\partial_*$.

  First we look at the following commutative diagram:
  \[
    \begin{tikzcd}
      0 \ar[r] & A_n \ar[r, "i_n"] \ar[d, "d_n"] & B_n \ar[r, "q_n"] \ar[d, "d_n"] & C_n \ar[r] \ar[d, "d_n"] & 0\\
      0 \ar[r] & A_{n - 1} \ar[r, "i_{n - 1}"] & B_{n - 1} \ar[r, "q_{n - 1}"] & C_{n - 1} \ar[r] & 0
    \end{tikzcd}
  \]
  To construct $\partial_*: H_n(C) \to H_{n - 1}(A)$, let $[x] \in H_n(C)$ be a class represented by $x \in Z_n(C)$. We need to find a cycle $z \in A_{n - 1}$. By exactness, we know the map $q_n: B_n \to C_n$ is surjective. So there is a $y \in B_n$ such that $q_n(y) = x$. Since our target is $A_{n - 1}$, we want to move down to the next level. So consider $d_n(y) \in B_{n - 1}$. We would be done if $d_n(y)$ is in the image of $i_{n - 1}$. By exactness, this is equivalent saying $d_n(y)$ is in the kernel of $q_{n -1 }$. Since the diagram is commutative, we know
  \[
    q_{n - 1}\circ d_n(y) = d_n \circ q_n (y) = d_n(x) = 0,
  \]
  using the fact that $x$ is a cycle. So $d_n (y) \in \ker q_{n - 1} = \im i_{n - 1}$. Moreover, by exactness again, $i_{n - 1}$ is injective. So there is a unique $z \in A_{n - 1}$ such that $i_{n - 1}(z) = d_n(y)$. We have now produced our $z$.

  We are not done. We have $\partial_* [x] = [z]$ as our candidate definition, but we need to check many things:
  \begin{enumerate}
    \item We need to make sure $\partial_*$ is indeed a homomorphism.
    \item We need $d_{n - 1}(z) = 0$ so that $[z] \in H_{n - 1}(A)$;
    \item We need to check $[z]$ is well-defined, ie. it does not depend on our choice of $y$ and $x$ for the homology class $[x]$.
    \item We need to check the exactness of the resulting sequence.
  \end{enumerate}
  We now check them one by one:
  \begin{enumerate}
    \item Since everything involved in defining $\partial_*$ are homomorphisms, it follows that $\partial_*$ is also a homomorphism.
    \item We check $d_{n - 1}(z) = 0$. To do so, we need to add an additional layer.
      \[
        \begin{tikzcd}
          0 \ar[r] & A_n \ar[r, "i_n"] \ar[d, "d_n"] & B_n \ar[r, "q_n"] \ar[d, "d_n"] & C_n \ar[r] \ar[d, "d_n"] & 0\\
          0 \ar[r] & A_{n - 1} \ar[r, "i_{n - 1}"] \ar[d, "d_{n - 1}"] & B_n \ar[r, "q_{n - 1}"] \ar[d, "d_{n - 1}"] & C_n \ar[r] \ar[d, "d_{n - 1}"] & 0\\
          0 \ar[r] & A_{n - 2} \ar[r, "i_{n - 2}"] & B_{n - 2} \ar[r, "q_{n - 2}"] & C_{n - 2} \ar[r] & 0
        \end{tikzcd}
      \]
      We want to check that $d_{n - 1}(z) = 0$. We will use the commutativity of the diagram. In particular, we know
      \[
        i_{n - 2} \circ d_{n - 1}(z) = d_{n - 1} \circ i_{n - 1} (z) = d_{n - 1} \circ d_n(y) = 0.
      \]
      By exactness at $A_{n - 2}$, we know $i_{n - 2}$ is injective. So we must have $d_{n - 1}(z) = 0$.
    \item
      \begin{enumerate}
        \item First, in the proof, suppose we picked a different $y'$ such that $q_n(y') = q_n(y) = x$. Then $q_n(y' - y) = 0$. So $y' - y \in \ker q_n = \im i_n$. Let $a \in A_n$ be such that $i_n(a) = y' - y$. Then
          \begin{align*}
            d_n(y') &= d_n(y' - y) + d_n(y) \\
            &= d_n \circ i_n (a) + d_n(y) \\
            &= i_{n - 1} \circ d_n (a) + d_n(y).
          \end{align*}
          Hence when we pull back $d_n(y')$ and $d_n(y)$ to $A_{n - 1}$, the results differ by the boundary $d_n(a)$, and hence produce the same homology class.
        \item Suppose $[x'] = [x]$. We want to show that $\partial_* [x] = \partial_*[x']$. This time, we add a layer above.
          \[
            \begin{tikzcd}
              0 \ar[r] & A_{n + 1} \ar[r, "i_{n + 1}"] \ar[d, "d_{n + 1}"] & B_{n + 1} \ar[r, "q_{n + 1}"] \ar[d, "d_{n + 1}"] & C_{n + 1} \ar[r] \ar[d, "d_{n + 1}"] & 0\\
              0 \ar[r] & A_n \ar[r, "i_n"] \ar[d, "d_n"] & B_n \ar[r, "q_n"] \ar[d, "d_n"] & C_n \ar[r] \ar[d, "d_n"] & 0\\
              0 \ar[r] & A_{n - 1} \ar[r, "i_{n - 1}"] & B_{n - 1} \ar[r, "q_{n - 1}"] & C_{n - 1} \ar[r] & 0
            \end{tikzcd}
          \]
          By definition, since $[x'] = [x]$, there is some $c \in C_{n + 1}$ such that
          \[
            x' = x + d_{n + 1} (c).
          \]
          By surjectivity of $q_{n + 1}$, we can write $c = q_{n + 1}(b)$ for some $b \in B_{n + 1}$. By commutativity of the squares, we know
          \[
            x' = x + q_n \circ d_{n + 1} (b).
          \]
          The next step of the proof is to find some $y$ such that $q_n (y) = x$. Then
          \[
            q_n(y + d_{n + 1} (b)) = x'.
          \]
          So the corresponding $y'$ is $y' = y + d_{n + 1}(b)$. So $d_n (y) = d_n(y')$, and hence $\partial_*[x] = \partial_* [x']$.
      \end{enumerate}
    \item This is yet another standard diagram chasing argument. When reading this, it is helpful to look at a diagram and see how the elements are chased along. It is even more beneficial to attempt to prove this yourself.
      \begin{enumerate}
        \item $\im i_* \subseteq \ker q_*$: This follows from the assumption that $i_n \circ q_n = 0$.
        \item $\ker q_* \subseteq \im i_*$: Let $[b] \in H_n(B)$. Suppose $q_*([b]) = 0$. Then there is some $c \in C_{n + 1}$ such that $q_n(b) = d_{n + 1}(c)$. By surjectivity of $q_{n + 1}$, there is some $b' \in B_{n + 1}$ such that $q_{n + 1}(b') = c$. By commutativity, we know $q_n(b) = q_n \circ d_{n + 1}(b')$, ie.
          \[
            q_n (b - d_{n + 1}(b')) = 0.
          \]
          By exactness of the sequence, we know there is some $a \in A_n$ such that
          \[
            i_n(a) = b - d_{n + 1}(b').
          \]
          Moreover,
          \[
            i_{n - 1} \circ d_n(a) = d_n \circ i_n (a) = d_n(b - d_{n + 1}(b')) = 0,
          \]
          using the fact that $b$ is a cycle. Since $i_{n - 1}$ is injective, it follows that $d_n(a) = 0$. So $[a] \in H_n(A)$. Then
          \[
            i_*([a]) = [b] - [d_{n + 1}(b')] = [b].
          \]
          So $[b] \in \im i_*$.
        \item $\im q_* \subseteq \ker \partial_*$: Let $[b] \in H_n(B)$. To compute $\partial_*(q_*([b]))$, we first pull back $q_n(b)$ to $b \in B_n$. Then we compute $d_n(b)$ and then pull it back to $A_{n + 1}$. However, we know $d_n(b) = 0$ since $b$ is a cycle. So $\partial_*(q_*([b])) = 0$, ie. $\partial_* \circ q_* = 0$.
        \item $\ker \partial_* \subseteq \im q_*$: Let $[c] \in H_n(C)$ and suppose $\partial_*([c]) = 0$. Let $b \in B_n$ be such that $q_n(b) = c$, and $a \in A_{n - 1}$ such that $i_{n - 1}(a) = d_n(b)$. By assumption, $\partial_*([c]) = [a] = 0$. So we know $a$ is a boundary, say $a = d_n (a')$ for some $a' \in A_n$. Then by commutativity we know $d_n(b) = d_n \circ i_n (a')$. In other words,
          \[
            d_n(b - i_n(a')) = 0.
          \]
          So $[b - i_n(a')] \in H_n(B)$. Moreover,
          \[
            q_*([b - i_n(a')]) = [q_n(b) - q_n \circ i_n(a')] = [c].
          \]
          So $[c] \in \im q_*$.
        \item $\im \partial_* \subseteq \ker i_*$: Let $[c] \in H_n(C)$. Let $b \in B_n$ be such that $q_n(b) = c$, and $a \in A_{n - 1}$ be such that $i_n(a) = d_n(b)$. Then $\partial_*([c]) = [a]$. Then
          \[
            i_*([a]) = [i_n(a)] = [d_n(b)] = 0.
          \]
          So $i_* \circ \partial_* = 0$.
        \item $\ker i_* \subseteq \im \partial_*$: Let $[a] \in H_n(A)$ and suppose $i_*([a]) = 0$. So we can find some $b \in B_{n + 1}$ such that $i_n(a) = d_{n + 1}(b)$. Let $c = q_{n + 1}(b)$. Then
          \[
            d_{n + 1}(c) = d_{n + 1}\circ q_{n + 1} (b) = q_n \circ d_{n + 1}(b) = q_n \circ i_n (a) = 0.
          \]
          So $[c] \in H_n(C)$. Then $[a] = \partial_*([c])$ by definition of $\partial_*$. So $[a] \in \im \partial_*$.
      \end{enumerate}
  \end{enumerate}
\end{proof}

Another piece of useful algebra is known as the $5$-lemma:
\begin{lemma}[Five lemma]
  Consider the following commutative diagram:
  \[
    \begin{tikzcd}
      A \ar[r, "f"] \ar[d, "\ell"] & B \ar[r, "g"] \ar[d, "m"] & C \ar[r, "h"] \ar[d, "n"] & D \ar[r, "j"] \ar[d, "p"] & E \ar[d, "q"]\\
      A' \ar[r, "r"] & B' \ar[r, "s"] & C' \ar[r, "t"] & D' \ar[r, "u"] & E'
    \end{tikzcd}
  \]
  If the two rows are exact, $m$ and $p$ are isomorphisms, $q$ is injective and $\ell$ is surjective, then $n$ is also an isomorphism.
\end{lemma}

\begin{proof}
  The philosophy is exactly the same as last time.

  We first show that $n$ is surjective. Let $c' \in C'$. Then we obtain $d' = t(c') \in D'$. Since $p$ is an isomorphism, we can find $d \in D$ such that $p(d) = d'$. Then we have
  \[
    q(j(d)) = u(p(d)) = u(f(c')) = 0.
  \]
  Since $q$ is injective, we know $j(d) = 0$. Since the sequence is exact, there is some $c \in C$ such that $h(c) = d$.

  We are not yet done. We do not know that $n(c) = c'$. All we know is that $d(n(c)) = d(c')$. So $d(c' - n(c)) = 0$. By exactness at $C'$, we can find some $b'$ such that $s(b') = n(c) - c'$. Since $m$ was surjective, we can find $b \in B$ such that $m(b) = b'$. Then we have
  \[
    n(g(b)) = n(c) - c'.
  \]
  So we have
  \[
    n(c - g(b)) = c'.
  \]
  So $n$ is surjective.

  Showing that $n$ is injective is similar.
  % complete
\end{proof}

\begin{cor}
  Let $f: (X, A) \to (Y, B)$ be a map of pairs, and that any two fo $f_*: H_*(X, A) \to H_*(Y, B)$, $H_*(X) \to H_*(Y)$ and $H_*(A) \to H_*(B)$ are isomorphisms. Then the third is also an isomorphism.
\end{cor}

\begin{proof}
  Follows from the long exact sequence and the five lemma.
\end{proof}

\subsubsection*{Proof of excision}

We want to show that homotopy of continuous maps does not affect the induced map on the homology groups. We will do this by showing that homotopies of maps induce homotopies of chain complexes, and chain homotopic maps induce the same map on homology groups.

\begin{defi}[Chain homotopy]\index{chain homotopy}
  A \emph{chain homotopy} between chain maps $f_{\Cdot}, g_{\Cdot}: C_{\Cdot} \to D_{\Cdot}$ is a collection of homomorphisms $F_n: C_n \to D_{n + 1}$ such that
  \[
    g_n - f_n = d_{n + 1}^D \circ F_n + F_{n - 1} \circ d_n^C: C_n \to D_n
  \]
  for all $n$.
\end{defi}

The relevance of this definition is the following result:
\begin{lemma}
  If $f_{\Cdot}$ and $g_{\Cdot}$ are chain homotopies, then $f_* = g_*: H_*(C_{\Cdot}) \to H_*(D_{\Cdot})$.
\end{lemma}

\begin{proof}
  Let $[c] \in H_n(C_{\Cdot})$. Then we have
  \[
    g_n(c) - f_n(c) = d_{n + 1}^Df_n(c) + F_{n - 1}(d_n^C(c)) = d_{n + 1}^Df_n(c),
  \]
  where the second term dies because $c$ is a cycle. So we have $[g_n(c)] = [f_n(c)]$.
\end{proof}

That was the easy part. What we need to do now is to show that homotopy of maps between spaces gives a chain homotopy between the corresponding chain maps.

\begin{notation}
  From now on, we will just write $d$ for $d_n^C$.

  For $f: X \to Y$, we will write $f_\#: C_n(X) \to C_n(Y)$ for the map $\sigma \mapsto f \circ \sigma$, ie. what we used to call $f_n$.
\end{notation}

Now if $H: [0, 1] \times X \to Y$ is a homotopy from $f$ to $g$, and $\sigma: \Delta^n \to X$ is an $n$-chain, then we get a homotopy
\[
  \begin{tikzcd}
    \lbrack0, 1\rbrack \times \Delta^n \ar[r, "{[0, 1] \times \sigma}"] & \lbrack0, 1\rbrack \times X \ar[r, "H"] & Y
  \end{tikzcd}
\]
from $f_\#(\sigma)$ to $g_\#(\sigma)$. Note that we write $[0, 1]$ for the identity map $[0, 1] \to [0, 1]$.


Suppose we can find a collection of chains $P_n \in C_{n + 1}([0, 1] \times \Delta^n)$ for $n \geq 0$ such that
\[
  d(P_n) = i_1 - i_0 - \sum_{j = 0}^n (-1)^j ([0, 1] \times \delta_j)_\#(P_{n - 1}),
\]
where
\begin{align*}
  i_0: \delta^n &= \{0\} \times \Delta^n \hookrightarrow [0, 1] \times \Delta^n\\
  i_1: \delta^n &= \{0\} \times \Delta^n \hookrightarrow [0, 1] \times \Delta^n
\end{align*}
and $\delta_j: \Delta^{n - 1} \to \Delta^n$ is the inclusion of the $j$th face.

We then define
\[
  F_n: C_n(X) \to C_{n + 1}(Y)
\]
by sending
\[
  (\sigma: \Delta^n \to X) \mapsto H \circ ([0, 1] \times \sigma)_\#(P_n).
\]
We now calculate.
\begin{align*}
  \d F_n(\sigma) ={}& d((H \circ (1 \times \Delta^n))_\#(P_n))\\
  ={}& (H \circ ([0, 1] \times \sigma))_\#(d(P_n))\\
  ={}& (H \circ ([0, 1] \times \sigma))_\# \left(i_1 - i_0 - \sum_{j = 0}^n (-1)^j ([0, 1] \times \delta_j)_\#(P_{n - 1})\right)\\
  ={}& H \circ ([0, 1] \times \sigma) \circ i_1 - H \circ ([0, 1] \times \sigma) \circ i_0 \\
  &\quad- \sum_{j = 0}^n (-1)^j H_\# \circ (([0, 1] \times \sigma) \circ \delta_j)_\# (P_{n - 1})\\
  ={}& g \circ \sigma - f \circ \sigma - \sum_{j = 0}^n (-1)^j H_\# \circ (([0, 1] \times \sigma) \circ \delta_j)_\# (P_{n - 1})\\
  ={}& g \circ \sigma - f \circ \sigma - F_{n - 1}(\d \sigma)\\
  ={}& g_\#(\sigma) - f_\#(\sigma) - F_{n - 1}(d\sigma).
\end{align*}
So we just have to show that $P_n$ exists. Morally, it is the ``prism'' obtained by dissecting $[0, 1] \times \Delta^n$ into a sum of simplices. This is rather hard to visualize, so let's just write down a formula and check that it works.

Consider $[0, 1] \times \Delta^n \in \R \times \R^{n + 1}$, where it is convex. Let $\{v_0, v_1, \cdots, v_n\}$ for the vertices of $\{0\} \times \Delta^n \subseteq [1, 0] \times \Delta^n$. We write $\{w_0, \cdots, w_n\}$ for the corresponding vertices of $\{1\} \times \Delta^n$.

Now if $\{x_0, x_1, \cdots, x_{n + 1}\} \subseteq \{v_0, \cdots, v_n\} \cup \{w_0, \cdots, w_n\}$, we let
\[
  [x_0, \cdots, x_n]: \Delta^n \to [0, 1] \times \Delta^n
\]
by
\[
  (t_0, \cdots, t_{n + 1}) = \sum t_i x_i.
\]
This is still in the space by convexity. We let
\[
  P_n = \sum_{i = 0}^n (-1)^i [v_0, v_1 , \cdots, v_i, w_i, w_{i + 1}, \cdots, w_n] \in C_{n + 1}([0, 1] \times \Delta^n).
\]
We can check that it works.
\printindex
\end{document}
