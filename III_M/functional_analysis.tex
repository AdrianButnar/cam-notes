\documentclass[a4paper]{article}

\def\nauthor{Leo Lai}
\def\npart {III}
\def\nterm {Michaelmas}
\def\nyear {2015}
\def\nlecturer {A. Zs\'ak}
\def\ncourse {Functional Analysis}

\input{header}

\begin{document}

\maketitle
{\small \setlength{\parindent}{0em}
This course covers many of the major theorems of abstract Functional Analysis. It is intended to provide a foundation for several areas of pure and applied mathematics. We will cover the following topics:\\
Hahn-Banach Theorem on the extension of linear functionals. Locally convex spaces.\\
Duals of the spaces $L_p(\mu)$ and $C(K)$. The Radon-Nikodym Theorem and the Riesz Representation Theorem.\\
Weak and weak-* topologies. Theorems of Mazur, Goldstine, Banach-Alaoglu. Reflexivity and local reflexivity.\\
Hahn-Banach Theorem on separation of convex sets. Extreme points and the Krein-Milman theorem. Partial converse and the Banach-Stone Theorem.\\
Banach algebras, elementary spectral theory. Commutative Banach algebras and the Gelfand representation theorem. Holomorphic functional calculus.\\
Hilbert space operators, $C^*$-algebras. The Gelfand-Naimark theorem. Spectral theorem for commutative $C^*$-algebras. Spectral theorem and Borel functional calculus for normal operators.\\
Some additional topics time permitting. For example, the Fr\'echet-Kolmogorov Theorem, weakly compact subsets of $L_1(\mu)$, the Eberlein-\v{S}mulian and the Krein-\v{S}mulian theorems, the Gelfand-Naimark-Segal construction.

\subsection*{Pre-requisites}
\vspace{-\parskip}
Thorough grounding in basic topology and analysis. Some knowledge of basic functional analysis and
basic measure theory (much of which will be recalled either in lectures or via handouts). In Spectral
Theory we will make use of basic complex analysis. For example, Cauchy's Theorem, Cauchy's Integral
Formula and the Maximum Modulus Principle.
}

\tableofcontents

\section{Hahn-Banach extension theorems}
Let $X$ be a normed space. Recall that the \term{dual space} $X^*$ is the space of all bounded linear functionals on $X$. This is a normed space with norm $\norm{f}=\sup\{|f(x)|:x\in B_X\}$, where $B_X=\{x\in X:\norm{x}\leq 1\}$. Furthermore, $X^*$ is always complete.

\begin{eg}
  For sequence spaces, $l_p^*=l_q$, where $1\leq p<\infty$ and $\frac{1}{p}+\frac{1}{q}=1$. For a Hilbert space $H$, $H^*\cong H$, where the map is conjugate-linear if the scalar field is complex.
\end{eg}

\begin{notation}
  $X\sim Y$ means $X$ is isomorphic to $Y$, ie. there exists a bounded linear bijection $X\to Y$ with a bounded inverse.

  $X\cong Y$ means $X$ is isometrically isomorphic to $Y$, ie. there exists a bijective linear operator $T:X\to Y$ such that $\norm{Tx}=\norm{x}$ for all $x$.
\end{notation}

Let $X$ be a real vector space. A map $p:X\to\R$ is \term{postively homogeneous} if $p(\lambda x)=\lambda p(x)$ for all $x\in X$ and $\lambda\geq 0$. It is \term{subadditive} if $p(x+y)\leq p(x)+p(y)$ for all $x,y\in X$.

\begin{nthm}[Hahn-Banach Theorem]\label{thm:HahnBanach1}\index{Hahn-Banach theorem}
  Let $X$ be a real vector space and $p$ a positively homogeneous subadditive functional on $X$. Let $Y\subseteq X$ be a subspace and $g:Y\to\R$ a linear functional such that $g(y)\leq p(y)$ for all $y$. Then there exists a linear functional $f:X\to\R$ such that $f|_Y=g$ and $f(x)\leq p(x)$ for all $x\in X$.
\end{nthm}

\begin{proof}
  We use Zorn's lemma. Let $\mathcal{P}=\{(Z,h):Z\text{ a linear subspace of }X,\ Y\subseteq Z,\ h:Z\to\R\text{ linear},\ h|_Y=g,\ (\forall z\in Z)(h(z)\leq p(z))\}$ be the set of all extensions of $g$ to subspaces of $X$ satisfying the required properties. Then $\mathcal{P}$ is a poset under the relation $(Z_1,h_1)\leq (Z_2,h_2)$ if $Z_1\subseteq Z_2$ and $h_2|_{Z_1}=h_1$. It is non-empty since $(Y,g)\in\mathcal{P}$. Let $\{(Z_i,h_i):i\in I\}$ be a non-empty chain in $\mathcal{P}$, then the pair $(Z,h)$ defined by $Z=\bigcup Z_i$ and $h|_{Z_i}=h_i$ is clearly an upper bound ($Z\supseteq Y$ since the chain is non-empty). By Zorn's lemma, there exists a maximal element $(Z,h)$. We need to show that $Z=X$.

  Suppose $Z\not= X$, then choose $x_1\in X\backslash Z$, and set $Z_1=Z+x_1\R$. Fix $\alpha\in\R$, which will be determined later. Define $h_1:Z_1\to\R$ by $h_1(z+\lambda x)=h(z)+\lambda\alpha$. Then $h_1$ is linear and extends $h$. We now choose $\alpha$ such that $h_1(z+\lambda x_1)\leq p(z+\lambda x_1)$ for all $z\in Z$ and $\lambda\in\R$. This is equivalent to $h(z)+\alpha\leq p(z+x_1)$ and $h(z)-\alpha\leq p(z-x_1)$ since $p$ is positively homogeneous. Therefore, $\alpha$ must satisfy $h(w)-p(w-x_1)\leq\alpha\leq p(z+x_1)-h(z)$ for all $w,z\in Z$. This is possible if and only if $h(w)-p(w-x_1)\leq p(z+x_1)-h(z)$ for all $z,w\in Z$, but this latter condition is true, since
\[h(w)+h(z)=h(w+z)\leq p(w+z)\leq p(w-x_1)+p(z+x_1)\]
by the subadditivity of $p$. Therefore, there exists an $\alpha$ such that $(Z_1,h_1)\in\mathcal{P}$. However, $(Z_1,h_1)\geq (Z,h)$, which is a contradiction.
\end{proof}

Recall that a \term{seminorm} of a real or complex vector space $X$ is a function $f:X\to\R$ such that
\begin{enumerate}[label=(\roman*), nosep]
  \item For all $x\in X$, $p(x)\geq 0$.
  \item For all $x\in X$ and scalars $\lambda$, $p(\lambda x)=\abs{\lambda}p(x)$.
  \item For all $x,y\in X$, $p(x+y)\leq p(x)+p(y)$.
\end{enumerate}

Note that norms are seminorms, and seminorms are subadditive and positively homogeneous, so we can apply the above theorem.

\begin{nthm}[Hahn-Banach Theorem]\label{thm:HahnBanach2}\index{Hahn-Banach theorem}
  Let $X$ be a real or complex vector space, and let $p$ be a seminorm on $X$. Let $Y\subseteq X$ and $g$ a linear functional on $Y$ such that $\abs{g(y)}\leq p(y)$ for all $y\in Y$. Then there exists a linear functional $f$ on $X$ such that $f|_Y=g$ and $\abs{f(x)}\leq p(x)$ for all $x\in X$.
\end{nthm}

\begin{proof}
  In the real case, apply theorem~\ref{thm:HahnBanach1} to get a linear map $f:X\to\R$ such that $f|_Y=g$ and $f(x)\leq p(x)$ for all $x\in X$. In particular, $-f(x)=f(-x)\leq p(-x)=p(x)$, so $\abs{f(x)}\leq p(x)$, as required.

  In the complex case, let $X_{\R}$ be the same $X$ viewed as a real normed space. Let $g_1=\Re(g)$, then $g_1$ is a linear functional on $Y_\R$. Since $Y_\R$ is a subspace of $X_\R$ and $\abs{g_1(y)}\leq\abs{g(y)}\leq p(y)$ for all $y\in Y$, by the real case, there exists a linear map $f_1:X_\R\to\R$ such that $f_1|_{Y_\R}=g_1$ and $|f_1(x)|\leq p(x)$ for all $x\in X$. Let $g_2=\Im(g)$, then
  \[
    \left.\begin{aligned}
    & g(y)=g_1(y)+ig_2(y)\\
    & g(y)=-ig(iy)=-ig_1(iy)+g_2(iy)
    \end{aligned}\right\}
    \implies g(y)=g_1(y)-ig_1(iy)
  \]
  Define $f:X\to\C$ by $f(x)=f_1(x)-if_1(ix)$, then $f$ is real linear, and $f(ix)=f_1(ix)-if_1(-x)=if(x)$, so it is complex linear. For all $y\in Y$, $f(y)=f_1(y)-if_1(iy)=g(y)$, so $f|_Y=g$. For $x\in X$, choose $\lambda\in\T=\{z\in\C:\abs{z}=1\}$ such that $\abs{f(x)}=\lambda f(x)$, then $\abs{f(x)}=f_1(\lambda x)\leq p(\lambda x)=p(x)$. Hence, $f$ satisfies the conditions of the conclusion.
\end{proof}

\begin{remark}
  The above argument shows that if $X$ is a complex normed space, then the map $(X^*)_\R\to(X_\R)^*,\ f\mapsto\Re(f)$ is an isometric isomorphism.
\end{remark}

\begin{ncor}\label{cor:NormingFunctional}
  Let $X,\ p$ be as in theorem~\ref{thm:HahnBanach2}, and let $x_0\in X$, then there exists a linear functional $f$ on $X$ such that $f(x_0)=p(x_0)$, and $\abs{f(x)}\leq p(x)$ for all $x\in X$.
\end{ncor}

\begin{proof}
  Let $Y=\langle x_0\rangle$, and $g(\lambda x_0)=\lambda p(x_0)$, then $g$ is a linear functional on $Y$, $g(x_0)=p(x_0)$, and $\abs{g(\lambda x_0)}\leq\abs{\lambda}\cdot p(x_0)=p(\lambda x_0)$. The result follows from theorem~\ref{thm:HahnBanach2}.
\end{proof}

\begin{nthm}\label{thm:HahnBanach3}
  Let $X$ be a real or complex normed space, then
  \begin{enumerate}[label=(\roman*),nosep]
    \item If $Y\subseteq X$ is a subspace, and $g\in Y^*$, then there exists $f\in X^*$ such that $f|_Y=g$ and $\norm{f}=\norm{g}$.
    \item If $x_0\in X$ and $x_0\not= 0$, then there exists $f\in S_{X^*}=\{x\in X^*:\norm{x}=1\}$ such that $f(x_0)=\norm{x_0}$.
  \end{enumerate}
\end{nthm}

\begin{proof}
  (i) Define $p(x)=\norm{g}\cdot\norm{x}$ for all $x\in X$, then $p$ is a seminorm and $\abs{g(y)}\leq p(y)$ for all $y\in Y$. By theorem~\ref{thm:HahnBanach2}, there exists a linear functional $f$ on $X$ such that $f|_Y=g$ and $\abs{f(x)}\leq\norm{g}\cdot\norm{x}$ for all $x\in X$. Then $\norm{f}\leq\norm{g}$. Since $f$ extends $g$, $\norm{f}\geq\norm{g}$. Therefore, $f\in X^*$, and $\norm{f}=\norm{g}$.

  (ii) Take $p=\norm{\cdot}$ and apply corollary~\ref{cor:NormingFunctional} to obtain a linear functional $f$ on $X$ such that $f(x_0)=\norm{x_0}$ and $\norm{f(x)}\leq\norm{x}$ for all $x\in X$. Then $f\in X^*$ and $\norm{f}=1$.
\end{proof}

\begin{remark}
  \begin{enumerate}[label=(\arabic*)]
    \item Theorem~\ref{thm:HahnBanach3}(i) can be considered as a linear version of the Tietze's extension theorem.
    \item Theorem~\ref{thm:HahnBanach3}(ii) shows that $X^*$ separates points, ie. if $x\not= y$ in $X$, then there exists $f\in X^*$ such that $f(x)\not= f(y)$. This follows by taking $x_0=x-y$.
    \item The functional constructed in theorem~\ref{thm:HahnBanach3}(ii) is called a \term{norming functional} for $x_0$. If $g\in B_{X^*}$, then $\abs{g(x_0)}\leq\norm{x_0}$, so $\norm{x_0}\geq\sup\{\abs{g(x_0)}:g\in B_{X^*}\}$. Theorem~\ref{thm:HahnBanach3}(ii) states that the supremum is attained, ie. $\norm{x_0}=\max\{\abs{g(x_0)}:g\in B_{X^*}\}$
    \item Another name for $f$ is the \term{support functional}: assuming $\norm{x_0}=1$, the ball $B_X$ lies on one side of $\{x\in X:f(x)=1\}$ and touches it at $x_0$.
  \end{enumerate}
\end{remark}

\subsubsection*{Bidual}
Let $X$ be a normed space, then $X^{**}$ is called the \term{bidual} or the \term{second dual} of $X$. For each $x\in X$, we can define $\hat{x}:X^*\to\mathrm{scalars}$ by $\hat{x}(f)=f(x)$. Then $\hat{x}$ is linear, and $\abs{\hat{x}(f)}=\abs{f(x)}\leq\norm{f}\cdot\norm{x}$, so $\hat{x}\in X^{**}$ with $\norm{\hat{x}}\leq\norm{f}$.

\begin{nthm}\label{thm:Bidual}
  The canonical embedding $X\to X^{**},\ x\mapsto\hat{x}$ is an isometric isomorphism into the second dual.
\end{nthm}

\begin{proof}
  It is easy to check that $x\mapsto\hat{x}$ is linear. Furthemore, by theorem \ref{thm:HahnBanach3}(ii), $\norm{\hat{x}}=\sup\{\abs{g(x)}:\norm{g}\in B_{X^*}\}=\norm{x}$.
\end{proof}

\begin{remark}
  \begin{enumerate}[label=(\arabic*)]
    \item Using a different notation, $\bra f,\hat{x}\ket=\bra x,f\ket=f(x)$.
    \item $\hat{X}=\{\hat{x}:x\in X\}\cong X$, so $\hat{X}$ is a closed subspace of $X^{**}$ if and only if $X$ is complete.
    \item More generally, the closure of $\hat{X}$ in $X^{**}$ is a Banach space which contains an isometric copy of $X$ as a dense subspace, which proves that $X$ has a completion.
  \end{enumerate}
\end{remark}

\begin{defi}
A normed space $X$ is \term{reflexive} if $\hat{X}=X^{**}$.
\end{defi}
\begin{eg}
The sequence spaces $l_p$ ($1<p<\infty$), Hilbert spaces, and finite dimensional spaces are reflexive. Non-reflexive spaces include $c_0$, $l_1$, $l_\infty$, $L_1[0,1]$.
\end{eg}
\begin{warning}
There exist spaces $X$ such that $X\cong X^{**}$, but $X$ is not reflexive, ie. $\widehat{X}\not= X^{**}$ (cf. James' space\index{James' space}).
\end{warning}

\subsubsection*{Dual operators}
Let $X,\ Y$ be normed spaces, $T\in\B(X,Y)$, where $\B(X,Y)$ is the space of all bounded linear functions from $X$ to $Y$. Recall that $\B(X,Y)$ is a normed space in the operator norm, and $\B(X,Y)$ is complete if $Y$ is complete.

Define the \term{dual operator} of $T$ by $T^*:X^*\to Y^*$, $T^*(g)=g\circ T$ for $g\in Y^*$. This is well-defined as $g\circ T$ is a composition of bounded linear operators. Furthermore, $T^*$ is linear, and it is bounded, since
\begin{align*}
  \norm{T^*}&=\sup_{g\in B_{Y^*}}\norm{T^*g}=\sup_{g\in B_{Y^*}}\sup_{x\in B_X}\abs{\bra x,T^*y\ket}\\
  &=\sup_{x\in B_X}\sup_{g\in B_{Y^*}}\abs{\bra Tx,g\ket}=\sup_{x\in B_X}\norm{Tx}=\norm{T}
\end{align*}
where the second last equality is by theorem~\ref{thm:HahnBanach3}(ii).

\begin{eg}
  The right shift map $R:l_p\to l_p$ given by
  \[
    R(x_1,x_2,\cdots)=(0,x_1,x_2,\cdots)
  \]
  has dual $R^*:l_q\to l_q$ given by the left shift $R^*(y_1,y_2,\cdots)=(y_2,y_3,\cdots)$, where $l_p^*$ has been identified with $l_q$.
\end{eg}

The dual map satisfies the following properties:
\begin{enumerate}[label=(\arabic*)]
  \item $(\Id_X)^*=\Id_{X^*}$, where $\Id_X=I_X$ is the identity on $X$.
  \item $(\lambda S+\mu T)^*=\lambda S^*+\mu T^*$, where $\lambda,\mu$ are scalars, and $S,T\in\B(X,Y)$.
  \item $(ST)^*=T^*S^*$ for $S\in\B(Y,Z)$ and $T\in\B(X,Y)$.
  \item The map $\B(X,Y)\to\B(Y^*,X^*)$, $T\mapsto T^*$ is an isometric embedding.
\end{enumerate}

\begin{remark}
  \begin{enumerate}[label=(\arabic*)]
    \item If $X\sim Y$, then $X^*\sim Y^*$.
    \item Given $T\in\B(X,Y)$, the following square commutes, ie. $\widehat{Tx}=T^{**}\hat{x}$ for all $x\in X$:
    \[
      \begin{tikzcd}
        X \arrow[r, "T"] \arrow[d, "\hat{x}"'] & Y \arrow[d, "\hat{y}"'] \\
        X^{**} \arrow[r, "T^{**}"]& Y^{**}
      \end{tikzcd}
	 \]
    This follows from $\langle g,\widehat{Tx}\rangle=\langle Tx,g\rangle=\langle x,T^*g\rangle=\langle T^*g,\hat{x}\rangle=\langle g,T^{**}\hat{x}\rangle$.
  \end{enumerate}
\end{remark}

\subsubsection*{Quotient Spaces}
Let $X$ be a normed space, and $Y$ a closed subspace of $X$. Consider the quotient $X/Y$ as a vector spaces. We define $\norm{x+Y}=\inf_{y\in Y}\{\norm{x-y}:y\in Y\}$. It can be checked that this forms a norm on the quotient space, called the \term{quotient norm}. The \term{quotient map} $q:X\to X/Y,\ x\mapsto x+Y$ is continuous, since $\norm{q(x)}=\norm{x+Y}\leq\norm{x}$. More exactly, letting $D_X=\{x\in X:\norm{x}<1\}$, then $q(D_X)=D_{X/Y}$: if $\norm{x+Y}<1$, then there exists $y\in Y$ such that $\norm{x+y}<1$, and $q(x+y)=q(x)=x+Y$. In particular, $q$ is an open map.

Given a bounded linear map $T:X\to Z$ such that $Y\subseteq\ker T$, there exists a unique map $\widetilde{T}:X/Y\to Z$ such that the diagram commutes:
\[
  \begin{tikzcd}[column sep=small]
    X \arrow[rr, "T"] \arrow[dr, "q"'] & & Z\\
    & X/Y \arrow[ur, "\widetilde{T}"'] &
  \end{tikzcd}
\]
It is linear, and $\widetilde{T}(D_{X/Y})=\widetilde{T}(q(D_{X/Y}))=T(D_X)$, so it is also bounded, and $||\widetilde{T}||=\norm{T}$. We use this to prove the following result:

\begin{nthm}\label{thm:DualSeparable}
  If a normed space $X$ has separable dual, then $X$ is separable.
\end{nthm}

\begin{proof}
  Recall that any subspace of a separable metric space is separable, eg. using the equivalence with second countability. Therefore, we may choose a sequence $(f_n)_{n=1}^\infty$ which is dense in $S_{X^*}$, the dual unit sphere.

  For each $n$, pick $x_n\in B_X$ such that $f_n(x_n)>1/2$. Let $Y=\cls\{x_n:n\in\N\}$ be their closed linear span (the closure of the linear span), then $Y$ is separable, since the set of finite rational combinations of elements in $\{x_n:n\in\N\}$ is dense in $Y$. If $Y\not= X$, then there exists $x_0\in X\backslash Y$. Let $h\in(X/Y)^*$ be a norming functional for $x_0+Y$, and let $f=h\circ q$. We have $\norm{f}=\norm{h}=1$, and $f\in X^*$. Therefore, there exists $N$ such that $\norm{f-f_N}<1/10$, so
  \[
    \abs{f(x_N)}\geq\abs{f_N(x_N)}-\abs{(f_N-f)(x_N)}>\frac{1}{2}-\frac{1}{10}>0
  \]
So $f(x_N)\not= 0$, which is a contradiction. Therefore, $Y=X$.
\end{proof}

Note that the converse is clearly false, eg. with $X=l_1$.

\begin{nthm}\label{thm:l_infinity}
  If $X$ is a separable normed space, then $X$ embeds isometrically into $l_\infty$.
\end{nthm}

\begin{proof}
  Let $(x_n)$ be a dense sequence in $S_X$. For each $n\in\N$, let $f_n\in S_{X^*}$ be a norming functional for $x_n$. Define $T:X\to l_\infty$ by $Tx=(f_n(x))_{n=1}^\infty$. We have $\norm{Tx}_\infty=\sup_n\abs{f_n(x)}\leq\norm{x}$, so $T$ is a bounded linear map with $\norm{T}\leq 1$. Given $x\in S_X$, $\abs{f_n(x)}\geq\abs{f_n(x_n)}-\abs{f_n(x-x_n)}\geq 1-\norm{x-x_n}$. Taking supremum over all $n\in\N$ gives $\norm{Tx}_\infty=\norm{x}=1$, so the embedding is isometric.
\end{proof}

\begin{remark}
  \begin{enumerate}[label=(\arabic*)]
    \item Let $\mathcal{S}$ deonte the class of all separable Banach spaces, then the above theorem states that $l_\infty$ is (isometrically) universal for $\mathcal{S}$, ie. $l_\infty$ contains an (isometric) isomorphic image of every element of $\mathcal{S}$.
    \item There exists a dual version: for all $x\in\mathcal{S}$, there exists a closed subspace $Y$ of $l_1$ such that $X\cong l_1/Y$.
  \end{enumerate}
\end{remark}

\begin{nthm}[Vector-valued Liouville's Theorem]\label{thm:VectorLiouville}
  Let $X$ be a complex Banach space, and $f:\C\to X$ a bounded analytic function, then $f$ is constant.
\end{nthm}

\begin{proof}
  To say the function $f$ is analytic means that $\lim_{z\to w}\frac{f(z)-f(w)}{z-w}$ exists in $X$ for all $w\in\C$. Let $\phi\in X^*$, and consider $\phi\circ f:\C\to\C$. By definition, $\phi\circ f$ is a bounded analytic function, so by the normal Liouville's theorem, $\phi\circ f$ is constant. Therefore, $\phi(f(z)-f(0))=0$ for all $z\in\C$ and $\phi\in X^*$. Theorem~\ref{thm:HahnBanach3}(ii) then implies $f(z)-f(0)=0$ for all $z\in\C$.
\end{proof}

\subsubsection*{Locally Convex Space}
{\renewcommand{\P}{\mathcal{P}}
A \term{locally convex space} is a pair $(X,\P)$, where $X$ is a real or complex vector space and $\P$ is a family of seminorms on $X$ separating points, which by definition means for all $x\in X$, $x\not= 0$, there exists $p\in\P$ such that $p(x)\not= 0$.

On $(X,\P)$ we have the following topology: $U\subseteq X$ is open if and only if for all $x\in U$, there exists $n\in\N$, $p_1,\cdots,p_n\in\P$, and $\varepsilon>0$ such that
\[
  \{y\in X:p_k(y-x)<\varepsilon\ \mathrm{for}\ 1\leq k\leq n\}\subseteq U
\]
Equivalently, the sets of the form $\{y\in X:p(y-x)<\varepsilon\}$ for all $x\in X$, $p\in\P$, and $\varepsilon>0$ form a subbase of the topology. This is the locally convex topology on $X$ induced by $\P$.

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item Addition and scalar multiplication are continuous, so in particular, the set of neighborhoods of 0 determines the topology. See Rudin for a more general discussion of topological vector spaces.
		\item The topology is Hausdorff since $\P$ separates points.
		\item A sequence $x_n$ tends to $x$ if and only if $p(x_n-x)\to 0$ for all $p\in\P$. The same is true for nets.
		\item If $Y$ is a subspace of $X$, then the locally convex topology on $Y$ induced from $\P$ is the same as the subspace topology.
		\item Let $\P$ and $\mathcal{Q}$ be two families of seminorms on $X$, both separating the points of $X$. We say $\P$ and $\mathcal{Q}$ are equivalent, written $\P\sim\mathcal{Q}$, if they induce the same topology on $X$. The topology of $(X,\P)$ is metrizable if and only if there exists a countable $\mathcal{Q}$ equivalent to $\P$.
	\end{enumerate}
\end{remark}

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item $(X,\norm{\cdot})$ a normed space is locally convex with $\P=\{\norm{\cdot}\}$.
		\item Let $U\subseteq\C$ be open and non-empty. Let $\Oc(U)=\{f:U\to\C\,|\,f\text{ analytic}\}$. For a compact $K\subseteq U$, define $p_K(f)=\sup\{\abs{f(z)}:z\in K\}$ on $\Oc(U)$. Let $\P=\{p_K:K\subseteq U,\ K\text{ compact}\}$, then $(\Oc(U),\P)$ is a locally compact space. The topology is the topology of local uniform convergence.

		There exists a sequence of compact sets $(K_n)$ in $U$ such that $K_n\subseteq\Int K_{n+1}$ and $\bigcup K_n=U$. Such sequences are called a \term{compact exhaustion} of $U$. It can be checked that $\{p_{K_n}:n\in\N\}\sim\P$, so $\Oc(U)$ is metrizable. In fact, it is a \term{Fr\'echet space}, ie. a complete metrizable locally convex space.

		It is not normable: recall Montel's theorem in complex analysis states that if a sequence $(f_n)$ in $\Oc(U)$ is locally bounded, then $(f_n)$ has a convergent subsequence. If there is a norm, this would imply the unit ball is compact, which is a contradiction since $\Oc(U)$ is infinite-dimensional.
		\item Let $\Omega\subseteq\R^d$ be open and non-empty. Let $C^\infty(\Omega)$ denote the set of smooth functions on $\Omega$. An element $\alpha=(\alpha_1,\cdots,\alpha_d)\in\Z_{\geq 0}^d$ is called a \term{multi-index}, and it defines a differential operator $D^\alpha=\big(\frac{\partial}{\partial x_1}\big)^{\alpha_1}\cdots\big(\frac{\partial}{\partial x_d}\big)^{\alpha_d}$. For compact $K\subseteq\Omega$, define $p_{K,\alpha}(f)=\sup\{|D^\alpha f(x)|:x\in K\}$. Let $\P=\{p_{K,\alpha}:K\subseteq\Omega,\ K\text{ compact},\ \alpha\in\Z_{\geq 0}^d\}$, then $(C^\infty(\Omega),\P)$ is a locally convex space. It can be checked that this is a Fr\'echet space, but it is not normable.
	\end{enumerate}
\end{eg}

\begin{nlemma}\label{lem:LCSCts}
	Let $(X,\P)$ and $(Y,\mathcal{Q})$ be locally convex spaces, and $T:X\to Y$ a linear map. The following are equivalent:
	\begin{enumerate}[nosep, label=(\roman*)]
		\item $T$ is continuous.
		\item $T$ is continuous at 0.
		\item For all $q\in\mathcal{Q}$, there exists $n\in\N$, $p_1,\cdots,p_n\in\P$, and $C\geq 0$ such that $q(Tx)\leq\ C\max_{1\leq k\leq n}p_k(x)$ for all $x\in X$.
	\end{enumerate}
\end{nlemma}

\begin{proof}
  (i)$\iff$(ii) because $T$ is linear and translations are homeomorphisms.

  (ii)$\implies$(iii): Let $q\in\mathcal{Q}$. Consider $V=\{y\in Y: q(y)\leq 1\}$. This is a neighborhood of 0 in $Y$. By assumption, there exists a neighborhood $U$ of 0 in $X$ such that $T(U)\subseteq V$. WLOG $U$ is an element in the basis, ie. there exists $n\in\N$, $p_1,\cdots,p_n\in\P$ and $\varepsilon>0$ such that $U=\{x\in X:p_k(x)\leq\varepsilon\text{ for }1\leq k\leq n\}$. Then we show that for all $x\in X$, $q(Tx)\leq\frac{1}{\varepsilon}\max_{1\leq k\leq n}p_k(x)$.

  If $\max_{1\leq k\leq n}p_k(x)\not= 0$, then there exists $t>0$ such that $\max_{1\leq k\leq n}p_k(tx)=\varepsilon$, so $tx\in U$, and $q(T(tx))\leq 1=\frac{1}{\varepsilon}\max_{1\leq k\leq n}p_k(tx)$. Divide by $t$ to get the required result. Otherwise, $p_k(x)=0$ for all $k$, so $p_k(tx)=0$ for all $t$, so $tx\in U$ for all $t$. Then $q(T(tx))\leq 1$ for all $t$, so $q(Tx)=0$, as required.

  (iii)$\implies$(ii): It remains to check that $T^{-1}(V)$ is an open neighborhood of 0 for $V$ an element in the subbase. Suppose $V=\{y\in Y: q(y)<\varepsilon\}$ for $q\in\mathcal{Q}$ and $\varepsilon>0$, then by assumption, there exists $n\in\N$, $p_1,\cdots,p_n\in\P$ and $C\geq 0$ such that $q(Tx)\leq C\max_{1\leq k\leq n}p_k(x)$. Let $U=\{x\in X:p_k(x)<\frac{\varepsilon}{C}\text{ for }1\leq k\leq n\}$, then for all $x\in X$, $q(Tx)<\varepsilon$, so $T(U)\subseteq V$.
\end{proof}

The dual space $X^*$ of a locally convex space $(X,\P)$ is the space of all linear functionals on $X$ which are continuous with respect to the locally convex topology on $X$.

\begin{ncor}\label{cor:KernelClosed}
  Given a locally convex space $(X,\P)$ and a linear functional $f$ on $X$, then $f$ is continuous if and only if $\ker f=f^{-1}(0)$ is closed.
\end{ncor}

\begin{proof}
	If $f$ is continuous, then clearly $\ker f$ is closed. Conversely, let $Y=\ker f$. If $Y=X$, then $f=0\in X^*$. Otherwise, fix $z\in X\backslash Y$, then there exists a neighborhood $U$ of 0 such that $(z+U)\cap Y=\emptyset$ since $Y$ is closed. WLOG there exists $n\in\N$, $p_1,\cdots,p_n\in\P$ , and $\varepsilon>0$ such that $U=\{x\in X:p_k(x)<\varepsilon\text{ for }1\leq k\leq n\}$. $U$ is convex since
	\[
	 p_k((1-t)x+ty)\leq (1-t)p_k(x)+tp_k(y)<\varepsilon
	\]
	for all $k$. $U$ is also \term{balanced}, ie. for all $x\in U$ and scalar $\lambda$ with $\abs{\lambda}=1$, we have $\lambda x\in U$. The functional $f$ is linear, so $f(U)$ is also convex and balanced. If it were unbounded, then it would be the whole scalar field, and hence so is $f(z+U)=f(z)+f(U)$, which implies $(z+U)\cap Y\not=\emptyset$. This is a contradiction, so there exists $C\geq 0$ such that $\abs{f(x)}\leq C$ for all $x\in U$. As in the proof of lemma~\ref{lem:LCSCts}, we have $\abs{f(x)}\leq\frac{C}{\varepsilon}\max_{1\leq k\leq n}p_k(x)$ for all $x\in X$, so by lemma~\ref{lem:LCSCts}, $f$ is continuous.
\end{proof}

\begin{nthm}[Hahn-Banach]\label{thm:HahnBanach4}\index{Hahn-Banach theorem}
	Let $(X,\P)$ be a locally convex space, then
	\begin{enumerate}[nosep,label=(\roman*)]
		\item Given a subspace $Y\subseteq X$ and $g\in Y^*$, ther exists $f\in X^*$ such that $f|_Y=g$.
		\item Given a closed subspace $Y$ of $X$ and $x_0\in X\backslash Y$, ther exists $f\in X^*$ such that $f|_Y=0$, and $f(x_0)\not= 0$.
	\end{enumerate}
\end{nthm}
\begin{proof}
(i) By lemma~\ref{lem:LCSCts}, there exists $n\in\N$, $p_1,\cdots,p_n\in\P$ and $C\geq 0$ such that $\abs{g(y)}\leq C\max_{1\leq k\leq n}p_k(y)$ for all $y\in Y$. The function defined by $p(x)=C\max_{1\leq k\leq n}p_k(x)$ is a seminorm on $X$. By theorem~\ref{thm:HahnBanach2}, there exists a linear functional $f$ on $X$ such that $\abs{f(x)}\leq p(x)$ for all $x\in X$, and $f|_Y=g$. By lemma~\ref{lem:LCSCts} again, $f\in X^*$.

(ii) Let $Z=Y+\spn(x_0)$. Define $g:Z\to\text{scalars}$ by $g(y+\lambda x_0)=\lambda$ for all $y\in Y$ and scalars $\lambda$. Then $g$ is a linear functional on $Z$, and $\ker g=Y$ is closed. By corollary~\ref{cor:KernelClosed}, $g\in Z^*$. In addition, $g|_Y=0$ and $g(x_0)\not= 0$. Now apply (i).
\end{proof}
}

\newpage

\section{Dual spaces of $L_p(\mu)$ and $C(K)$}

\subsection*{$L_p$ spaces}
Let $(\Omega,\F,\mu)$ be a measure space. For $1\leq p<\infty$, let $L_p(\Omega,\F,\mu)=L_p(\mu)$ be the real (or complex) vector space of measurable functions $f:\Omega\to\R\ (\text{or }\C)$ such that $\int_\Omega\abs{f}^pd\mu<\infty$. This becomes a normed space with the $L_p$-norm $\norm{f}_p=\big(\int_\Omega\abs{f}^p d\mu\big)^{1/p}$ for $f\in L_p(\mu)$, provided that we identify $f$ and $g$ if they agree almost everywhere (formally, the elements of $L_p(\mu)$ are equivalence classes of functions under the relation of equal almost everywhere). Minkowski's inequality shows that this is a norm.\index{$L_p\ (1\leq p<\infty)$}

For $p=\infty$, we define $L_\infty(\Omega,\F,\mu)=L_\infty(\mu)$ to be the space of \term{essentially bounded} measurable functions $f:\Omega\to\R\ (\text{or }\C)$, ie. there exists $N\in\F$ with $\mu(N)=0$ such that $f$ is bounded on $\Omega\backslash N$\index{$L_\infty$}. After identifying almost everywhere equal functions, this becomes a normed space with
\[
  \norm{f}_\infty=\esssup|f|=\inf_{\substack{N\in\F \\ \mu(N)=0}}\sup_{\omega\in\Omega\backslash N}\abs{f(\omega)}
\]
In fact, the infimum is attained. To see this, note that by definition, for each $k\in\N$, there exists a null set $N_k$ such that $\sup_{\Omega\backslash N_k}\abs{f}<\norm{f}_\infty+\frac{1}{k}$. Let $N=\bigcup_k N_k$, then $\mu(N)=0$, and $\sup_{\Omega\backslash N}\abs{f}\leq\sup_{\Omega\backslash N_k}\abs{f}<\norm{f}_\infty+\frac{1}{k}$ for all $k\in\N$. Therefore, $\norm{f}_\infty=\sup_{\Omega\backslash N}\abs{f}$. It is now easy to check that $\norm{\cdot}$ is a norm.

\begin{nthm}\label{thm:LpComplete}
  $L_p(\Omega,\F,\mu)$ is complete for $1\leq p\leq\infty$.
\end{nthm}

\begin{proof}
  First suppose $1\leq p<\infty$. We will show that all absolutely convergent series in $L_p(\mu)$ converges, which implies that it is complete.

  Let $(f_n)$ be a sequence in $L_p(\mu)$ such that $\sum_{n=1}^\infty\norm{f_n}_p<\infty$. Let $M=\sum_{n=1}^\infty\norm{f}_p$. For $n\in\N$, let $s_n=\sum_{k=1}^n\abs{f_k}$. Then $\norm{s_n}_p\leq\sum_{k=1}^n\norm{f_k}_p\leq M$ for all $n$. Fix $K>0$, and let $g=K\land\sum_{k=1}^\infty\abs{f_k}$, and $g_n=K\land s_n$. Then $g_n\uparrow g$, so by monotone convergence, $\int g_n^p\uparrow\int g^p$. However, $\int g_n^p\leq\int s_n^p=\norm{s_n}_p^p\leq M^p$ for all $n$, so $\int g^p\leq M^p$. Then
  \[
    K^p\mu\left(\bigg\{x:\sum_{k=1}^\infty\abs{f_k(x)}\geq K\bigg\}\right)\leq\int g^p\leq M^p
  \]
  Letting $K\to\infty$ implies $\mu\big(\big\{x:\sum_{k=1}^\infty\abs{f_k(x)}=\infty\big\}\big)=0$. Let $s=\sum_{k=1}^\infty\abs{f_k}$ when the series converges, and 0 otherwise. Let $f=\sum_{k=1}^\infty f_k$ when the series converges, and 0 otherwise. Then we have
  \[
    \bigg|f-\sum_{k=1}^n f_k\bigg|^p\leq 2^p(\abs{f}^p+s_n^p)\leq 4^p s^p
  \]
  We also have $\int 4^p s^p<\infty$, so by dominated convergence, $f-\sum_{k=1}^n f_k\to 0$ in the $L_p$ norm.

  Now suppose $p=\infty$. Recall that for any set $\Gamma$, the space $l_\infty(\Gamma)=\{f:\Gamma\to\text{scalar}:f\text{ bounded}\}$ is complete in $\norm{\cdot}_\infty$. Let $(f_n)$ be a Cauchy sequence in $L_\infty(\mu)$. For all $m,n\in\N$, there exists a null set $N_{m,n}$ such that $\norm{f_m-f_n}_\infty=\sup_{\Omega\backslash N_{m,n}}\abs{f_m-f_n}$, and for all $n$, there exists a null set $N_n$ such that $\norm{f_n}_\infty=\sup_{\Omega\backslash N_n}\abs{f_n}$. Let $N=\big(\bigcup_{n\in\N}N_n\big)\cup\big(\bigcup_{m,n\in\N}N_{m,n}\big)$, then $\mu(N)=0$, and $(f_n|_{\Omega\backslash N})$ is a Cauchy sequence in $l_\infty(\Omega\backslash N)$, and hence converges uniformly to some $f\in l_\infty(\Omega\backslash N)$. Setting $f=0$ on $N$, then $f$ is measurable and bounded, and $\norm{f-f_n}_\infty\leq\sup_{\Omega\backslash N}\abs{f-f_n}\to 0$ as $n\to\infty$.
\end{proof}

\begin{eg}
  If $\mu$ is the counting measure on $\N$, then $L_p(\mu)=l_p$. We know that $l_p^*\cong l_q$ if $1\leq p<\infty$ and $\frac{1}{p}+\frac{1}{q}=1$. We aim to prove a similar results for $L_p(\mu)$.
\end{eg}

\subsubsection*{Hahn-Jordan Decomposition}
We fix a measurable space $(\Omega,\F)$. A \term{complex measure} on $\F$ is a countably additive set function $\nu:\F\to\C$. This means $\nu(\bigcup_n A_n)=\sum_n\nu(A_n)$ if $A_n$ is any sequence of disjoint sets in $\F$. In particular, $\sum_n\nu(A_n)$ converges for any such sequence. The \term{total variation measure} of $\nu$, denoted by $\tv{\nu}$, is defined by
  \[
    \tv{\nu}(A)=\sup\bigg\{\sum_{k=1}^n\abs{\nu(A_k)}:A=\coprod_{k=1}^n A_k\text{ is a measurable partition of $A$}\bigg\}
  \]
where a measurable partition means that $A_1,\cdots,A_n$ are pairwise disjoint measurable sets which cover $A$. It is easy to check that $\tv{v}:\F\to[0,\infty]$ is a measure (we use the phrase ``positive measure'' in this context). It will be shown later that $\tv{\nu}$ is finite. Clearly, $\abs{\nu(A)}\leq\tv{\nu}(A)$ for all $A\in\F$. If $\mu$ is a positive measure on $\F$ such that $\abs{\nu(A)}\leq\mu(A)$ for all $A\in\F$, then $\tv{\nu}\leq\mu$, so $\tv{\nu}$ is the smallest positive measure dominating $\nu$.

A \term{signed measure} is a countably additive set function $\F\to\R$, so it is a complex measure whose range lies in $\R$.

\begin{nthm}\label{thm:HahnDecomposition}
  Let $\nu$ be a signed measure on $\F$, then there exists a measurable partition $\Omega=P\cup N$ such that $\nu(A)\geq 0$ for all measurable $A\subseteq P$ and $\nu(A)\leq 0$ for all measurable $A\subseteq N$. This is called the \term{Hahn decomposition}.
\end{nthm}

\begin{remark}
  We first look at a few consequences of the theorem.
	\begin{enumerate}[label=(\arabic*)]
		\item Let $\nu^+(A)=\nu(A\cap P)$ and $\nu^-(A)=-\nu(A\cap N)$ for $A\in\F$, then $\nu^+$ and $\nu^-$ are finite positive measures such that $\nu=\nu^+-\nu^-$ and $\tv{\nu}=\nu^+ +\nu^-$. To prove the second statement, let $A\in\F$, then $\abs{\nu(A)}=\abs{\nu^+(A)-\nu^-(A)}\leq\nu^+(A)+\nu^-(A)$, so $\tv{\nu}\leq\nu^++\nu^-$. Conversely,
		\begin{align*}
		 \nu^+(A)+\nu^-(A)&=\abs{\nu(A\cap P)-\nu(A\cap N)}\leq\abs{\nu(A\cap P)}+\abs{\nu(A\cap N)}\\
		 &\leq\tv{\nu}(A\cap P)+\tv{\nu}(A\cap N)=\tv{\nu}(A)
		\end{align*}
		Note that in particular, $\tv{\nu}$ is finite. Furthermore, the decomposition is unique, and it is called the \term{Jordan decomposition}.
		\item If $\nu:\F\to\C$ is a complex measure, then $\Re(\nu)$ and $\Im (\nu)$ are signed measures. Suppose they have Jordan decompositions $\nu_1-\nu_2$ and $\nu_3-\nu_4$ respectively, then $\nu=\nu_1-\nu_2+i\nu_3-i\nu_4$. For any $A\in\F$, we have $\abs{\nu(A)}\leq\sum_{k=1}^4\nu_k(A)$, so $\abs{\nu}\leq\sum_{k=1}^4\nu_k$. In particular, $\nu(\Omega)<\infty$.

		Furthermore, $\abs{\Re(\nu(A))}\leq\abs{\nu(A)}\leq\tv{\nu}(A)$ for all $A\in\F$, so $\abs{\Re(\nu)}=\nu_1+\nu_2\leq\tv{\nu}$. Therefore, $\nu_k\leq\abs{\nu}$ for $k=1,2,3,4$.
		\item Let $\nu,\ P,\ N$ be as in the theorem, then for $A\in\F$, we have $\nu^+(A)=\nu(A\cap P)$, and $A\cap P\subseteq A$. For any $B\subseteq A$ such that $B\in\F$, $\nu(B)=\nu^+(B)-\nu^-(B)\leq\nu^+(B)\leq\nu^+(A)$. Therefore,
		\[\nu^+(A)=\sup\{\nu(B):B\subseteq A,\ B\in\F\}\]
		for all $A\in\F$.
	\end{enumerate}
\end{remark}

\begin{proof}[Proof of Theorem~\ref{thm:HahnDecomposition}]
	In this proof, all sets are assumed to be in $\F$. Let $\nu^+$ be defined as above, then $\nu^+(A)\geq 0$ for all $A$ since $B=\emptyset$ is in the range, and $\nu^+(B\cup C)=\nu^+(B)+\nu^+(C)$ if $B\cap C=\emptyset$.

	\noindent \emph{Step 1}. $\nu^+(\Omega)<\infty$.

	Suppose $\nu^+(\Omega)=\infty$. Let $B_0=\Omega$. There exists $A_1\subseteq B_0$ such that $\nu(A_1)>1$. Then $B_0=A_1\cap(B_0\backslash A_1)$, so one of $\nu^+(A_1)$ and $\nu^+(B_0\backslash A_1)$ is infinite. Call the set $B_1$. Since $\nu^+(B_1)=\infty$, there exists $A_2\subseteq B_1$ such that $\nu(A_2)>2$. Let $B_2$ be either $A_2$ or $B_1\backslash A_2$ such that $\nu^+(B_2)=\infty$. Continue inductively, we get $B_0\supseteq B_1\supseteq\cdots$, and $A_n\subseteq B_{n-1}$ for each $n$. They satisfy $\nu^+(B_n)=\infty$, $\nu(A_n)>n$, and $B_n=A_n$ or $B_n=B_{n-1}\backslash A_n$ for all $n$.

	Suppose there exists an infinite set $N\subseteq\N$ such that $B_n=B_{n-1}\backslash A_n$ for all $n\in N$. For all $m<n$ in $N$, $A_n\subseteq B_{n-1}\subseteq B_m=B_{m-1}\backslash A_m$, so $A_m\cap A_n=\emptyset$. However $\sum_{n\in N}\nu(A_n)$ is not summable, which is a contradiction.

	Otherwise, there exists an $n_0\in\N$ such that $B_n=A_n$ for all $n>n_0$, then $A_{n_0}\supseteq A_{n_0+1}\supseteq\cdots$. For $n\geq n_0$, write $A_n=\bigcup_{k=n}^\infty(A_k\backslash A_{k-1})\cup A_\infty$, where $A_\infty=\bigcap_{k=n_0}^\infty A_k$. Then $\nu(A_n)=\sum_{k=n}^\infty\nu(A_k\backslash A_{k-1})+\nu(A_\infty)$. In particular, the sum converges, which is a contradiction. Therefore, $\nu^+(\Omega)$ is finite.

	\noindent \emph{Step 2}. There exists $P\in\F$ such that $\nu^+(\Omega)=\nu(P)$.

	For each $n\in\N$, there exists $A_n$ such that $\nu(A_n)>\nu^+(\Omega)+2^{-n}$. If $\nu(B)>\nu^+(\Omega)-\beta$ and $\nu(C)>\nu^+(\Omega)-\gamma$, then
	\[
	 \nu(B\cup C)=\nu(B)+\nu(C)-\nu(B\cap C)\geq\nu^+(\Omega)-\beta-\gamma
	\]
	It follows that for all $m<n$,
	\[
	 \nu\bigg(\bigcup_{k=m}^n A_k\bigg)\geq\nu^+(\Omega)-\sum_{k=m}^n 2^{-k}>\nu^+(\Omega)-2^{-m+1}
	\]
	Take $n\to\infty$ gives $\nu\big(\bigcup_{k=m}^\infty\big)\geq\nu^+(\Omega)-2^{-m+1}$. Let $P=\bigcap_{m=1}^\infty\bigcup_{k=m}^\infty A_k$, then $\nu(P)=\lim_{n\to\infty}\nu\big(\bigcup_{k=m}^\infty\big)\geq \nu^+(\Omega)$. Therefore, $\nu(P)=\nu^+(\Omega)$.

	\noindent \emph{Step 3}. $(P,N=\Omega\backslash P)$ works.

	If $A\subseteq P$ and $\nu(A)<0$, then $\nu(P)=\nu(A)+\nu(P\backslash A)<\nu(P\backslash A)\leq\nu^+(\Omega)$, which is a contradiction. Similarly, for all $B\subseteq N$, $\nu(A)\leq 0$.
\end{proof}

Let $(\Omega,\F,\mu)$ be a measure space. A complex measure $\nu:\F\to\C$ is \term{absolutely continuous} with respect to $\mu$ if for all $A\in\F$ such that $\mu(A)=0$, we have $\nu(A)=0$. This is denoted by $\nu\ll\mu$. An equivalent definition is that for all $\varepsilon>0$, there exists $\delta>0$ such that if $\mu(A)<\delta$, then $\abs{\nu(A)}<\varepsilon$.

\begin{remark}
  It is easy to check that if $\nu\ll\mu$, then $\tv{\nu}\ll\mu$. If $\nu=\nu_1-\nu_2+i\nu_3-i\nu_4$ is the Jordan decomposition of $\nu$, then $\nu_k\ll\mu$ for all $k$.
\end{remark}

\begin{eg}
  Let $f\in L_1(\mu)$. Define $\nu(A)=\int_A f d\mu=\int_\Omega f\cdot 1_A d\mu$. By the dominated convergence theorem, this is a complex/signed measure. Trivially, $\nu\ll\mu$.
\end{eg}

\begin{nthm}[Radon-Nikodym Theorem]\label{thm:RadonNikodym}\index{Radon-Nikodym theorem}
  Let $(\Omega,\F,\mu)$ be a $\sigma$-finite measure space, and $\nu:\F\to\C$ a complex measure such that $\nu\ll\mu$. Then there exists a unique $f\in L_1(\mu)$ such that $\nu(A)=\int_A f d\mu$ for all $A\in\F$. If $\nu$ is a complex/signed/positive measure, then $f$ takes values in $\C/\R/\R^+=[0,\infty)$ respectively.
\end{nthm}

\begin{proof}
  Uniqueness: Given $f,g\in L_1(\mu)$, if $\int_A f d\mu=\int_A g d\mu$ for all $A\in\F$, then $f=g$ almost everywhere, so they are equal in $L_1(\mu)$.

  Existence: Using the Jordan decomposition, we may assume $\nu$ is a positive measure. Since $\Omega$ is $\sigma$-finite, there exists a measurable partition $\Omega=\coprod_n A_n$ such that $\mu(A_n)<\infty$ for all $n$. If we can find $f_n\geq 0$ measurable such that $\nu(A)=\int_A f_n d\mu$ for all $A\subseteq A_n$, $A\in\F$, then define $f:\Omega\to\R^+$ by $f=f_n$ on $A_n$. This is non-negative and measurable, and for all $A\in\F$,
  \[
    \nu(A)=\sum_n\nu(A\cap A_n)=\sum_n\int_{A\cap A_n}f_nd\mu=\sum_n\int_\Omega f\cdot 1_{A_n}d\mu=\int_\Omega\sum_n f\cdot 1_{A_n}d\mu=\int_A f d\mu
  \]
where we have used monotone convergence in the second last equality. Therefore, we may suppose that $\mu$ is a finite measure.

  Now we have finite positive measures $\nu,\ \mu$ such that $\nu\ll\mu$. Let
  \[
    \mathcal{H}=\Big\{f:\Omega\to\R^+:f\text{ measurable and }\int_A fd\mu\leq\nu(A)\text{ for all }A\in\F\Big\}
  \]
  Then $\mathcal{H}\not=\emptyset$ since $0\in\mathcal{H}$. Also, if $f,g\in\mathcal{H}$, then
  \[
    \int_A f\lor g d\mu=\int_{A\cap\{f>g\}}f d\mu+\int_{A\cap\{f\leq g\}}g d\mu\leq\nu(A\cap\{f>g\})+\nu(A\cap\{f\leq g\})=\nu(A)
  \]
  Therefore, $f\lor g\in\mathcal{H}$.

  Let $d=\sup\{\int_\Omega f d\mu:f\in\mathcal{H}\}$, then $d\leq\nu(\Omega)=\alpha$. For all $n$, there exists $g_n\in\mathcal{H}$ such that $\int_\Omega g_n d\mu>\alpha-\frac{1}{n}$. Let $f_n=g_1\lor g_2\lor\cdots\lor g_n$, then $f_n\in\mathcal{H}$, and $\int_\Omega f_nd\mu>\alpha-\frac{1}{n}$. Let $f=\sup_n f_n$, then for all $A\in\F$, $\int_A f d\mu=\lim_n\int f_nd\mu\leq\nu(A)$ by monotone convergence, so $f\in\mathcal{H}$. Also by montone convergence, $\int_\Omega f d\mu=\alpha$.

  For $n\in\N$, let $\nu_n(A)=\nu(A)-\int_A f d\mu-\frac{1}{n}\mu(A)$, then $\nu_n$ is a signed measure, so it yields a Hahn decomposition $\Omega=P_n\cup N_n$. Let $f_n=f+\frac{1}{n}1_{P_n}$, then $f_n\in\mathcal{H}$, so
  \[
    \int_\Omega f_n d\mu=\int_\Omega f d\mu+\frac{1}{n}\mu(P_n)\leq\alpha=\int_\Omega f d\mu
  \]
  Therefore, $\mu(P_n)=0$. Let $P=\bigcup_n P_n$, and $N=\bigcap_n N_n$, then $\Omega=P\cup N$, with $P\cap N=\emptyset$ and $\mu(P)=0$. For $A\subseteq N$,
  \[
    \nu_n(A)=\nu(A)-\int_A f d\mu-\frac{1}{n}\mu(A)\leq 0
  \]
  Letting $n\to\infty$ gives $\nu(A)=\int_A f d\mu$. For $A\subseteq P$, $\mu(A)=0$, so $\nu(A)=0$ since $\nu\ll\mu$. Therefore, $\nu(A)=\int_A f d\mu=0$. This $f$ satisfies the required properties.
\end{proof}

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item Without $\nu\ll\mu$, we would find $\Omega=P\cup N$ and $f\in L_1(\mu)$ such that $\nu(A)=\nu_1(A)+\nu_2(A)$, where $\nu_1(A)=\int_A f d\mu$ satisfies $\nu_1\ll\mu$, and $\nu_2(A)=0$ for all $A\subseteq N$. Furthermore, $\nu_1(A)=0$ for all $A\subseteq P$. We say $\mu$ and $\nu_2$ are orthogonal, and write $\nu_2\perp\mu$. This decomposition is called the \term{Lebesgue decomposition}.
		\item The function $f$ in the theorem is called the \term{Radon-Nikodym derivative} of $\nu$ with respect to $\mu$, and it is denoted by $d\nu/d\mu$. Given a measurable function $g:\Omega\to\R$, then $g$ is $\nu$-integrable if and only if $g\frac{d\nu}{d\mu}$ is $\mu$-integrable, in which case
		\[
		 \int_\Omega g d\nu=\int_\Omega g\frac{d\nu}{d\mu}d\mu
		\]
		The case when $g$ is an indicator function is just the definition of $\frac{d\nu}{d\mu}$.
	\end{enumerate}
\end{remark}

Fix a measure space $(\Omega,\F,\mu)$ and $1\leq p<\infty$. We will now look at the dual space of $L_p=L_p(\Omega,\F,\mu)$. Let $q$ be the H\"older conjugate of $p$, ie. $\frac{1}{p}+\frac{1}{q}=1$ (and $q=\infty$ if $p=1$). Fix $g\in L_q$, and define $\phi_g:L_p\to\text{scalar}$ by $\phi_g(f)=\int_\Omega fg d\mu$. By H\"older's inequality, $\phi_g$ is well-defined. In fact, $\abs{\phi_g(f)}\leq\norm{f}_p\cdot\norm{g}_q$, so $\phi_g\in L_p^*$, and $\norm{\phi_g}\leq\norm{g}_q$. So we have a linear function $\phi:L_q\to L_p^*$. It is bounded with norm at most 1.

\begin{nthm}\label{thm:DualLp}
  Let $(\Omega,\F,\mu),\ p,\ q,\ \phi$ be as above, then
  \begin{enumerate}[label=(\roman*)]
	 \item If $1<p<\infty$, then $\phi$ is an isometric isomorphism.
  	\item If $p=1$ and $\mu$ is $\sigma$-finite, then $\phi$ is an isometric isomorphism.
  \end{enumerate}
\end{nthm}

\begin{proof}
	We first show $\phi$ is isometric. Let $g\in L_q$. Let $\lambda$ be a measurable function with $\abs{\lambda}=1$ almost everywhere such that $\lambda g=\abs{g}$. First suppose $1<p<\infty$. Let $f=\lambda\abs{g}^{q-1}$, then $\abs{f}^p=\abs{g}^q$, so $f\in L_p$, and $\norm{f}_p^p=\norm{g}_q^q$, so
	\[
	 \phi_g(f)=\int_\Omega fg d\mu=\int_\Omega\abs{g}^q d\mu=\norm{g}_q^q=\norm{g}_q\cdot\norm{f}_p
	\]
	Therefore, $\norm{\phi_g}=\norm{g}_q$. Now suppose $p=1$ and $\mu$ is $\sigma$-finite. Fix $s>\norm{\phi_g}$ and let $A=\{\abs{g}>s\}$. The measure $\mu$ is $\sigma$-finite, so there exists a countable sequence $(A_n)$ in $\F$ such that $A=\bigcup_n A_n$ and $\mu(A_n)<\infty$ for each $n$. Then $\lambda|_{A_n}\in L_1$ for all $n$ and
	\[
	 \norm{\phi_g}\mu(A_n)\geq\phi_g(\lambda|_{A_n})=\int_{A_n}\abs{g}d\mu\geq s\mu(A_n)
	\]
	Therefore, $\mu(A_n)=0$, and so $\mu(A)=0$. Hence $\norm{g}_\infty\leq s$. This holds for all $s>\norm{\phi_g}$, so $\norm{g}_\infty\leq\norm{\phi_g}$, which implies $\norm{\phi_g}=\norm{g}_\infty$.

	We now need to check that $\phi$ is onto. Fix $F\in L_p^*$.

	\emph{Case 1: $\mu$ is finite}. Define $\nu(A)=F(1_A)$ for $A\in\F$. Note that $1_A\in L_p$ since $\mu(A)<\infty$. Let $A,\ (A_n)$ be in $\F$ such that $A=\bigcup_n A_n$, and $A_m\cap A_n=\emptyset$ if $m\not= n$. Then $\norm{1_A-\sum_{k=1}^n 1_{A_k}}_p\to 0$ as $n\to\infty$ by countable additivity, so
	\[
	 \nu(A)=F(1_A)=\lim_{n\to\infty}F\Big(\sum_{k=1}^n 1_{A_k}\Big)=\lim_{n\to\infty}\sum_{k=1}^n\nu(A_k)
	\]
	This proves that $\nu$ is countably additive. If $\mu(A)=0$, then $1_A=0$ in $L_p$, so $\nu(A)=F(1_A)=0$. Therefore, $\nu\ll\mu$. By the Radon-Nikodym theorem, there exists a unique $g\in L_1(\mu)$ such that $\nu(A)=F(1_A)=\int_A g d\mu=\int_\Omega g\cdot 1_A d\mu$ for all $A\in\F$. By linearity, $F(f)=\int_\Omega gf d\mu$ for all simple functions $f$. Given $f\in L_\infty$, there exists a sequence $(f_n)$ of simple functions such that $f_n\to f$ in $L_\infty$, and hence in $L_p$ as $\mu$ is finite. It follows that $f_ng\to fg$ in $L_1$, so
	\[
	 F(f)=\lim_{n\to\infty} F(f_n)=\lim_{n\to\infty}\int_\Omega f_n g d\mu=\int_\Omega fgd\mu
	\]

	Now we need to show that $g\in L_q$. Let $\lambda$ be a measurable function such that $\lambda g=\abs{g}$ and $\abs{\lambda}=1$. First suppose $1<p<\infty$, then for $n\in\N$, let $f_n=\lambda\abs{g}^{q-1}$ if $\abs{g}\leq n$, and $f_n=0$ otherwise. Then $f_n\in L_\infty(\mu)$, so
	\[
	 \int_{\{\abs{g}\leq n\}}\abs{g}^q d\mu=\int_\Omega f_n gd\mu=F(f_n)\leq\norm{F}\cdot\norm{f_n}_p=\norm{F}\cdot\bigg(\int_{\{ \abs{g}\leq n\}}\abs{g}^q d\mu\bigg)^{1/p}
	\]
	Therefore, $\int_{\{\abs{g}\leq n\}}\abs{g}^qd\mu\leq\norm{F}^q$. By monotone convergence, $\int_\Omega\abs{g}^qd\mu\leq\norm{F}^q<\infty$, so $g\in L_q$. For $p=1,\ q=\infty$, fix $s>\norm{F}$, and let $A=\{\abs{g}>s\}$. The $\lambda\cdot 1_A\in L_\infty$, so
	\[
	 \norm{F}\cdot\mu(A)\leq s\mu(A)\leq\int_\Omega\abs{g}\cdot 1_Ad\mu=F(\lambda\cdot 1_A)\leq\norm{F}\cdot\mu(A)
	\]
	This implies $\mu(A)=0$, so $g\in L_\infty$.

	In either cases, since $L_\infty$ is dense in $L_p$, we are done.

	\emph{Before cases 2 and 3}. For $A\in\F$, let $\F_A=\{B\in\F:B\subseteq A\}$, then it is a $\sigma$-algebra on $A$. Let $\mu_A=\mu|_{F_A}$, then it is a measure on $\F_A$, and we have a measure space $(A,\F_A,\mu_A)$. By viewing $f\in L_p(A,\F_A,\mu_A)$ as an element of $L_p(\Omega,\F,\mu)$ by setting $f=0$ on $\Omega\backslash A$, we have $L_p(\mu_A)\subseteq L_p(\mu)$. Let $F_A=F|_{L_p(\mu_A)}$, then it is in $L_p(\mu_A)^*$, and $\norm{F_A}\leq\norm{F}$. Now let $B,C\in\F$ with $B\cap C=\emptyset$, it will be shown that
	\[
		\norm{F_{B\cup C}}=\norm{(\norm{F_B},\norm{F_C})}_q=
		\begin{cases}
  		\big(\norm{F_B}^q+\norm{F_C}^q\big)^{1/q} & \text{if }q<\infty\\[1ex]
	 	\max(\norm{F_B},\norm{F_q}) & \text{if }q=\infty
		\end{cases}
	\]
	In fact, given $f\in L_p(\mu_{B\cup C})$, we have
	\begin{align*}
  	\abs{F_{B\cup C}(f)}&\leq\abs{F_B(f|_B)}+\abs{F_C(f|_C)}\leq\norm{F_B}\cdot\norm{f|_B}_p+\norm{F_C}\cdot\norm{f|_C}_p\\
  	&\leq\norm{(\norm{F_B},\norm{F_C})}_q\cdot\big\|(\norm{f|_B}_p,\norm{f|_C}_p)\big\|_p=\norm{(\norm{F_B},\norm{F_C})}_q\cdot\norm{f}_p
	\end{align*}
	where we have used H\"older's inequality in $\R^2$. Conversely, by the equality case, there exists $b,c\geq 0$ such that $b^p+c^p=1$, and $\norm{(\norm{F_B},\norm{F_C})}_q=b\norm{F_B}+c\norm{F_C}$. Let $f\in L_p(\mu_B)$ and $h\in L_p(\mu_C)$, each with norm at most 1, then
	\[
	 b\abs{F_B(f)}+c\abs{F_C(h)}=F_{B\cup C}(b\varepsilon f+c\delta h)\leq\norm{F_{B\cup C}}
	\]
	where we have chosen scalars $\varepsilon$ and $\delta$ with norm 1 and used the fact that $\norm{b\varepsilon f+c\delta h}_p^p\leq b^p+c^p=1$ since $f$ and $h$ have disjoint supports. Now take supremum over all $f$ and $h$ to get $b\norm{F_B}+c\norm{F_C}\leq\norm{F_{B\cup C}}$, as required.

	\emph{Case 2: $\mu$ is $\sigma$-finite}. There exists a measurable partition $A=\coprod_{n=1}^\infty A_n$ such that $\mu(A_n)<\infty$ for all $n$. By case 1, for each $n$, there exists $g_n\in L_q(\mu_{A_n})$ such that $F|_{A_n}(f)=\phi_{g_n}(f)$ for all $f\in L_p(\mu_{A_n})$. We have the following estimates:
	\begin{align*}
  	q<\infty:&\ \sum_{k=1}^n\norm{g_k}_q^q=\sum_{k=1}^n\norm{F_{A_k}}^q= \norm{F_{\bigcup_{k=1}^n A_k}}^q\leq\norm{F}^q\\
  	q=\infty:&\ \max_{1\leq k\leq n}\norm{g_k}_\infty=\max_{1\leq k\leq n}\norm{F_{A_k}}\leq\norm{F}
	\end{align*}
	Define $g:\Omega\to\text{scalars}$ by setting $g=g_n$ on $A_n$, then it is immediate that $g\in L_q(\mu)$, and dominated convergence implies $F=\phi_g$ on $L_p(\mu)$.

	\emph{Case 3: $\mu$ is arbitrary and $p>1$}. Let $f\in L_p(\mu)$, then
	\[
	 \frac{1}{n^p}\mu\bigg(\Big\{\abs{f}>\frac{1}{n}\Big\}\bigg)\leq\int_\Omega\abs{f}^p d\mu<\infty
	\]
	Therefore, $\{f\not= 0\}=\bigcup_n\{\abs{f}>\frac{1}{n}\}$ is $\sigma$-finite. There exists a sequence $(f_n)$ in $L_p(\mu)$ of norm at most 1 such that $F(f_n)>\norm{F}-\frac{1}{n}$. Let $B=\bigcup_n\{f_n\not= 0\}$, then $B$ is $\sigma$-finite, and $\norm{F_B}=\norm{F}$. Let $C=\Omega\backslash B$, then $\norm{F}^q=\norm{F_B}^q+\norm{F_C}^q$, so $F_C=0$. By case 2, there exists $g\in L_q(\mu_B)\subseteq L_q(\mu)$ such that $F(f)=\int_B fg d\mu$ for all $f\in L_p(\mu_B)$. Given $f\in L_p(\mu)$, we have
	\[
	 F(f)=F_B(f|_B)+F_C(f|_C)=\int_B f|_B gd\mu=\int_\Omega fg d\mu
	\]
	Therefore, $F=\phi_g$.
\end{proof}

\begin{ncor}\label{cor:LpReflexive}
  Let $(\Omega,\F,\mu)$ be a measure space, and $1<p<\infty$, then $L_p(\mu)$ is reflexive.
\end{ncor}

\begin{proof}
  We have isometric isomorphisms $\phi:L_q\to L_p^*$ and $\psi:L_p\to L_q^*$, where $\frac{1}{p}+\frac{1}{q}=1$, so in particular $1<q<\infty$. Then $\psi(f)(g)=\int_\Omega fg d\mu=\phi(g)(f)$. We now have an isometric isomorphism $(\phi^*)^{-1}\psi:L_p\to L_p^{**}$, so it remains to show that this is the canonical embedding, ie. $(\phi^*)^{-1}\psi(f)=\hat{f}$ for all $f\in L_p$. For $g\in L_q$, we have
  \[
    \bra g,\phi^*(\hat{f})\ket=\bra\phi(g),\hat{f}\ket=\bra f,\phi(g)\ket=\bra g,\psi(f)\ket
  \]
  Therefore, $\phi^*(\hat{f})=\psi(f)$, as required.
\end{proof}

\subsection*{$C(K)$ spaces}
Let $K$ be a compact Hausdorff space. We define the following spaces:
\begin{enumerate}[label=-, nosep]
	\item $C(K)=\{f:K\to\C:f\text{ continuous}\}$\index{$C(K)$}
	\item $C^\R(K)=\{f:K\to\R:f\text{ continuous}\}$
	\item $C^+(K)=\{f\in C(K):f\geq 0\}$
	\item $M(K)=C(K)^*=\{\phi:C(K)\to\C:\phi\text{ linear, continuous}\}$\index{$M(K)$}
	\item $M^\R(K)=\{\phi\in M(K):\phi(f)\in\R\text{ for all }f\in C^\R(K)\}$.
	\item $M^+(K)=\{\phi:C(K)\to\C:\phi\text{ linear, }\phi(f)\geq 0\text{ for all }f\in C^+(K)\}$.
\end{enumerate}
Then $C(K)$ is a complex Banach space under the supremum norm $\norm{f}=\sup_K\abs{f}$, and $C^\R(K)$ is a real Banach space under the same norm. The elements of $M^+(K)$ are called positive linear functionals.

\begin{nlemma}\label{lem:C(K)Space}
	With notations as above:
	\begin{enumerate}[label=(\roman*), nosep]
		\item For all $\phi\in M(K)$, there exists unique $\phi_1,\phi_2\in M^\R(K)$ such that $\phi=\phi_1+i\phi_2$.
		\item The map $\phi\mapsto\phi|_{C^\R(K)}:M^\R(K)\to C^\R(K)^*$ is an isometric isomorphism.
		\item $M^+(K)\subseteq M(K)$, and $M^+(K)=\{\phi\in M(K):\norm{\phi}=\phi(1)\}$, where 1 is the constant 1 function.
		\item For all $\phi\in M^\R(K)$, there exists unique $\phi^+,\phi^-\in M^+(K)$ such that $\phi=\phi^+-\phi^-$ and $\norm{\phi}=\norm{\phi^+}+\norm{\phi^-}$.
	\end{enumerate}
\end{nlemma}

\begin{proof}
  (i) Define $\phi^*(f)=\overline{\phi(\bar{f})}$ for $f\in C(K)$, then it is easy to check that $\phi^*\in M(K)$, $\norm{\phi^*}=\norm{\phi}$, $\phi\mapsto\phi^*$ is conjugate linear, and $\phi\in M^\R(K)$ if and only if $\phi=\phi^*$. For uniqueness, suppose $\phi=\phi_1+i\phi_2$, then $\phi^*=\phi_1^*-i\phi_2^*=\phi_1-i\phi_2$, so $\phi_1=\frac{1}{2}(\phi+\phi^*)$ and $\phi_2=\frac{1}{2i}(\phi-\phi^*)$. For existence, it is clear that $\phi_1,\phi_2$ defined above work.
  \vspace{\topsep}

  (ii) For $\phi\in M^\R(K)$, the map $\phi|_{C^\R(K)}:C^\R(K)\to\R$ is real-linear and continuous, so $\phi|_{C^\R(K)}\in C^\R(K)^*$ with $\norm{\phi|_{C^\R(K)}}\leq\norm{\phi}$. The map $\phi\mapsto\phi|_{C^\R(K)}: M^\R(K)\to C^\R(K)^*$ is therefore real-linear with norm at most 1. Let $\psi\in C^\R(K)$, then $\phi:C(K)\to\C$ defined by $\phi(f)=\psi(\Re(f))+i\psi(\Im(f))$ is in $M^\R(K)$ and maps to $\psi$, so the map is onto. To prove that the map is isometric, fix $f\in B_{C(K)}$ and choose $\lambda$ with $\abs{\lambda}=1$ such that $\abs{\phi(f)}=\lambda\phi(f)$. Then $\abs{\phi(f)}=\lambda\phi(f)=\phi(\Re(\lambda f))+i\phi(\Im(\lambda f))$. The left hand side, $\Re(\lambda f)$, and $\Im(\lambda f)$ are all real, so $\phi(\Im(\lambda f))=0$. Therefore, $\abs{\phi(f)}=\phi(\Re(\lambda f))\leq\norm{\phi|_{C^\R(K)}}\cdot\norm{\Re(\lambda f)}\leq\norm{\phi|_{C^\R(K)}}$. Taking supremum implies $\norm{\phi}\leq\norm{\phi|_{C^\R(K)}}$.
  \vspace{\topsep}

  (iii) Let $\phi\in M^+(K)$. Given $f\in C^\R(K)$, there exists $f_1,f_2\in C^+(K)$ such that $f=f_1-f_2$. Then $\phi(f)=\phi(f_1)-\phi(f_2)\in\R$, so $\phi\in M^\R(K)$. Given $f\in B_{C^\R(K)}$, we have $-1\leq f\leq 1$, so $1\pm f\geq 0$, which implies $\phi(1\pm f)=\phi(1)\pm\phi(f)\geq 0$. Hence, $\abs{\phi(f)}\leq\phi(1)$. This implies $\phi|_{C^\R(K)}\in C^\R(K)^*$ with norm at most $\phi(1)$. By (ii), this implies $\phi\in M^\R(K)$, and $\norm{\phi}=\phi(1)$.

  Conversely, suppose $\phi\in M(K)$ satisfies $\norm{\phi}=\phi(1)$. WLOG $\phi(1)=1$. Given $f\in C^\R(K)$ with $\norm{f}\leq 1$, let $\phi(f)=\alpha+i\beta$ with $\alpha,\beta\in\R$. For each $t\in\R$, we have
	\begin{align*}
		& \abs{\phi(f+it\beta\cdot 1)}^2=\abs{\alpha+i\beta(1+t)}^2=\alpha^2+\beta^2(1+t)^2\\
		& \abs{\phi(f+it\beta\cdot 1)}^2\leq\norm{\phi}^2\cdot\norm{f+it\beta\cdot 1}^2\leq 1+t^2\beta^2
	\end{align*}
  These imply $\beta=0$, so $\phi\in M^\R(K)$. Given $f\in C^+(K)$ such that $0\leq f\leq 1$, then $\norm{1-f}\leq 1$, so $\phi(1-f)\leq\norm{\phi}=1$, which implies $\phi(f)\geq 0$.
  \vspace{\topsep}

	(iv) Given $\phi\in M^\R(K)$, define $\phi^+$ by $\phi^+(f)=\sup\{\phi(g):0\leq g\leq f\}$, for a given $f\in C^+(K)$. Taking $g=0$ shows that $\phi^+(f)\geq 0$. Let $f_1,f_2\in C^+(K)$, we need to check that $\phi^+(f_1+f_2)=\phi^+(f_1)+\phi^+(f_2)$. Let $0\leq g_k\leq f_k$ for $k=1,2$, then $\phi(g_1)+\phi(g_2)=\phi(g_1+g_2)\leq\phi^+(f_1+f_2)$ as $g_1+g_2\leq f_1+f_2$. Taking supremum over all such $g_1$ and $g_2$ gives $\phi^+(f_1)+\phi^+(f_2)\leq\phi^+(f_1+f_2)$. Conversely, suppose $0\leq g\leq f_1+f_2$, let $g_1=g\land f_1$ and $g_2=g-g_1$, then $0\leq g_1\leq f_1$ and $0\leq g_2\leq f_2$, so $\phi(g)=\phi(g_1)+\phi(g_2)\leq\phi^+(f_1)+\phi^+(f_2)$. Taking supremum over all such $g$ implies the required inequality. The equation $\phi^+(tf)=t\phi^+(f)$ clearly holds for all $t\in\R^+$ and $f\in C^+(K)$.

	For $f\in C^\R(K)$, choose $f_1,f_2\in C^+(K)$ such that $f=f_1-f_2$. Define $\phi^+(f)=\phi^+(f_1)-\phi^+(f_2)$. The above implies that this is well-defined and real-linear on $C^\R(K)$. For $f\in C(K)$, define $\phi^+(f)=\phi^+(\Re(f))+i\phi^+(\Im(f))$. Then $\phi^+:C(K)\to\C$ is complex-linear, and $\phi^+\in M^+(K)$.

	Let $\phi^-=\phi^+-\phi$, then for $f\in C^+(K)$, $\phi^-(f)=\phi^+(f)-\phi(f)\geq 0$, so $\phi^-\in M^+(K)$, and $\phi=\phi^+-\phi^-$. This implies $\norm{\phi}\leq\norm{\phi^+}+\norm{\phi^-}$. Conversely, $\norm{\phi^+}+\norm{\phi^-}=\phi^+(1)+\phi^-(1)=2\phi^+(1)-\phi(1)$. If $0\leq g\leq 1$, then $-1\leq 2g-1\leq 1$, so $2\phi(g)-\phi(1)=\phi(2g-1)\leq\norm{\phi}$. Taking supremum over $g$ implies $2\phi^+(1)-\phi(1)\leq\norm{\phi}$, so $\norm{\phi}=\norm{\phi^+}+\norm{\phi^-}$.

	Now suppose $\phi=\psi^+-\psi^-$ with $\norm{\phi}=\norm{\psi^+}+\norm{\psi^-}$, where $\psi^+,\psi^-\in M^+(K)$. Let $f\in C^+(K)$ and $0\leq g\leq f$, then $\phi(g)=\psi^+(g)-\psi^-(g)\leq\psi^+(g)\leq\psi^+(f)$. Therefore, $\phi^+(f)\leq \psi^+(f)$. Since $\psi^+-\psi^-=\phi^+-\phi^-$, we have $\psi^++\phi^-=\phi^+ +\psi^-$, and hence $\psi^-(1)\geq\phi^-(1)$. Then
	\[
	 \norm{\phi}=\norm{\psi^+}+\norm{\psi^-}=\psi^+(1)+\psi^-(1) \geq\phi^+(1)+\phi^-(1)=\norm{\phi}
	\]
	Therefore, $\psi^+(1)=\phi^+(1)$. Since $\psi^+-\phi^+$ is also in $M^+(K)$, this implies $\norm{\psi^+-\phi^+}=\psi^+(1)-\phi^+(1)=0$, so $\psi^+=\phi^+$. This proves uniqueness.
\end{proof}

We recall the following results in topology:
\begin{enumerate}
	\item $K$ is \term{normal} since it is compact Hausdorff, ie. given disjoint closed sets $E,F\subseteq K$, there exists disjoint open sets $U,V$ such that $E\subseteq U$ and $F\subseteq V$.

	Equivalently, given $E\subseteq U\subseteq K$, where $E$ is closed, and $U$ is open, there exists an open $V$ such that $E\subseteq V\subseteq\overline{V}\subseteq U$. This follows by applying normality to the pair of disjoint closed subsets $E$ and $K\backslash U$.
	\item \term{Urysohn's Lemma}: Given disjoint closed sets $E$ and $F$ in $K$, there exists a continuous function $f:K\to[0,1]$ such that $f=0$ on $E$ and $f=1$ on $F$.
	\item Notations: for $E,U\subseteq K$, $E$ closed, $U$ open, and $f:K\to [0,1]$ continuous, write $E\prec f$ if $f=1$ on $E$, and write $f\prec U$ if $\supp(f)=\overline{\{x\in K:f(x)\not= 0\}}\subseteq U$. The notations will imply that the range of $f$ is in $[0,1]$ and $f$ is continuous.

	 Using these notations, Urysohn's lemma can be written as: given $E\subseteq U\subseteq K$, with $E$ closed and $U$ open, there exists $f:K\to[0,1]$ continuous such that $E\prec f\prec U$.
\end{enumerate}

\begin{nlemma}\label{lem:PartitionUnity}
	Let $E\subseteq K$ be closed, and $U_1,\cdots,U_n\subseteq K$ open sets covering $E$, then
	\begin{enumerate}[label=(\roman*)]
		\item There exists open sets $V_i$ such that $E\subseteq\bigcup_{i=1}^n V_i$ and $\overline{V_i}\subseteq U_i$ for all $i$.
		\item There exists $h_i\prec U_i$ such that $0\leq\sum_{i=1}^n h_i\leq 1$ on $K$, and $\sum_{i=1}^n h_i=1$ on $E$.
	\end{enumerate}
\end{nlemma}

\begin{proof}
  (i) This will be proven by induction: for $n=1$, $E\subseteq U_1$, so by normality, there exists an open set $V$ such that $E\subseteq V\subseteq\overline{V}\subseteq U_1$. Let $n>1$, then $E\backslash U_n\subseteq\bigcup_{i=1}^{n-1}U_i$, so there exists open sets $V_1,\cdots,V_{n-1}$ such that $E\backslash U_n\subseteq\bigcup_{i=1}^{n-1}V_i$ and $\overline{V_i}\subseteq U_i$ for $i=1,\cdots,n-1$. Now, $E\backslash\bigcup_{i=1}^{n-1}V_i\subseteq U_n$, so there exists an open set $V_n$ such that $E\backslash\bigcup_{i=1}^{n-1}V_i\subseteq V_n\subseteq\overline{V_n}\subseteq U_n$, so $V_1,\cdots,V_{n-1},V_n$ satisfy the conditions.

  (ii) Let open sets $V_1,\cdots,V_n$ be as in (i). By Urysohn's lemma, for each $i$, there exists continuous functions $g_i:K\to[0,1]$ such that $\overline{V_i}\prec g_i\prec U_i$. Also, there exists $g_{n+1}$ such that $K\backslash\bigcup_{i=1}^nV_i \prec g_{n+1}\prec K\backslash E$. Let $g=\sum_{i=1}^{n+1}g_i$, then $g\geq 1$ on $K$. Let $h_i=g_i/g$ for $1\leq i\leq n$, then $0\leq\sum_{i=1}^n h_i\leq 1$ on $K$. On $E$, we have $g_{n+1}=0$, so $\sum_{i=1}^n h_i=1$.
\end{proof}

Let $X$ be an arbitrary topological space, and let $\G$ be the set of open subsets of $X$. Define $\B=\sigma(\G)$ to be the $\sigma$-algebra generated by $\G$. This is called the \term{Borel $\sigma$-algebra} on $X$, and its members are called \term{Borel sets}. A \term{Borel measure} on $X$ is a measure $\mu$ on $\B$. We say that $\mu$ is \term{regular} if
\begin{enumerate}[label=(\roman*),nosep]
	\item $\mu(E)<\infty$ for all compact $E\subseteq X$.
	\item $\mu(A)=\inf\{\mu(U):A\subseteq U\in\G\}$ for all $A\in\B$.
	\item $\mu(U)=\sup\{\mu(E):E\subseteq U,\ E\text{ compact}\}$ for all $U\in\G$.
\end{enumerate}
If $X$ is a compact Hausdorff space, then $\mu$ is regular if and only if $\mu(X)<\infty$ and (ii) holds. This is also equivalent to $\mu(X)<\infty$ and $\mu(A)=\sup\{\mu(E):E\subseteq A,\ E\text{ closed}\}$ for all $A\in\B$. If $\nu$ is a complex measure on $X$, then we say $\nu$ is regular if $\tv{\nu}$ is regular.

\begin{eg}
  The Lebesgue measure on $\R$ is regular.
\end{eg}

Next, let $\Omega$ be a set, $\F$ a $\sigma$-field on $\Omega$, and $\nu:\F\to\C$ a complex measure. A measurable function $f:\Omega\to\C$ is \term{$\nu$-measurable} if $\int_\Omega\abs{f}d\tv{\nu}<\infty$. Let $\nu=\nu_1-\nu_2+i\nu_3-i\nu_4$ be its Jordan decomposition, then we define $\int_\Omega fd\nu$ by
\[\int_\Omega fd\nu=\int_\Omega fd\nu_1-\int_\Omega fd\nu_2+i\int_\Omega fd\nu_3-i\int_\Omega fd\nu_4\]
This is well-defined since $\nu_k\leq\tv{\nu}$ for each $k$. It satisfies the following properties:
\begin{enumerate}[label=(\arabic*)]
	\item Linearity: If $f,g:\Omega\to\C$ are $\nu$-integrable, and $\alpha,\beta\in\C$, then $\alpha f+\beta g$ is also $\nu$-integrable, and $\int_\Omega(\alpha f+\beta g)d\nu=\alpha\int_\Omega fd\nu+\beta\int_\Omega gd\nu$.
	\item If $f$ is $\nu$-integrable, then $\abs{\int_\Omega fd\nu}\leq\int_\Omega\abs{f}d\tv{\nu}$.
	\item Dominated convergence: if $f_n:\Omega\to\C$ are measurable for all $n\in\N$, and $f_n\to f$ almost everywhere. Suppose there exists a $\nu$-integrable function $g:\Omega\to\R^+$ such that $\abs{f_n}\leq g$ almost everywhere for all $n$, then $\int_\Omega f_nd\nu\to\int_\Omega fd\nu$. To prove this, use (2) and the usual dominated convergence theorem.
\end{enumerate}

\begin{remark}
  Let $\nu$ be a complex Borel measure on $K$, then for $f\in C(K)$, we have $\int_K\abs{f}d\tv{\nu}\leq\norm{f}\cdot\tv{\nu}(K)$, so $\phi:C(K)\to\C$, $f\mapsto\int_K fd\nu$ is in $M(K)=C(K)^*$, and $\norm{\phi}\leq\tv{\nu}(K)=\norm{\nu}_1$\index{$\norm{\cdot}_1$}. If $\nu$ is a signed measure, then $\phi\in M^\R(K)$. If $\nu$ is a positive measure, then $\phi\in M^+(\R)$. We now prove the converse.
\end{remark}

\begin{nthm}[Riesz Representation Theorem] \label{thm:RieszRepresentation}\index{Riesz representation theorem}
  For every $\phi\in M^+(K)$, there exists a unique regular Borel measure $\mu$ on $K$ such that $\phi(f)=\int_K fd\mu$ for all $f\in C(K)$. Moreover, $\norm{\phi}=\norm{\mu}_1=\mu(K)$.
\end{nthm}

\begin{proof}
	Uniqueness: Suppose $\mu_1,\mu_2$ both represent $\phi$. Let $E\subseteq K$ be closed. Given open $U\supseteq E$, there exists $f$ such that $E\prec f\prec U$, then
	\[
	 \mu_1(E)\leq\int_K fd\mu_1=\phi(f)=\int_K fd\mu_2\leq\mu_2(U)
	\]
	Taking infimum over all $U$ to get $\mu_1(E)\leq\mu_2(E)$ by regularity. Swapping $\mu_1$ and $\mu_2$ to get $\mu_1(E)=\mu_2(E)$. By regularity, $\mu_1=\mu_2$.

	Existence: We define a set function $\mu^*$ on the power set of $K$ as follow: for $U\in\G$, define $\mu^*(U)=\sup\{\phi(f):f\prec U\}$. Then $\mu^*(\emptyset)=0$, $U\subseteq V$ implies $\mu^*(U)\leq\mu^*(V)$, and $\mu^*(K)=\phi(1_K)=\norm{\phi}$ (since $\phi\in M^+(K)$). In particular, $\mu^*$ is finite.

	For a general $A\subseteq K$, define $\mu^*(A)=\inf\{\mu^*(U):A\subseteq U\in\G\}$. This agrees with the previous definition on $\G$, and $\mu^*(A)\leq\mu^*(B)$ if $A\subseteq B$. We now prove that $\mu^*$ is countably subadditive. First suppose $(U_n)$ is a countable open cover of $U\in\G$. Let $f\prec U$, then by compactness, there exists $N$ such that $\supp(f)\subseteq\bigcup_{i=1}^N U_i$. By lemma~\ref{lem:PartitionUnity} with $E=\supp(f)$, there exists $h_i\prec U_i$ such that $\sum_{i=1}^N h_i=1$ on $E$ and $0\leq\sum_{i=1}^N h_i\leq 1$ on $K$. Then $f=\sum_{i=1}^N fh_i$, and $fh_i\prec U_i$. Therefore,
	\[
	 \phi(f)=\sum_{i=1}^N\phi(fh_i)\leq\sum_{i=1}^N\phi^*(U_i) \leq\sum_{i=1}^\infty\mu^*(U_i)
	\]
	Taking supremum over all $f$ implies $\mu^*(U)\leq\sum_{i=1}^\infty\mu^*(U_i)$.

	In the general case, suppose $A\subseteq\bigcup_{n=1}^\infty A_n$. Let $\varepsilon>0$. For all $n$, there exists open $U_n\supseteq A_n$ such that $\mu^*(U_n)<\mu^*(A_n)+2^{-n}\varepsilon$. Then $A\subseteq\bigcup_{n=1}^\infty U_n$, so by above,
	\[
	 \mu^*(A)\leq\mu^*\Big(\bigcup_{n=1}^\infty U_n\Big)\leq\sum_{n=1}^\infty\mu^*(U_n)<\sum_{n=1}^\infty\mu^*(A_n) +\varepsilon
	\]
	Therefore, $\mu^*$ is countably subadditive. It follows by basic measure theory that the set
	\[
	 \mathcal{M}=\{A\subseteq K:\text{for all }B\subseteq K,\ \mu^*(B)=\mu^*(B\cap A)+\mu^*(B\backslash A)\}
	\]
	is a $\sigma$-field over $K$, and $\mu^*|_\mathcal{M}$ is a measure on $\mathcal{M}$. Fix $U\in\G$ and $A\subseteq K$, we need to show that $\mu^*(A)\geq\mu^*(A\cap U)+\mu^*(A\backslash U)$.

	\emph{Case 1.} $A=V\in\G$. Fix $\varepsilon>0$, then there exists $f\prec V\cap U$ such that $\mu^*(V\cap U)<\phi(f)+\varepsilon$. There also exists $g\prec V\backslash\supp(f)$ such that $\mu^*(V\backslash\supp(f))<\phi(g)+\varepsilon$. Then $f+g\prec V$ since they have disjoint supports, and hence
	\[
	 \mu^*(V\cap U)+\mu^*(V\backslash U)\leq\mu^*(V\cap U)+\mu^*(V\backslash\supp(f))\leq\phi(f+g)+ 2\varepsilon\leq\mu^*(V)+2\varepsilon
	\]

	\emph{Case 2.} $A$ is arbitray. Let $V\in\G$ such that $A\subseteq V$, then
	\[
	 \mu^*(A\cap U)+\mu^*(A\backslash U)\leq\mu^*(V\cap U)+\mu^*(V\backslash U)\leq\mu^*(V)
	\]
	Take infimum over all $V$ to get the required inequality.

	By countable subadditivity of $\mu^*$, we now have $\G\subseteq\mathcal{M}$. Since $\mathcal{M}$ is a $\sigma$-field, we also have $\B\subseteq\mathcal{M}$. Let $\mu=\mu^*|_\B$, then $\mu$ is a Borel measure on $K$, and $\mu$ is regular by definition. Also $\norm{\mu}_1=\mu(K)=\phi(1_K)=\norm{\phi}$. It remains to show that $\phi(f)=\int_K d\mu$ for all $f\in C(K)$. It suffices to prove $\phi(f)\leq\int_K f d\mu$ for all $f\in C^\R(K)$, since we can apply the same result to $-f$ to get equality, and then extend to $C(K)$ by linearity.

	Let $f\in C^\R(K)$. Choose $a<b$ in $\R$ such that $f(K)\subseteq[a,b]$. Let $\varepsilon>0$. Choose $y_0<a<y_1<\cdots<y_n=b$ such that $y_i-y_{i-1}<\varepsilon$ for all $i$. Let $E_i=f^{-1}((y_{i-1},y_i])$. Then $K=\coprod_{i=1}^n E_i$ is a measurable partition of $K$. Choose open sets $U_i$ such that $E_i\subseteq U_i$, $\mu(U_i\backslash E_i)<\frac{\varepsilon}{n}$, and $f(U_i)\subseteq[y_{i-1},y_i+\varepsilon)$. Then $K=\bigcup_{i=1}^n U_i$, so by lemma~\ref{lem:PartitionUnity}, there exists $h_i\prec U_i$ for each $i$ such that $\sum_{i=1}^n h_i=1_K$.
	\begin{align*}
		\phi(f)=\sum_{i=1}^n \phi(fh_i)&\leq\sum_{i=1}^n(y_i+\varepsilon)\phi(h_i)= \sum_{i=1}^n(\abs{a}+y_i+\varepsilon)\phi(h_i)- \sum_{i=1}^n\abs{a}\phi(h_i)\\
		&\leq \sum_{i=1}^n(\abs{a}+y_i+\varepsilon)\mu(U_i)-\abs{a}\phi(1_K)\\
		&\leq\sum_{i=1}^n(\abs{a}+y_{i-1}+2\varepsilon)\Big(\mu(E_i)+\frac{\varepsilon}{n}\Big)-\abs{a}\phi(1_K)\\
		&=\sum_{i=1}^n y_{i-1}\mu(E_i)+ \abs{a}\sum_{i=1}^n\mu(E_i)+ C\varepsilon- \abs{a}\phi(1_K)\\
		&=\int_K\sum_{i=1}^n y_{i-1}1_{E_i}d\mu+C\varepsilon\leq\int_K fd\mu+C\varepsilon
	\end{align*}
	where $C=2\abs{a}+y_{i-1}+2\sum_{i=1}^n\mu(E_i)+2\varepsilon\leq 2\abs{a}+\abs{b}+2\mu(1_K)+2$ is bounded by a fixed constant. Therefore, we have $\phi(f)\leq\int_K fd\mu$, as required.
\end{proof}

\begin{ncor}\label{cor:RieszRepComplex}
  For every $\phi\in M(K)$, there exists a unique regular complex measure $\nu$ on $K$ such that $\phi(f)=\int_K fd\nu$ for all $f\in C(K)$. Moreover, $\norm{\phi}=\norm{\nu}_1=\tv{\nu}(K)$.
\end{ncor}

\begin{proof}
	The existence follows from lemma~\ref{lem:C(K)Space} and theorem~\ref{thm:RieszRepresentation}. We now prove that for any regular complex measure $\nu$ on $K$ representing $\phi$, the equation $\norm{\phi}=\norm{\nu}_1$ holds. This implies uniqueness since if $\nu_1$ and $\nu_2$ both represent $\phi$, then $\nu_1-\nu_2$ represent 0, so $\norm{\nu_1-\nu_2}_1=0$, which implies $\nu_1=\nu_2$.

	For any $f\in C(K)$, we have $\abs{\phi(f)}=\abs{\int_K fd\nu}\leq\int_K\abs{f}d\tv{\nu}\leq\norm{f}\cdot\tv{\nu}(K)$, so $\norm{\phi}\leq\tv{\nu}(K)$. Let $\varepsilon>0$. There exists a measurable partition $K=\coprod_{i=1}^n A_i$ such that $\tv{\nu}(K)\leq\sum_{i=1}^n\abs{\nu(A_i)}+\varepsilon$. Choose closed sets $E_i\subseteq A_i$ such that $\tv{\nu}(A_i\backslash E_i)<\frac{\varepsilon}{n}$. Choose open sets $U_i$ such that $E_i\subseteq U_i\subseteq K\backslash\bigcup_{j\not= i}E_j$ and $\tv{\nu}(U_i\backslash E_i)<\frac{\varepsilon}{n}$. Apply lemma~\ref{lem:PartitionUnity} to get $h_i\prec U_i$ such that $0\leq\sum_{i=1}^n h_i\leq 1$ on $K$ and $\sum_{i=1}^n h_i=1$ on $\bigcup_{i=1}^n E_i$. Note that on $h_j=0$ on $E_i$ for all $j\not= i$, so $h_i=1$ on $E_i$. Therefore,
	\[
	 \tv{\nu}(K)=\sum_{i=1}^n\abs{\nu(A_i)}+\varepsilon \leq\sum_{i=1}^n\abs{\nu(E_i)}+2\varepsilon= \sum_{i=1}^n\lambda_i\nu(E_i)+2\varepsilon
	\]
	where $\abs{\lambda_i}=1$ are chosen appropriately. Then
	\begin{align*}
		\tv{\nu}(K)=\abs{\int_K\sum_{i=1}^n\lambda_i 1_{E_i}d\nu}+2\varepsilon &\leq\abs{\int_K\sum_{i=1}^n\lambda_i h_id\nu}+\sum_{i=1}^n\tv{\nu}(U_i\backslash E_i)+2\varepsilon\\
		&\leq\bigg|\phi\Big(\sum_{i=1}^n\lambda_i h_i\Big)\bigg|+3\varepsilon\\
		&\leq\norm{\phi}\cdot\Big\|\sum_{i=1}^n\lambda_i h_i\Big\|+3\varepsilon\leq\norm{\phi}+3\varepsilon
  \end{align*}
  This shows that $\norm{\nu}_1=\tv\nu(K)=\norm{\phi}$.
\end{proof}

\noindent In summary, we have the following:

\begin{nthm}\label{thm:DualC(K)}
	\begin{enumerate}[label=(\roman*)]
		\item The space of regular complex Borel measure on $K$ with norm $\norm{\cdot}_1$ is a complex Banach space isometrically isomorphic to $C(K)^*$.
		\item The space of regular signed Borel measure on $K$ with norm $\norm{\cdot}_1$ is a real Banach space isometrically isomorphic to $C^\R(K)^*$.
	\end{enumerate}
\end{nthm}

\newpage

\section{Weak topologies}
Let $X$ be a set, and $\F$ a family of functions, where each $f\in\F$ is a function $X\to Y_f$, and $Y_f$ is a topological spcae. The \term{weak topology} $\sigma(X,\F)$ on $X$ is the smallest topology making all $f\in\F$ continuous.

Let $\mathcal{S}=\{f^{-1}(U):f\in\F,\ U\subseteq Y_f\text{ open in }Y_f\}$, then $\mathcal{S}$ forms a subbase of $\sigma(X,\F)$. In fact, if $\mathcal{S}_f$ is a subbase of the topology of $Y_f$ for each $f\in\F$, then the smaller set $\{f^{-1}(U):f\in\F,\ U\in\mathcal{S}_f\}$ is also a subbase.

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item Universal property of weak topology\index{weak topology!universal property}: If $Z$ is a topological space and $g:Z\to X$ is a function, then $g$ is continuous with respect to $\sigma(X,\F)$ on $X$ if and only if $f\circ g:Z\to Y$ is continuous for all $f\in\F$.
		\item If $Y_f$ is Hausdorff for all $f\in\F$, and $\F$ separates the points of $X$, then $\sigma(X,\F)$ is also Hausdorff.
	\end{enumerate}
\end{remark}

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item Let $X$ be a topological space, and $Y\subseteq X$ with inclusion $i:Y\to X$, then $\sigma(Y,\{i\})$ is the subspace topology on $Y$.
		\item \term{Product topology}: Let $X_\gamma$ for $\gamma\in\Gamma$ be topological spaces, and let $X=\prod_{\gamma\in\Gamma}X_\gamma$, with projections $\pi_\gamma:X\to X_\gamma$. The weak topology $\sigma(X,\{\pi_\gamma:\gamma\in\Gamma\})$ is the product topology on $X$.
	\end{enumerate}
\end{eg}

\begin{nprop}\label{prop:WeakMetrizable}
  Let $X$ be a set, and for $n\in\N$, let $(Y_n,d_n)$ be a metric space and $f_n:X\to Y_n$ a function. Suppose $\F=\{f_n:n\in\N\}$ separates the points of $X$, then $\sigma(X,\F)$ is metrizable.
\end{nprop}

\begin{proof}
  Define the function $d:X\times X\to\R$ by
  \[
    d(x,y)=\sum_{n=1}^\infty 2^{-n}(d_n(f_n(x),f_n(y))\land 1)
  \]
  Then it is easy to check that this is a metric. In particular, $\F$ separates the points of $X$ implies if $x\not= y$, then $d(x,y)\not= 0$. The identity $(X,d)\to(X,\sigma(X,\F))$ is continuous by the universal property of weak topology. The inverse can be checked to be continuous.
\end{proof}

\begin{nthm}[Tychonoff's Theorem]\label{thm:Tychonoff}\index{Tychonoff's theorem}
  The product of compact spaces with the product topology is compact.
\end{nthm}

\begin{proof}
	Let $X_\gamma$, $\gamma\in\Gamma$ be compact spaces, and equip $X=\prod_{\gamma\in\Gamma}X_\gamma$ with the product topology. Let $\F$ be a non-empty family of closed sets in $X$ with FIP\index{FIP} (the finite intersection property, ie. intersections of finitely many sets in $\F$ are non-empty). We need to show that $\bigcap_{F\in\F}F\not=\emptyset$.

	Using Zorn's lemma, there exists a maximal family $\mathcal{A}$ of (not necessarily closed) subsets of $X$ such that $\mathcal{A}\supseteq\F$ and $\mathcal{A}$ has the FIP. For each $\gamma\in\Gamma$, the set $\{\pi_\gamma(A):A\in\mathcal{A}\}$ has the FIP, which implies $\bigcap_{A\in\mathcal{A}}\overline{\pi_\gamma(A)}\not=\emptyset$ since $X_\gamma$ is compact. Pick $x_\gamma$ in the set and let $x=(x_\gamma)_{\gamma\in\Gamma}$. Let $V$ be a neighborhood of $x$, then there exists $n\in\N$, $\gamma_1,\cdots,\gamma_n\in\Gamma$, and open sets $U_j$ in $X_{\gamma_j}$ such that $x\in\bigcap_{j=1}^n\pi^{-1}_{\gamma_j}(U_j)\subseteq V$. Then $U_j\cap\pi_{\gamma_j}(A)\not=\emptyset$ for all $A\in\mathcal{A}$ by the choice of $x$. Hence $\pi_{\gamma_j}^{-1}(U_j)\cap A\not=\emptyset$ for all $A\in\mathcal{A}$.

	We note the following two properties of $\mathcal{A}$:
	\begin{enumerate}
		\item $\mathcal{A}$ is closed under finite intersections: If $A,\ B\in\mathcal{A}$, then $A\cap B\cap C_1\cap\cdots\cap C_n\not=\emptyset$ for any $C_1,\cdots,C_n\in\mathcal{A}$. Therefore, $A\cap B\in\mathcal{A}$ by the maximality of $\mathcal{A}$.
		\item If $A\subseteq X$ satisfies $A\cap B\not=\emptyset$ for all $B\in\mathcal{A}$, then $B\in\mathcal{A}$: given $B_1,\cdots,B_n\in\mathcal{A}$, their intersection is in $\mathcal{A}$ by (1), so $B\cap B_1\cap\cdots\cap B_n\not=\emptyset$.
	\end{enumerate}
	By (2), we can deduce that $\pi^{-1}_{\gamma_j}(U_j)\in\mathcal{A}$ for all $j$. By (1), $\bigcap_{j=1}^n\pi^{-1}_{\gamma_j}(U_j)\in\mathcal{A}$. Hence, $V\cap A\not=\emptyset$ for all $A\in\mathcal{A}$. Since $V$ is an arbitrary neighbourhood of $X$, we have $x\in\overline{A}$ for all $A\in\mathcal{A}$. Hence $\bigcap_{F\in\F}F\subseteq\bigcap_{A\in\mathcal{A}}\overline{A} \not=\emptyset$.
\end{proof}

Let $E$ be a real or complex vector space, and $F$ a subspace of the space of all linear functionals on $E$ such that $F$ separates the points of $E$. In this case, the latter condition is equivalent to for all $x\in E\backslash\{0\}$, there exists $f\in F$ such that $f(x)\not= 0$. This yields the weak topology $\sigma(E,F)$ on $E$. The topology makes $E$ into a locally convex space with seminorms $x\mapsto\abs{f(x)}$ for $f\in F$. Therefore, $E$ is Hausdorff, and the algebraic operations are continuous.

\begin{nlemma}\label{lem:LinearAlgebra}
  Let $E$ be as above. Let $f,g_1,\cdots,g_n$ be linear functionals on $E$ such that $\ker f\supseteq\bigcap_{i=1}^n\ker g_i$, then $f\in\spn\{g_1,\cdots, g_n\}$.
\end{nlemma}

\begin{proof}
  WLOG the scalar field is $\R$. Define $T:E\to\R^n$ by $Tx=(g_i(x))_{i=1}^n$, then $\ker f\supseteq\ker T$, so there exists a unique $\tilde{f}:\Im T\to\R$ such that $f=\tilde{f}\circ T$. This can be extended to $\tilde{f}:\R^n\to\R$. There exists $a_1,\cdots,a_n\in\R$ such that $\tilde{f}((y_i)_{i=1}^n)=\sum_{i=1}^n a_iy_i$, then $f(x)=\sum_{i=1}^n a_i g_i(x)$ for all $x\in E$.
\end{proof}

\begin{nprop}\label{prop:WeakContinuousFunctional}
  Let $E,F$ be as above, and $f$ a linear functional on $E$, then $f$ is continuous with respect to $\sigma(E,F)$ if and only if $f\in F$.
\end{nprop}

\begin{proof}
  Clearly any $f\in F$ is $\sigma(E,F)$-continuous. Conversely, by lemma~\ref{lem:LCSCts}, there exists $n\in\N$, $g_1,\cdots,g_n\in F$, and $C\geq 0$ such that $\abs{f(x)}\leq C\max_i\abs{g_i(x)}$. In particular, $\ker f\supseteq\bigcap_{i=1}^n\ker g_i$, so $f\in\spn\{g_1,\cdots,g_n\}\subseteq F$.
\end{proof}

\begin{eg}
Let $X$ be a normed space.
	\begin{enumerate}[label=(\arabic*)]
		\item $E=X,\ F=X^*$: the topology $\sigma(X,X^*)$ is called the \term{weak topology} on $X$, also written as w-topology\index{w-topology}.
		\item $E=X^*,\ F=X$ (embedded in $X^{**}$): The topology $\sigma(X^*,X)$ is the \term{weak-star topology} on $X$, also written as w*-topology\index{w*-topology}.
	\end{enumerate}
\end{eg}

\begin{nprop}\label{prop:WeakTopologyFunctional}
	\begin{enumerate}[label=(\roman*)]
		\item $(X,w)^*=X^*$, ie. a linear functional $f$ on $X$ is weakly continuous if and only if it is norm-continuous.
		\item $(X^*,w^*)^*=X$
		\item $\sigma(X^*,X^{**})=\sigma(X^*,X)$ if and only if $X$ is reflexive.
	\end{enumerate}
\end{nprop}

\begin{proof}
  Follows immediately from proposition~\ref{prop:WeakContinuousFunctional}.
\end{proof}

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item The w- and w*-topologies are locally convex, so they are Hausdorff, and the algebraic operations are continuous.
		\item $\sigma(X,X^*)\subseteq$ norm topology, with equality if and only if $\dim X<\infty$.
		\item $\sigma(X^{**},X^*)|_X=\sigma(X,X^*)$, so $x\mapsto\hat{x}:X\to X^{**}$ is a weak-to-w* homeomorphism between $X$ and $\widehat{X}$.
		\item If $Y\subseteq X$, then $\sigma(X,X^*)|_Y=\sigma(Y,Y^*)$ by the Hahn-Banach theorem.
	\end{enumerate}
\end{remark}

We use the notation $x_n\wto x$ to denote $x_n\to x$ in the weak topology, and $f_n\wsto f$ to denote $f_n\to f$ in the w*-topology. It is easy to prove that $x_n\wto x$ if and only if $\bra x_n,f\ket\to\bra x,f\ket$ for all $f\in X^*$, and $f_n\wsto f$ if and only if $\bra x,f_n\ket\to\bra x,f\ket$ for all $x\in X$.

A subset $A\subseteq X$ is \term{weakly bounded} if $\{\bra a,f\ket:a\in A\}$ is bounded for all $f\in X^*$. Similarly, $B\subseteq X^*$ is \term{weak-star bounded} if $\{\bra x,f\ket:f\in B\}$ is bounded for all $x\in X$.

Recall the \emph{Principle of Uniform Boundedness}\index{principle of uniform boundedness}: Let $X$ be a Banach space, and $Y$ a normed space. If $\mathcal{T}\subseteq\B(X,Y)$ is a family of operators which is pointwise bounded, ie. $\sup_{T\in\mathcal{T}}\norm{Tx}<\infty$, then it is uniformly bounded, ie. $\sup_{T\in\mathcal{T}}\norm{T}<\infty$. In particular, if $(T_n)$ is a sequence in $\B(X,Y)$ converging pointwise to some map $T:X\to Y$, then $T\in\B(X,Y)$, and $\norm{T}\leq\liminf\norm{T_n}$.

\begin{nprop}\label{prop:WeaklyBounded}
	Let $X$ be a normed space, then
	\begin{enumerate}[label=(\roman*)]
		\item If $A\subseteq X$ is weakly bounded, then $A$ is (norm) bounded.
		\item If $X$ is complete, and $B\subseteq X^*$ is w*-bounded, then $B$ is bounded.
	\end{enumerate}
\end{nprop}

\begin{proof}
	(i) The set $A$ is weakly bounded, so $\widehat{A}=\{\hat{x}:x\in X\}\subseteq X^{**}$ is pointwise bounded. The principle of uniform boundedness implies it is uniformly bounded.

	(ii) $B$ is w*-bounded implies $B$ is pointwise bounded, which then implies $B$ is bounded by the principle of uniform boundedness.
\end{proof}

\begin{nprop}\label{prop:WeakConvergence}
	Let $X$ be a normed space, then
	\begin{enumerate}[label=(\roman*)]
		\item If $x_n\wto x$, then $\sup_n\norm{x_n}<\infty$, and $\norm{x}\leq\liminf_n\norm{x_n}$.
		\item If $X$ is complete and $f_n\wsto f$, then $\sup_n\norm{f_n}<\infty$ and $\norm{f}\leq\liminf_n\norm{f_n}$.
	\end{enumerate}
\end{nprop}

\begin{proof}
  Similar to the proof of proposition~\ref{prop:WeaklyBounded}.
\end{proof}

\subsubsection*{Hahn-Banach separation theorem}
Let $(X,\mathcal{P})$ be a locally convex space. Let $C$ be a convex subset of $X$ such that $0\in\Int C$. Define $\mu_C:X\to\R$ by $\mu_C(x)=\inf\{t>0:x\in tC\}$. Note that for $x\in X$, $0\cdot x\in\Int C$, so there exists $\delta>0$ such that $\delta x\in C$. In particular, $\mu_C(x)$ is well-defined. It is called the \term{Minkowski functional} or the \term{gauge functional} of $C$.

\begin{eg}
  If $X$ is a normed space, and $C=B_X$, then $\mu_C(x)=\norm{x}$.
\end{eg}

\begin{nlemma}\label{lem:MinkowskiFunctional}
	The functional $\mu_C$ is positive homogeneous and subadditive, and
	\[
	 \{x\in X:\mu_C(x)<1\}\subseteq C\subseteq\{x\in X:\mu_C(x)\leq 1\}
	\]
	Furthermore, the first inclusion is an equality if $C$ is open, and the second inclusion is an equality if $C$ is closed.
\end{nlemma}

\begin{proof}
	For $s,t>0$ and $x\in X$, we have $tx\in stC$ if and only if $x\in sC$, so $\mu_C(tx)=t\mu_C(x)$. This also holds for $t=0$, so $\mu_C$ is positive homogeneous. For each $x\in X$ and $s>\mu_C$, we have $x\in sC$. Indeed, there exists $s'>0$ such that $\mu_C(x)\leq s'<s$ and $x\in s'C$, so
	\[
	 x=s\cdot\frac{x}{s}=s\bigg(\frac{s'}{s}\cdot\frac{x}{s'}+\Big(1-\frac{s'}{s}\Big)\cdot 0\bigg)\in sC
	\]
	Suppose $x,y\in X$. Let $s>\mu_C(x)$, $t>\mu_C(y)$, then
	\[
	 x+y=(s+t)\bigg(\frac{x}{s+t}+\frac{y}{s+t}\bigg)=(s+t)\bigg(\frac{s}{s+t}\cdot\frac{x}{s}+\frac{t}{s+t}\cdot\frac{y}{t}\bigg)\in (s+t)C
	\]
	So $\mu_C(x+y)\leq s+t$. Hence $\mu_C(x+y)\leq\mu_C(x)+\mu_C(y)$.

	If $\mu_C(x)<1$, then $x\in C$ by above. By definition, if $x\in C$, then $\mu_C(x)\leq 1$. If $C$ is open and $x\in C$, then $1\cdot x\in C$, so there exists a $\delta>0$ such that $(1+\delta)x\in C$. Thus $x\in\frac{1}{1+\delta}C$, and so $\mu_C(x)<1$. If $C$ is closed and $\mu_C(x)\leq 1$, then $(1-\frac{1}{n})x\to x$, and $\mu_C\big((1-\frac{1}{n})x\big)=(1-\frac{1}{n})\mu_C(x)<1$, so $(1-\frac{1}{n})x\in C$ for all $n$. This implies $x\in C$.
\end{proof}

\begin{remark}
  In the real/complex case, if $C$ is \term{symmetric}/\term{balanced}, then $\mu_C$ is a seminorm.
\end{remark}

\begin{nthm}[Hahn-Banach Separation Theorem]\label{thm:HBSep1}\index{Hahn-Banach separation theorem}
	Let $(X,\mathcal{P})$ be a locally convex space, and let $C\subseteq X$ be an open convex set with $0\in C$. Let $x_0\in X\backslash C$, then there exists $f\in X^*$ such that
	\begin{quote}
  	Real case: $f(x)<f(x_0)$ for all $x\in C$.\\
	 Complex case: $\Re f(x)<\Re f(x_0)$ for all $x\in C$.
	\end{quote}
\end{nthm}

\begin{proof}
	First consider the real case. Let $Y=\spn\{x_0\}$. Define $g:Y\to\R$ by $g(\lambda x_0)=\lambda$. For $\lambda\geq 0$, $g(\lambda x_0)=\lambda\leq\lambda\mu_C(x_0)=\mu_C(\lambda x_0)$. For $\lambda<0$, $g(\lambda x_0)=\lambda<0\leq\mu_C(\lambda x_0)$. By theorem~\ref{thm:HahnBanach1}, there exists linear $f:X\to\R$ such that $f|_Y=g$ and $f(x)\leq\mu_C(x)$ for all $x\in X$. For $\varepsilon>0$, let $U=\varepsilon C\cap(-\varepsilon) C$. Then $U$ is an open neighborhood of 0. For $x\in U$, $f(x)\leq\mu_C(x)\leq\varepsilon$, and $f(-x)\leq\mu_C(-x)\leq\varepsilon$, so $\abs{f(x)}\leq\varepsilon$. This implies that $f$ is continuous at 0, and hence everywhere by lemma~\ref{lem:LCSCts}. Also, for $x\in C$, $f(x)\leq\mu_C(x)<1=f(x_0)$.

	In the complex case, find $g\in(X_\R)^*$ as above such that $g(x)<g(x_0)$ for all $x\in C$. Let $f(x)=g(x)-ig(ix)$, then $f\in X^*$, and $\Re f=g$.
\end{proof}

\begin{remark}
  Until the end of this section, we will restrict to the case where the scalar field is real.
\end{remark}

\begin{nthm}\label{thm:HBSep2}
	Let $(X,\mathcal{P})$ be a locally convex space. Let $A,B$ be non-empty disjoint convex subsets of $X$.
	\begin{enumerate}[label=(\roman*)]
		\item If $A$ is open, then there exists $f\in X^*$ and $\alpha\in\R$ such that $f(a)<\alpha\leq f(b)$ for all $a\in A,\ b\in B$.
		\item If $A$ is compact and $B$ is closed, then there exists $f\in X^*$ such that $\sup_A f<\sup_B f$.
	\end{enumerate}
\end{nthm}

\begin{proof}
  (i) Fix $a_0\in A$ and $b_0\in B$. Let $C=A-B+b_0-a_0$, and let $x_0=b_0-a_0$, then $C$ is an open convex set containing 0, and $x_0\notin C$. By theorem~\ref{thm:HBSep1}, there exists $f\in X^*$ such that $f(x)<f(x_0)$ for all $x\in C$. This rearranges to $f(a)<f(b)$ for all $a\in A$, $b\in B$. Let $\alpha=\inf_B f$. Note that $f\not= 0$, so we can choose $z\in X$ such that $f(z)=1$. For all $a\in A$, there exists $\delta>0$ such that $a+\delta z\in A$, so $f(a)<f(a)+\delta=f(a+\delta z)\leq\alpha\leq f(b)$.

  (ii) For all $a\in A$, there exists an open neighborhood $U_a$ of 0 such that $(a+U_a)\cap B=\emptyset$. Since $0+0=0\in U_a$, there exists an open convex neighborhood $V_a$ of 0 such that $V_a+V_a\subseteq U_a$. Then $\{a+V_a:a\in A\}$ is an open cover for $A$, so there exists $a_1,\cdots,a_n\in A$ such that $\bigcup_{i=1}^n(a_i+V_{a_i})\supseteq A$. Let $V=\bigcap_{i=1}^n V_{a_i}$, then $(A+V)\cap B=\emptyset$. In addition, $A+V$ is open and convex, so by part (i), there exists $f\in X^*$ and $\alpha\in\R$ such that $f(a)<\alpha\leq f(b)$ for all $a\in A$, $b\in B$. Since $A$ is compact, $\sup_A f$ is attained at some $a\in A$, so $\sup_A f=f(a)<\alpha\leq\inf_B f$.
\end{proof}

\begin{nthm}[Mazur's Theorem]\label{thm:MazurWeakClosure}\index{Mazur's theorem}
  Let $X$ be a normed space, and $C$ a convex subset of $X$, then $C$ is weakly closed if and only if $C$ is (norm-)closed. In particular, $\overline{C}^\mathrm{w}=\overline{C}$.
\end{nthm}

\begin{proof}
  The forward direction is clear. Conversely, fix $x_0\in X\backslash C$. Apply theorem~\ref{thm:HBSep2} with $A=\{x_0\}$ and $B=C$ to get $f\in X^*$ such that $f(x_0)<\inf_C f$. Fix $\alpha\in\R$ such that $f(x_0)<\alpha<\inf_C f$, then $\{y\in X:f(y)<\alpha\}$ is a weakly open neighborhood of $x_0$ disjoint from $C$, so $X\backslash C$ is weakly open.
\end{proof}

\begin{ncor}\label{cor:MazurWeaklyNull}
  Suppose $x_n\wto 0$ in a normed space $X$, then for all $\varepsilon>0$, there exists $x\in\conv\{x_n:n\in\N\}$ such that $\norm{x}<\varepsilon$. Here, $\conv A$ is the convex hull\index{convex hull}\index{conv} of $A$, ie. the intersection of all convex sets containing $A$.
\end{ncor}

\begin{proof}
  Let $C=\overline{\conv\{x_n:n\in\N\}}$, then $C$ is closed. By theorem~\ref{thm:MazurWeakClosure}, $C$ is weakly closed, and hence $0\in C$.
\end{proof}

\begin{remark}
  Applying this to the tail of a sequence, there exists $p_1<q_1<p_2<q_2<\cdots$ in $\N$ and $t_i\in(0,1)$, $i\in\N$ such that $\sum_{i=p_n}^{q_n}t_i=1$, and $\big\|\sum_{i=p_n}^{q_n}t_ix_i\big\|<\frac{1}{n}$. It is not in generally true that any weakly null sequence $x_n$ has a subsequence $y_n$ such that $\frac{1}{n}\sum_{i=1}^n y_i\to 0$ (cf. Schreier space\index{Schreier space}).
\end{remark}

\begin{nthm}[Banach-Alaoglu Theorem]\label{thm:BanachAlaoglu}\index{Banach-Alaoglu theorem}
  For any normed space $X$, $B_{X^*}$ is w*-compact.
\end{nthm}
\begin{proof}
  For $x\in X$, let $K_x=\{\lambda\text{ scalar}:\abs{\lambda}\leq\norm{x}\}$, then $K_x$ is compact, so $K=\prod_{x\in K}K_x$ is compact. The dual unit ball $B_{X^*}$ with the w*-topology is the subspace of $K$ of all linear maps, so it is enough to show that $B_{X^*}$ is closed. However,
  \[
    B_{X^*}=\bigcap_{\substack{x,y\in X\\ \lambda,\mu\text{ scalars}}}\{f\in K:f(\lambda x+\mu y)-(\lambda f(x)+\mu f(y))=0\}
  \]
which is an intersection of closed sets.
\end{proof}

\begin{nprop}\label{prop:DualBallMetrizable}
	 Let $X$ be a normed space, and $K$ a compact Hausdorff space, then
	\begin{enumerate}[label=(\roman*)]
		\item $X$ is separable if and only if $B_{X^*}$ with the w*-topology is metrizable.
		\item $C(K)$ is separable if and only if $K$ is metrizable.
	\end{enumerate}
\end{nprop}

\begin{proof}
  (i) $\Longrightarrow$: Let $\{x_n:n\in\N\}$ be dense in $X$. Let $f_n:B_{X^*}\to\mathrm{scalars}$, $f_n(\phi)=\phi(x_n)$. Since $\{x_n:n\in\N\}$ is dense, the family $\F=\{f_n:n\in\N\}$ separates the points of $B_{X^*}$. By proposition~\ref{prop:WeakMetrizable}, $\sigma=\sigma(B_{X^*},\F)$ is metrizable. Now $\Id:(B_{X^*},\mathrm{w^*})\to(B_{X^*},\sigma)$ is a continuous bijection from a compact space (by Banach-Alaoglu theorem) to a Hausdorff space, so it is a homeomorphism.

  (ii) $\Longrightarrow$: Let $X=C(K)$. By above, $B_{X^*}$ with the w*-topology is metrizable. Define $\delta:K\to (B_{X^*},\mathrm{w^*})$, $\delta_x(f)=f(x)$. Then for all $f\in C(K)$, the composite $\hat{f}\delta:K\to\mathrm{scalars}$ is equal to $f$, so it is continuous. By the universal property of weak topology, $\delta$ is continuous. By Urysohn's lemma, for all $x\not= y$ in $K$, there exists $f\in C(K)$ such that $f(x)\not= f(y)$, so $\delta_x\not=\delta_y$, which implies that $\delta$ is injective. Therefore, $\delta$ is a continuous bijection from $K$ to $\delta(K)$, so $K$ is homeomorphic to a subset of a metrizable space.

  (ii) $\Longleftarrow$: $K$ is metrizable, so it is separable. Let $d$ be a metric on $K$ inducing its topology, and let $\{x_n:n\in\N\}$ be a countable dense subset of $K$. Let $f_0(x)=1$, and for $n\in\N$, let $f_n(x)=d(x,x_n)$. Let $A$ be the subalgebra of $C(K)$ generated by $\{f_n\}$, then
	\[
	 A=\spn\left\{\prod_{k\in I}f_k:I\text{ finite subset of }\Z_{\geq 0}\right\}
	\]
	which is separable since it is spanned by a countable set. Since $\{x_n:n\in\N\}$ is dense, the family $\{f_n\}$ separates the points of $K$. In the complex case, $A$ is also closed under conjugation since all $f$ are real. By the Stone-Weierstrass theorem, $\overline{A}=C(K)$, so $C(K)$ is separable.

  (i) $\Longleftarrow$: Suppose $B_{X^*}$ in the w*-topology is metrizable. Let $K=(B_{X^*},\mathrm{w^*})$, then $K$ is a compact Hausdorff space. Define $T:X\to C(K)$ by $Tx=\hat{x}|_{B_{X^*}}$. Then $T$ is linear, and it is isometric since
  \[
    \norm{Tx}_\infty=\sup_{f\in K}\abs{\hat{x}(f)}=\sup_{f\in B_{X^*}}\abs{f(x)}=\norm{x}
  \]
  by the Hahn-Banach theorem. By (ii), $C(K)$ is separable, and hence $X$ is separable.
\end{proof}

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item If $X$ is separable, then $X^*$ is w*-separable since $X^*=\bigcup_n nB_{X^*}$. The converse is false: we will see later that $l_{\infty}^*$ is w*-separable.
		\item $X$ is w-separable if and only if $X$ is separable by Mazur's theorem.
	\end{enumerate}
\end{remark}

\begin{nprop}\label{prop:BallWeakMetrizable}
  $B_X$ is weakly metrizable if and only if $X^*$ is separable.
\end{nprop}

\begin{proof}
	$\Longleftarrow$: $(B_X,\mathrm{w})$ is a subspace of $(B_{X^{**}},\mathrm{w^*})$ under the canonical embedding, and by proposition~\ref{prop:DualBallMetrizable}, $B_{X^{**}}$ is w*-metrizable.

	$\Longrightarrow$: Let $d$ be a metric on $B_X$ which yields the weak topology of $B_X$. For each $n\in\N$, there exists a finite set $F_n\subseteq X^*$ and $\varepsilon_n>0$ such that
	\[
	 V_n=\{x\in B_X:\abs{f(x)}<\varepsilon_n\text{ for all }f\in F_n\}\subseteq B_{\frac{1}{n}}(0)
	\]
	Let $f\in X^*$ and $\varepsilon>0$, then there exists $n\in\N$ such that $\{x\in B_X:\abs{f(x)}<\varepsilon\}\supseteq B_{1/n}(0)\supseteq V_n$. Let $Y=\bigcap_{g\in F_n}\ker g$. If $x\in B_Y$, then $x\in V_n$, so $\abs{f(x)}<\varepsilon$. Hence $\norm{f|_Y}\leq\varepsilon$. By the Hahn-Banach extension theorem, there exists $h\in X^*$ such that $h|_Y=f|_Y$ and $\norm{h}=\norm{f|_Y}\leq\varepsilon$. Now $(f-h)|_Y=0$, so by lemma~\ref{lem:LinearAlgebra}, $f-h\in\spn F_n$. Therefore, $\bigcup_{n\in\N}F_n$ is dense in $X^*$.
\end{proof}

\begin{nthm}[Goldstine's Theorem]\label{thm:Goldstine}\index{Goldstine's theorem}
  Let $X$ be a normed space viewed as a subspace of $X^{**}$ via the canonical embedding, then $\overline{B_X}^{\mathrm{w^*}}=B_{X^{**}}$.
\end{nthm}

\begin{proof}
  $B_{X^{**}}$ is w*-compact, and hence w*-closed in $X^{**}$. It also contains $B_X$, so it contains the w*-closure of $B_X$. Suppose there exists $\phi\in B_{X^{**}}\backslash\overline{B_X}^{\mathrm{w^*}}$, then apply theorem~\ref{thm:HBSep2} to the locally convex space $(X^{**},\mathrm{w^*})$ with $A=\{\phi\}$ and $B=\overline{B_X}^{\mathrm{w^*}}$ to get $f\in(X^{**},\mathrm{w^*})^*=X^*$ such that $\phi(f)>\sup_{B_X} f=\norm{f}$. However, $\phi(f)\leq\norm{f}$. This is a contradiction.
\end{proof}

\begin{remark}
  It follows that if $X$ is separable, then $X^{**}$ is w*-separable. In particular, $l_\infty^*$ is w*-separable by taking $X=l_1$.
\end{remark}

\begin{nthm}\label{thm:Reflexive}
	Let $X$ be a Banach space, then the following are equivalent:
	\begin{enumerate}[label=(\roman*)]
		\item $X$ is reflexive.
		\item $B_X$ is weakly compact.
		\item $X^*$ is reflexive.
	\end{enumerate}
\end{nthm}
\begin{proof}
  (i) $\implies$ (ii): We have $X=X^{**}$ by reflexivity, so $\sigma(X,X^*)=\sigma(X^{**},X^*)$, which implies $(B_X,\mathrm{w})=(B_{X^{**}},\mathrm{w^*})$. By theorem~\ref{thm:BanachAlaoglu}, this is compact.

  (ii) $\implies$ (i): Under the canonical embedding of $X$ into $X^{**}$, the w*-topology on $X^{**}$ restricts to the weak topology on $X$, so $B_X$ is a w*-compact subset of $X^{**}$, and hence w*-closed in $X^{**}$. By theorem~\ref{thm:Goldstine}, $B_{X^{**}}=B_X$, so $X=X^{**}$.

  (i) $\implies$ (iii): Since $X=X^{**}$, we have $\sigma(X^*,X)=\sigma(X^*,X^{**})$, so the weak and w*-topology on $B_{X^*}$ coincide. By theorem~\ref{thm:BanachAlaoglu}, the $B_{X^*}$ is w*-compact, so by (ii) $\implies$ (i), $X^*$ is reflexive.

  (iii) $\implies$ (ii): If $X^*$ is reflexive, then the weak and w*-topology on $X^{**}$ are the same, so $B_{X^{**}}$ is weakly compact. Since $X$ is complete, it is norm-closed in $X^{**}$, and hence weakly closed by theorem~\ref{thm:MazurWeakClosure}. Therefore, $B_X=X\cap B_{X^{**}}$ is weakly closed in $B_{X^{**}}$, and hence weakly compact.
\end{proof}

\begin{nlemma}\label{lem:CantorSetInitial}
  If $K$ is a non-empty compact metric space, then there exists a continuous surjection $\phi:\Delta\to K$, where $\Delta=\{0,1\}^\N$.
\end{nlemma}

\begin{proof}
	Let $D=\bigcup_{n=0}^\infty\{0,1\}^n$, with the convention that $\{0,1\}^0=\{\emptyset\}$. For $\varepsilon\in\{0,1\}^n$, let $\abs{\varepsilon}=n$. We construct for each $\varepsilon\in D$ a non-empty closed set $A_\varepsilon$ in $K$ such that
	\begin{enumerate}[nosep]
		\item $A_\emptyset=K$.
		\item For all $\varepsilon\in D$, $A_\varepsilon=A_{\varepsilon, 0}\cup A_{\varepsilon, 1}$ (here $\varepsilon,0$ is the concatenation of $\varepsilon$ and 0).
		\item $\max_{\abs{\varepsilon}=n}\limits\diam A_\varepsilon\to 0$ as $n\to\infty$.
	\end{enumerate}
	By compactness, there exists $n_1\in\N$ and non-empty closed sets $B_1,\cdots,B_{2^{n_1}}$ whose union is $K$ and $\diam B_i<\frac{1}{2}$ for all $i$. Let $(A_{\varepsilon}:\abs{\varepsilon}=n+1)$ be the sets $B_1,\cdots,B_{2^{n_1}}$ in some order. If $\abs{\varepsilon}<n_1$, then let $A_\varepsilon=\bigcup_{\abs{\delta}=n_1-\abs{\varepsilon}}A_{\varepsilon,\delta}$. Each $A_\varepsilon$ is still compact since it is closed, so there exists $n_2\in\N$ such that for all $\varepsilon\in\{0,1\}^{n_1}$, there exists non-empty closed sets $B_{\varepsilon,1},\cdots,B_{\varepsilon,2^{n_2}}$, each having diameter at most $\frac{1}{4}$, and such that their union if $A_\varepsilon$. Define $A_{\varepsilon,\delta}$ with $\abs{\delta}=n_2$ to be the sets $B_{\varepsilon,1},\cdots,B_{\varepsilon,2^{n_2}}$ in some order. We now similarly define $A_{\varepsilon}$ if $n_1<\abs{\varepsilon}<n_2$, and continue this process inductively.

	Define $\phi:\Delta\to K$ by sending $(\varepsilon_i)_{i=1}^\infty$ to the unique point in $\bigcap_n A_{\varepsilon_1\varepsilon_2\cdots\varepsilon_n}$. If $\varepsilon,\ \delta\in\Delta$ satisfy $\varepsilon_i=\delta_i$ for $i=1,\cdots,n$, then $\phi(\varepsilon),\phi(\delta)\in A_{\varepsilon_1\varepsilon_2\cdots\varepsilon_n}$. Hence $d(\phi(\varepsilon),\phi(\delta))\to 0$ as $n\to\infty$. This shows that $\phi$ is continuous. Given $x\in K$, we can inductively construct $\varepsilon_1,\varepsilon_2,\cdots$ such that $x\in A_{\varepsilon_1\cdots\varepsilon_n}$ for all $n$. Then $\phi((\varepsilon_n)_{n=1}^\infty)=x$, so $\phi$ is surjective.
\end{proof}

\begin{remark}
  Note that $\Delta$ is homeomorphic to the Cantor set in $[0,1]$, with a homeomorphism given by $(\varepsilon_n)_{n=1}^\infty \mapsto\sum_{n=1}^\infty (2\varepsilon_n)3^{-n}$.
\end{remark}

\begin{nthm}\label{thm:C[0,1]Initial}
  If $X$ is a separable Banach space, then $X$ embeds isometrically into $C[0,1]$ (with the supremum norm).
\end{nthm}

\begin{proof}
  Let $K=B_{X^*}$ with the w*-topology. By theorem~\ref{thm:BanachAlaoglu} and proposition~\ref{prop:DualBallMetrizable}, $K$ is a compact metric space. From the proof of proposition~\ref{prop:DualBallMetrizable}, the map $X\to C(K)$, $x\mapsto\hat{x}|_{B_{X^*}}$ is an isometric embedding into $C(K)$. By lemma~\ref{lem:CantorSetInitial}, there exists a continuous surjection $\phi:\Delta\to K$, then the map $C(K)\to C(\Delta)$, $f\mapsto f\circ\phi$ is an isometric embedding into $C(\Delta)$. Finally, treating $\Delta$ as the Cantor set, any $f\in C(\Delta)$ extends to $\bar{f}\in C[0,1]$ via linear interpolation. The map $f\mapsto\bar{f}$ is an isometric embedding $C(\Delta)\to C[0,1]$.
\end{proof}

\newpage

\section{Krein-Milman theorem}
Let $X$ be a real or complex vector space, and $K$ a convex subset of $X$. A point $x\in K$ is called an \term{extreme point} of $K$ if whenever $x=(1-t)y+tz$ for $y,z\in K$ and $t\in (0,1)$, it follows that $y=z=x$. The set of all extreme points of $K$ is denoted by $\Ext(K)$. \index{Ext}

\begin{eg}
  $\Ext(B_{l_1^2})=\{(\pm 1,0),(0,\pm 1)\}$. $\Ext(B_{l_2^2})=S_{l_2^2}$.
\end{eg}

\begin{nthm}[Krein-Milman Theorem]\label{thm:KreinMilman}\index{Krein-Milman theorem}
  Let $(X,\mathcal{P})$ be a locally convex space, and let $K$ be a compact convex subset of $X$, then $K=\overline{\conv}\Ext K$. In particular, if $K\not=\emptyset$, then $\Ext(K)\not=\emptyset$.
\end{nthm}

\begin{ncor}
  If $X$ is a normed space, then $B_{X^*}=\overline{\conv}^{\mathrm{w^*}}\Ext(B_{X^*})$.
\end{ncor}

\begin{eg}
  We can use this to show that $c_0$ is not a dual space by showing that $\Ext(B_{c_0})=\emptyset$. Given $x=(x_n)\in B_{c_0}$, there exists $N\in\N$ such that $\abs{x_N}<\frac{1}{2}$. Let $y_i=z_i=x_i$ if $i\not= N$, and $y_N=x_N+\frac{1}{2}$, $z_N=x_N-\frac{1}{2}$. Then $y=(y_i)$ and $z=(z_i)$ are both in $B_{c_0}$, $y\not= x$, $z\not= x$, and $x=\frac{1}{2}(y+z)$. Therefore, $x$ is not an extreme point.
\end{eg}

Let $(X<\mathcal{P})$ be a locally convex space, and $K\subseteq X$ a non-empty compact convex subset. A \term{face} of $K$ is a non-empty compact convex subset $F$ of $K$ such that for all $y,z\in K$ and $t\in(0,1)$, $(1-t)y+tz\in F$ implies $y,z\in F$.

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item For $x\in K$, $x$ is an extreme point if and only if $\{x\}$ is a face.
		\item If $f\in X^*$ and $\alpha=\sup_K f$, then $F=\{x\in K:f(x)=\alpha\}$ is a face.
		\item If $F$ is a face of $K$, and $E$ is a face of $F$, then $E$ is a face of $K$.
	\end{enumerate}
\end{eg}

\begin{proof}[Proof of Theorem~\ref{thm:KreinMilman}]
  Let $E$ be the minimal face of $K$ with respect to inclusion, which exists by Zorn's lemma. Assume that there exists $x,y\in E$ with $x\not= y$. By the Hahn-Banach theorem, there exists $f\in X^*$ such that $f(x)<f(y)$. Let $\alpha=\sup_E f$, then $E'=\{z\in E:f(z)=\alpha\}$ is a face of $E$, and $f(x)<f(y)\leq\alpha$, so $E'\subsetneq E$, which contradicts the minimality of $E$. Therefore, $E=\{x\}$ for some $x\in\Ext(K)$.

  Note that $\Ext(K)\subseteq K$, and $K$ is convex compact, so $\overline{\conv}\Ext(K)\subseteq K$. Suppose $x\in K\backslash\overline{\conv}\Ext(K)$. By theorem~\ref{thm:HBSep2}(ii), there exists $f\in X^*$ such that $f(x)>\sup_{\overline{\conv}\Ext(K)} f$. Let $\alpha=\sup_K f$, then $F=\{z\in K:f(z)=\alpha\}$ is a face of $K$, so by above with $K$ replaced by $F$, it contains an extreme point $y\in F\cap\Ext(K)$. But $f(y)=\alpha\geq f(x)>f(z)$ for all $z\in\Ext(K)$. This is a contradiction.
\end{proof}

\begin{nlemma}\label{lem:PreChoquet}
  Let $(X,\mathcal{P})$ be a locally convex space, $K\subseteq X$ compact, and $x_0\in K$, then for all neighborhood $V$ of $x_0$, there exists $n\in\N$, $f_1,\cdots,f_n\in X^*$, and $\alpha_1,\cdots,\alpha_n\in\R$ such that
\[x_0\in\{x\in X:\forall i\ f_i(x)<\alpha_i\}\cap K\subseteq V\]
\end{nlemma}

\begin{proof}
  WLOG $V$ is open. By the Hahn-Banach theorem, for all $y\in K\backslash V$, there exists $g_y\in X^*$ such that $g_y(x_0)<g_y(y)$. Fix $\alpha_y\in\R$ strictly between them. Let $U_y=\{z\in X:\alpha_y<g_y(z)\}$. Then $U_y$ is an neighborhood of $y$. The set $K\backslash V$ is compact, so there exists $y_1,\cdots,y_n\in K\backslash V$ such that $\bigcup_{i=1}^n U_{y_i}\supseteq K\backslash V$. Set $f_i=g_{y_i}$ and $\alpha_i=\alpha_{y_i}$ for all $i$, then $x_0\in\{z\in X:\forall i\ f_i(z)<\alpha_i\}\cap K\subseteq V$.
\end{proof}

\begin{nlemma}[Choquet's lemma]\label{lem:Choquet}\index{Choquet's lemma}
  Let $(X,\mathcal{P})$ be a locally convex space, $K\subseteq X$ compact convex, and $x_0\in\Ext(K)$, then the slices of $K$ at $x_0$ form a neighborhood basis of $x_0$ in $K$, where a \term{slice} of $K$ at $x_0$ is a set of the form $\{x\in K:f(x)<\alpha\}\cap K$ containing $x_0$, with $f\in X^*$ and $\alpha\in\R$.
\end{nlemma}

\begin{proof}
  Let $V$ be a neighborhood of $x_0$. By lemma~\ref{lem:PreChoquet}, WLOG there exists $f_1,\cdots,f_n\in X^*$ and $\alpha_1,\cdots,\alpha_n\in\R$ such that $V=\{z\in X:f_i(z)<\alpha_i\text{ for }i=1,\cdots,n\}$. Let $K_i=\{x\in X:f_i(x)>\alpha_i\}\cap K$, which is closed in $K$, and hence compact. Let $L=\conv\big(\bigcup_{i=1}^n K_i\big)$, and $S=\{(t_i)_{i=1}^n\in\R^n:t_i\geq 0\text{ for all }i,\ \sum_{i=1}^n t_i=1\}$. Then it is easy to check that $L$ is the image of the continuous map $S\times K_1\times\cdots\times K_n\to X$, $((t_i)_{i=1}^n,x_1,\cdots,x_n)\mapsto\sum_{i=1}^n t_ix_i$. Therefore, $L$ is compact, and hence closed in $K$. Since $x_0$ is an extreme point, $x_0\notin L$. Finally, by theorem~\ref{thm:HBSep2}(ii), there exists $f\in X^*$ such that $f(x_0)<\inf_L f$. Fix $\alpha\in\R$ strictly between them, then $x_0\in\{x\in X:f(x)<\alpha\}\cap K\subseteq V$.
\end{proof}

\begin{nthm}\label{thm:KMConverse}
Let $(X,\mathcal{P})$ be a locally convex space, $K\subseteq X$ compact convex. Suppose that for some $S\subseteq K$, we have $K=\overline{\conv}(S)$, then $\overline{S}\supseteq\Ext(K)$.
\end{nthm}

\begin{proof}
  Assume not, then there exists $x_0\in\Ext(K)\backslash\overline{S}$. Then $K\backslash\overline{S}$ is an open neighborhood of $x_0$ in $K$. By lemma~\ref{lem:Choquet}, there exists $f\in X^*$ and $\alpha\in\R$ such that $x_0\in\{x\in X:f(x)<\alpha\}\cap K\subseteq K\backslash\overline{S}$, so $S\subseteq\{x\in K:f(x)\geq\alpha\}$. This is a closed convex subset of $K$, so it contains $\overline{\conv} S=K$, which is a contradiction since it does not contain $x_0$.
\end{proof}

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item The conditions do not imply $S\supseteq\Ext(K)$, eg. for $K=B_{l_2^2}$, $\Ext(K)=S_{l_2^2}$, and we may take $S$ to be any dense subset of $\Ext(K)$.
		\item In general, $\Ext(K)$ is not closed. In $\R^3$, let
		\[S=\{(x,0):x\in B_{l_2^2}\}\cup\{(-1,0,\pm 1)\}\]
		then $K=\conv S$ has $\Ext(K)=S\backslash\{(-1,0,0)\}$.
	\end{enumerate}
\end{remark}

\begin{eg}
For $K$ is compact Hausdorff, $\Ext B_{C(K)^*}=\{\lambda\delta_k:\abs{\lambda}=1,\ k\in K\}$.
\end{eg}

\begin{nthm}[Banach-Stone Theorem]\label{thm:BanachStone}\index{Banach-Stone theorem}
  Let $K,\ L$ be compact Hausdorff spaces, then $C(K)\cong C(L)$ if and only if $K$ and $L$ are homeomorphic.
\end{nthm}

\begin{proof}
	$\Longleftarrow$: If $\phi:K\to L$ is a homeomorphism, then $\phi^*:C(L)\to C(K)$, $f\mapsto f\circ\phi$ is an isometric isomorphism.

	$\Longrightarrow$: Suppose $T:C(K)\to C(L)$ is an isometric isomorphism, then $T^*:C(L)^*\to C(K)^*$ is also an isometric isomorphism. Therefore, $T^*(\Ext B_{C(L)^*})=\Ext B_{C(K)^*}$. By the example, for each $l\in L$, there exists a scalar $\lambda(l)$ with $\abs{\lambda}=1$ and $\phi(l)\in K$ such that $T^*(\delta_l)=\lambda(l)\delta_{\phi(l)}$. Note that
	\[
	 \lambda(l)=(\lambda(l)\delta_{\phi(l)}(1_K)=T^*(\delta_l)(1_K)=\delta_l(T1_K)=(T1_K)(l)
	\]
	so $\lambda=T1_K\in C(L)$. Also $T^*$ is w*-to-w*-continuous since for all $f\in C(K)$, we have $\hat{f}\circ T^*=T^{**}(\hat{f})=\widehat{Tf}$, which is w*-continuous on $C(L)^*$. Recall from the proof of proposition~\ref{prop:DualBallMetrizable} that $l\mapsto\delta_l:L\to (C(L)^*,\mathrm{w^*})$ is a homeomorphism onto its image. Therefore, $l\mapsto\overline{\lambda(l)}T^*(\delta_l)=\delta_{\phi(l)}:L\to (C(K)^*,\mathrm{w^*})$ is continuous. Hence, $\phi:L\to K$ is continuous. It remains to check that $\phi$ is bijective. If $l\not= l'$ in $L$, then $\overline{\lambda(l)}\delta_l\not=\overline{\lambda(l')}\delta_{l'}$, so $\delta_{\phi(l)}\not=\delta_{\phi(l')}$ since $T$ is injective. Therefore, $\phi(l)\not=\phi(l')$. Let $k\in K$, then there exists $\mu$ with $\abs{\mu}=1$ an d$l\in L$ such that $\delta_K=T^*(\mu\delta_l)=\mu\lambda(l)\delta_{\phi(l)}$, so we have $\phi(l)=k$.
\end{proof}

\newpage

\section{Banach algebras}

{\bf Convention}: For the rest of this course, the scalar field is $\C$.
\vspace{1ex}

\noindent Let $A$ be a complex algebra (not necessarily commutative or unital). An \term{algebra norm} on $A$ is a norm $\norm{\cdot}$ on $A$ such that $\norm{ab}\leq\norm{a}\cdot\norm{b}$ for all $a,b\in A$. This implies that multiplication is continuous. The pair $(A,\norm{\cdot})$ is called a \term{normed algebra}. A \term{Banach algebra} is a complete normed algebra.

A \term{unital normed algebra} is a normed algebra with an element $1\in A$ such that $1a=a1=a$ for all $a\in A$ and $\norm{1}=1$. Note that if $A$ is an unital algebra with a norm $\norm{\cdot}$, then there exists an equivalent norm $\norm{\cdot}'$ such that $\norm{1}'=1$. This can be defined by $\norm{a}'=\sup\{\norm{ab}:\norm{b}\leq 1\}$, which satisfies $\frac{1}{\norm{1}}\norm{a}\leq\norm{a}'\leq\norm{a}$ for all $a\in A$. A \term{unital Banach algebra} is a complete unital normed algebra.

An isomorphism between normed algebras $A$ and $B$ is a continuous bijective algebra homomorphism with a continuous inverse.

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item For a compact Hausdorff space $K$, $C(K)$ with pointwise multiplication and $\norm{\cdot}_\infty$ is a commutative unital Banach algebra.
		\item A \term{uniform algebra} is a closed subalgebra $A$ of some $C(K)$ such that $1_K\in A$, and $A$ separates the points of $K$. Note that the Stone-Weierstrass theorem does not apply since $A$ need not be closed under conjugation.

		For a compact subset $K\subseteq\C$, we have
		\[
		 \Ps(K)\subseteq \Rs(K)\subseteq\Oc(K)\subseteq A(K)\subseteq C(K)
		\]
		where $\Ps(K)$, $\Rs(K)$, and $\Oc(K)$ are the closure in $C(K)$ of respectively the polynomials, the rational functions without poles in $K$, and functions analytic on some open neighborhood of $K$, and $A(K)=\{f\in C(K):f\text{ is analytic on }\Int(K)\}$. We will prove that $\Rs(K)=\Oc(K)$ and $\Ps(K)=\Rs(K)\iff\C\backslash K$ is simply connected (Runge's theorem). It is not in general true that $\Oc(K)=A(K)$, and $A(K)=\C(K)\iff \Int(K)=\emptyset$ since complex conjugation is not analytic.
		\item $(L_1(\R),\norm{\cdot}_1)$ with convolution
		\[
		 (f*g)(x)=\int_\R f(t)g(x-t)dt
		\]
		is a commutative Banach algebra without a unit.
		\item Let $X$ be a Banach space, then $\B(X)$ is a unital Banach algebra under composition. If $\dim X>1$, then it is not commutative.
	\end{enumerate}
\end{eg}

\subsubsection*{Elementary constructions}
\begin{enumerate}[label=(\arabic*)]
	\item The closure of a subalgebra of a normed algebra is still a subalgebra. A closed subalgebra of a Banac algebra is also a Banach algebra. By a unital subalgebra of a unital algebra $A$, we mean a subalgebra containing $1_A$.
	\item The \term{unitization} of an algebra $A$ is $A_+=A\oplus\C$, with multiplication $(a,\lambda)(b,\mu)=(ab+\mu a+\lambda b,\lambda\mu)$. This is a unital algebra with $1_{A_+}=(0,1)$. If we identify $A$ with the ideal $\{(a,0):a\in A\}$, then $A_+=\{a+\lambda 1:a\in A,\lambda\in\C\}$.

	If $A$ had a unit, then it is no longer a unit in $A_+$.

	If $A$ is a normed algebra, then so is $A_+$ with norm $\norm{a+\lambda}=\norm{a}+\norm{\lambda}$, and $A$ is a closed ideal of $A_+$. If $A$ is a Banach algebra, then so is $A_+$.
	\item Ideals: If $J\triangleleft A$, where $A$ is a normed algebra, then $\overline{J}\triangleleft A$. If $J$ is a closed ideal, then $A/J$ is a normed algebra in the quotient norm. If $J$ is a proper closed ideal of $A$, and $A$ is unital, then $A/J$ is also a unital normed algebra (need to check that $\norm{1+J}=d(1,J)=1$, see lemma~\ref{lem:I-T}).
	\item Completion: The completion $\widetilde{A}$ of a normed algebra $A$ is a Banach algebra with multiplication defined as follows: Given $a,b\in\tilde{A}$, there exists sequences $(a_n),(b_n)$ in $A$ such that $a_n\to a$ and $b_n\to b$, then set $ab=\lim_{n\to\infty}a_nb_n$. It is easy to check that this definition works.
	\item Let $A$ be a unital Banach algebra. Let $X=A$ viewed as a Banch space. For $a\in A$, define $L_a:X\to X$ by left multiplication $x\mapsto ax$. Then $a\mapsto L_a$ is an isometric (algebra) isomorphism of $A$ into its image in $\B(X)$.
\end{enumerate}

\begin{nlemma}\label{lem:I-T}
  Let $A$ be a unital Banach algebra and $a\in A$. If $\norm{1-a}<1$, then $a$ is invertible, and $\norm{a^{-1}}\leq(1-\norm{1-a})^{-1}$.
\end{nlemma}

\begin{proof}
  Let $h=1-a$, then $\norm{h}<1$. It follows that $\sum_{n=0}^\infty h^n$ converges absolutely, and hence converges to some $s\in A$, then
  \[
    sa=\lim_{n\to\infty}\sum_{k=0}^n h^k(1-h)=\lim_{n\to\infty}(1-h^{n+1})=1
  \]
  since $\norm{h^{n+1}}\leq\norm{h}^{n+1}\to 0$ as $n\to\infty$. Similarly, $as=1$, so $s=a^{-1}$. Furthermore, $\norm{s}=\norm{\sum_{k=0}^\infty h^k}\leq\sum_{k=0}^\infty\norm{h}^k=\frac{1}{1-\norm{h}}$.
\end{proof}

\noindent Let $\G(A)$ be the group of invertible elements of a unital algebra $A$.

\begin{ncor}\label{cor:G(X)}
	Let $A$ be a unital Banach algebra, then
	\begin{enumerate}[label=(\roman*)]
		\item $\G(A)$ is open in $A$.
		\item $x\mapsto x^{-1}$ on $\G(A)$ is continuous.
		\item If $x_n\in\G(A)$ for all $n\in\N$, and $x_n\to x\notin\G(A)$, then $\norm{x_n^{-1}}\to\infty$ as $n\to\infty$.
		\item If $x\in\partial\G(A)=\overline{\G(A)}\backslash\G(A)$, then there exists a sequence $(z_n)$ in $A$, such that $\norm{z_n}=1$ for all $n$, $z_n x\to 0$, and $x z_n\to 0$. Wesay $x$ is a topological divisor of 0. In particular, $x$ has no left or right inverse in any unital Banach algebra containing $A$.
	\end{enumerate}
\end{ncor}

\begin{proof}
	(i) Fix $x\in\G(A)$. Given $y\in A$ such that $\norm{y-x}<\frac{1}{\norm{x^{-1}}}$, then $\norm{1-yx^{-1}}=\norm{(x-y)x^{-1}}\leq 1$. By lemma~\ref{lem:I-T}, $yx^{-1}\in\G(A)$, so $y\in\G(A)$.

	(ii) Let $x,y$ be as above. Write $z=x-y$, then $\norm{zx^{-1}}<1$, so by lemma~\ref{lem:I-T}, $(1-zx^{-1})^{-1}\in\G(A)$. We have $y^{-1}=x^{-1}(1-zx^{-1})^{-1}$, so using the power series expansion in lemma~\ref{lem:I-T},
	\[\norm{y^{-1}-x^{-1}}=\bigg\|\sum_{n=1}^\infty x^{-1}(zx^{-1})^n\bigg\|\leq\sum_{n=1}^\infty\norm{x^{-1}}^{n+1}\norm{z}^n= \frac{\norm{x^{-1}}^2\norm{H}}{1-\norm{z}\cdot\norm{x^{-1}}}\to 0\]
	as $z\to 0$, ie. as $x\to y$.

	(iii) From (i), $B(x_n,1/\norm{x_n^{-1}})\subseteq\G(A)$, so $\norm{x-x_n}\geq 1/\norm{x_n^{-1}}$. Therefore $\norm{x_n^{-1}}\geq 1/\norm{x-x_n}\to\infty$ as $n\to\infty$.

	(iv) There exists $(x_n)$ in $\G(A)$ such that $x_n\to x$. Let $z_n=x_n^{-1}/\norm{x_n^{-1}}$, then $\norm{z_n}=1$, and $z_nx=z_nx_n+z_n(x-x_n)=\norm{x_n^{-1}}^{-1}+z_n(x-x_n)\to 0$. Similarly, $xz_n\to 0$.
\end{proof}

Let $A$ be a unital normed algebra, and $x\in A$. The \term{spectrum} of $x$ in $A$ is the set
\[
  \sigma_A(x)=\{\lambda\in\C:\lambda 1-x\notin\G(A)\}
\]
If $A$ is non-unital, then define $\sigma_A(x)=\sigma_{A_+}(x)$. Note that in this case, $0\in\sigma_A(x)$.

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item If $A=M_n(\C)$, then $\sigma_A(x)$ is the set of eigenvalues of $A$.
		\item If $A=C(K)$, where $K$ is compact Hausdorff, then $\sigma_A(f)=f(K)$.
	\end{enumerate}
\end{eg}

\begin{nthm}\label{thm:Spectrum}
  Let $A$ be a Banach algebra, and let $x\in A$. Then $\sigma_A(x)$ is a non-empty compact subset of $\{\lambda\in\C:\abs{\lambda}\leq\norm{x}\}$.
\end{nthm}

\begin{proof}
  WLOG $A$ is unital. The map $\lambda\mapsto\lambda 1-x:\C\to A$ is continuous, and $\sigma_A(x)$ is the inverse image of $A\backslash\G(A)$, which is closed by corollary~\ref{cor:G(X)}(i). Therefore, $\sigma_A(x)$ is closed. If $\abs{\lambda}>\norm{x}$, then $\norm{x/\lambda}<1$, and hence $1+\frac{x}{\lambda}$ is invertible by lemma~\ref{lem:I-T}, so $\lambda 1+x\in\G(A)$. This shows that $\sigma_A(x)\subseteq\{\lambda\in\C:\abs{\lambda}\leq\norm{x}\}$. These imply $\sigma_A(x)$ is compact.

  Suppose $\sigma_A(x)=\emptyset$. Define $R:\C\to A$ by $R(\lambda)=(\lambda 1-x)^{-1}$, then
	\begin{align*}
		R_T(\lambda)-R_T(\mu)&=(\lambda I-T)^{-1}-(\mu I-T)^{-1}\\
		&=(\lambda I-T)^{-1}[(\mu I-T)-(\lambda I-T)](\mu I-T)^{-1}\\
		&=(\mu-\lambda)\cdot R_T(\lambda)R_T(\mu)\\
		\frac{R_T(\lambda)-R_T(\mu)}{\lambda-\mu}&=-R_T(\lambda)R_T(\mu)\to -R_T(\lambda)^2\text{ as }\mu\to\lambda
	\end{align*}
  If $\abs{\lambda}>\norm{x}$, then $\norm{R(\lambda)}\leq\abs{\lambda}^{-1}(1-\norm{x/\lambda})^{-1}=(\abs{\lambda}-\norm{x})^{-1}\to 0$. Therefore, $R$ is a bounded analytic function on $\C$. By theorem~\ref{thm:VectorLiouville}, $R$ is constant. Since $\norm{R(\lambda)}\to 0$ as $\abs{\lambda}\to\infty$, this implies $R=0$, which is a contradiction.
\end{proof}

\begin{ncor}[Gelfand-Mazur Theorem]\label{cor:GelfandMazur}\index{Gelfand-Mazur theorem}
  Let $A$ be a complex unital normed division algebra, then $A=\C$.
\end{ncor}

\begin{proof}
  Let $x\in X$. Let $B$ be the completion of $A$, then $\sigma_A(x)\supseteq\sigma_B(x)\not=\emptyset$ by theorem~\ref{thm:Spectrum}. Let $\lambda\in\sigma_A(x)$, then $\lambda 1-x$ is not invertible, so it is 0. Therefore, the map $\lambda\mapsto\lambda 1:\C\to A$ is an onto isometric isomorphism.
\end{proof}

\begin{nprop}[Spectral Mapping Theorem for Polynomials]\label{prop:PolynomialSpectralMapping}\index{spectral mapping theorem!for polynomials}
  Let $A$ be a unital Banach algebra, and $x\in A$. Let $p$ be a polynomial over $\C$, then $\sigma(p(T))=\{p(\lambda): \lambda\in\sigma(T)\}$.
\end{nprop}

\begin{proof}
  If $p=0$, then the result is clear since $\sigma_A(0)=\{0\}$. Assume $p\not= 0$, and let $\mu\in\C$. We write $\mu-p(t)=c\prod_{k=1}^n(\lambda_k-t)$ for some $c,\lambda_1,\cdots,\lambda_n\in\C$, $c\not= 0$. Then we have
	\begin{align*}
		\mu\cdot 1-p(x)=c\prod_{k=1}^n(\lambda_k\cdot 1-x)\notin\G(A)&\iff\exists k\text{ such that }\lambda_k\cdot 1-x\notin\G(A)\\
		&\iff \exists \lambda\in\sigma_A(x) \text{ such that }p(\lambda)=\mu
	\end{align*}
  since given two elements $x,y\in A$ such that $xy=yx$, it is easy to check that $xy\in\G(A)$ if and only if $x,y\in\G(A)$.
\end{proof}

Let $A$ be a Banach algebra, and let $x\in A$. The \term{spectral radius} of $x$ in $A$ is
\[
  r_A(x)=\sup\{\abs{\lambda}:\lambda\in\sigma_A(x)\}
\]
By theorem~\ref{thm:Spectrum} $r_A(x)$ is well-defined, and $r_A(x)\leq\norm{x}$.

\begin{nthm}[Beurling-Gelfand Spectral Radius Formula]\label{thm:GelfandSpectralRaidus}\index{Beurling-Gelfand spectral radius formula}
Let $A$ be a Banach algebra, and let $x\in A$, then
\[r(x)=\inf_{n\in\N}\norm{x^n}^{1/n}=\lim_{n\to\infty}\norm{x^n}^{1/x}\]
\end{nthm}

\begin{proof}
	WLOG $A$ is a unital algebra. Given $\lambda\in\sigma(x)$ and $n\in\N$, by proposition~\ref{prop:PolynomialSpectralMapping}, $\lambda^n\in\sigma(x^n)$, so $\abs{\lambda^n}\leq\norm{x^n}$, which implies $r(x)\leq\inf_n\norm{x^n}^{1/n}$. Conversely, define the function $R:\C\backslash\sigma(x)\to A$ by $R(\lambda)=(\lambda 1-x)^{-1}$, then from the proof of theorem~\ref{thm:Spectrum}, $R$ is analytic. If $\abs{\lambda}\geq\norm{x}$, then
	\[
	 R(\lambda)=\frac{1}{\lambda}\left(1-\frac{x}{\lambda}\right)^{-1}=\frac{1}{\lambda}\sum_{n=0}^\infty\frac{x^n}{\lambda^n}
	\]
	Fix $\phi\in A^*$, then $\phi\circ\R:\C\backslash\sigma(x)\to\C$ is analytic, so for $\abs{\lambda}>r(x)$, it has a Laurent series expansion. For $\abs{\lambda}>\norm{x}$, the above equation for $R$ shows that the Laurent series expansion must be $\frac{1}{\lambda}\sum_{n=0}^\infty\frac{\phi(x^n)}{\lambda^n}$. Fix $\lambda$ such that $\abs{\lambda}>r(x)$. The convergence of the Laurent series implies $\phi(x^n)/\lambda^n\to 0$ as $n\to\infty$ for all $\phi\in A^*$, so $\{x^n/\lambda^n:n\in\N\}$ is weakly bounded, and hence norm bounded by proposition~\ref{prop:WeaklyBounded}. This means there exists $M\geq 0$ such that $\norm{x^n/\lambda^n}\leq M$ for all $n$, so $\norm{x^n}^{1/n}\leq M^{1/n}\abs{\lambda}$. Therefore, $\limsup_n\norm{x^n}^{1/n}\leq\abs{\lambda}$. We now have
	\[
	 \limsup_n\norm{x^n}^{1/n}\leq r(x)\leq\inf_n\norm{x^n}^{1/n}\leq\liminf_n\norm{x^n}^{1/n}\qedhere
	\]
\end{proof}

\begin{nthm}\label{thm:SpecExtension}
  Let $A$ be a unital Banach algebra, $B$ a unital closed subalgebra of $A$, and $x\in B$, then $\sigma_B(x)\supseteq\sigma_A(x)$, and $\partial\sigma_B(x)\subseteq\partial\sigma_A(x)$. It follows that $\sigma_B(x)$ is the union of $\sigma_A(x)$ and some of the bounded components of $\C\backslash\sigma_A(x)$.
\end{nthm}

\begin{proof}
  It is clear that $\sigma_B(x)\supseteq\sigma_A(x)$. Let $\lambda\in\partial\sigma_B(x)$, then $\lambda 1-x\in\partial\G(B)$. By corollary~\ref{cor:G(X)}(iv), $\lambda 1-x\notin\G(A)$, so $\lambda\in\sigma_A(x)$. This implies $\lambda\in\partial\sigma_A(x)$.
\end{proof}

\begin{nprop}\label{prop:CommSubAlg}
  Let $A$ be a unital Banach algebra, and let $C$ be a maximal commutative subalgebra of $A$, then $C$ is closed and unital, and $\sigma_C(x)=\sigma_A(x)$ for all $x\in C$.
\end{nprop}

\begin{proof}
  We have $C\subseteq\overline{C+\C\cdot 1}$, which is a commutative subalgebra, so by maximality, $C=\overline{C+\C\cdot 1}$. Therefore, $C$ is a closed unital subalgebra. Let $x\in C$ and $\lambda\notin\sigma_A(x)$. Let $z=(\lambda 1-x)^{-1}$ in $A$, then for $w\in C$, $wx=xw$, so $(\lambda 1-x)w=w(\lambda 1-x)$. Multiply on the left and right by $z$ shows $wz=zw$. By the maximality of $C$, $z\in C$, so $\lambda\notin\sigma_C(x)$.
\end{proof}

\subsection*{Commutative Banach Algebras}
A \term{character} on an algebra $A$ is a non-zero homomorphism $\phi:A\to\C$. Let $\Phi_A$ be the set of all characters of $A$. Note that if $A$ is unital, then $\phi(1)=1$ for all characters $\phi$.

\begin{nlemma}\label{lem:CharContinuous}
  Let $A$ be a Banach algebra, and $\phi\in\Phi_A$, then $\phi$ is continuous, and $\norm{\phi}\leq 1$. If $A$ is unital, then $\norm{\phi}=1$.
\end{nlemma}

\begin{proof}
  First suppose $A$ is unital. If there exists $x\in A$ such that $\abs{\phi(x)}>\norm{x}$, then $\norm{x/\phi(x)}<1$, so $z=1-\frac{x}{\phi(x)}$ has an inverse $w$. Then $\phi(z)\phi(w)=\phi(zw)=1$, but $\phi(z)=0$. This is a contradiction. Furthermore, $\phi(1)=1$, so $\norm{\phi}=1$.

  For a non-unital $A$, define $\phi_+:A_+\to\C$ by $\phi_+(x,\lambda)=x+\lambda$. Then $\phi_+$ is a character of $A_+$, so $\norm{\phi}\leq\norm{\phi_+}=1$ by the previous part.
\end{proof}

\begin{nlemma}\label{lem:MaxIdealClosed}
  Let $A$ be a unital Banach algebra. If $J$ is a proper ideal of $A$, then $\overline{J}$ is also proper. It follows that maximal ideals are closed.
\end{nlemma}

\begin{proof}
  Since $J$ is proper, $J\cap\G(A)=\emptyset$. Since $\G(A)$ is open, $\overline{J}\cap\G(A)=\emptyset$.
\end{proof}

\begin{nthm}\label{thm:IdealCharacter}
  Let $A$ be a comutative unital Banach algebra, then the map $\phi\mapsto\ker\phi$ is a bijection from $\Phi_A$ to $\mathcal{M}_A$, the set of all maximal ideals of $A$.
\end{nthm}

\begin{proof}
  Given $\phi\in\Phi(A)$, its kernel is a proper ideal since $\phi\not= 0$. As $\phi$ is linear, $\ker\phi$ has codimension 1, so it must be maximal. If $\ker\phi=\ker\psi$, where $\phi,\psi\in\Phi_A$, then for any $x\in A$, $x-\phi(x)\cdot 1=\ker\phi=\ker\psi$, so $\psi(x-\phi(x)\cdot 1)=0$. This implies $\psi(x)=\phi(x)$. Therefore, the map is injective. Let $M$ be a maximal ideal of $A$, then $M$ is a closed subspace, so the quotient $A/M$ is a unital Banach algebra. Since $A$ is commutative, $A/M$ is a field. By corollary~\ref{cor:GelfandMazur}, $A/M\cong\C$, so the quotient map $q:A\to A/M$ is a character with kernel $M$.
\end{proof}

\begin{remark}
  For non-commutative $A$, the set $\Phi_A$ needs to be replaced by the set of all irreducible representations of $A$.
\end{remark}

\begin{ncor}\label{cor:SpectrumCharacter}
  Let $A$ be a unital commutative Banach algebra. Let $x\in A$, then $x\in\G(A)$ if and only if $\phi(x)\not= 0$ for all $\phi\in\Phi_A$. Therefore, $\sigma_A(x)=\{\phi(x):\phi\in\Phi_A\}$, and $r_A(x)=\sup_{\phi\in\Phi_A}\abs{\phi(x)}$.
\end{ncor}

\begin{proof}
  $\Longrightarrow$: There exists $z\in A$ such that $xz=1$, then $\phi(x)\phi(z)=\phi(xz)=1$ for all $\phi\in\Phi_A$, so $\phi(x)\not= 0$.

  $\Longleftarrow$: The ideal $xA=\{xa:a\in A\}$ is proper since $x$ is invertible. By Zorn's lemma, it is contained in a maximal ideal $M$. Theorem~\ref{thm:IdealCharacter} implies $M=\ker\phi$ for some $\phi\in\Phi_A$, then $x\in xA$, so $\phi(x)=0$.
\end{proof}

\begin{ncor}\label{cor:SpectralRadiusInequality}
  Let $A$ be a Banach algebra, and let $x,y\in A$ be two commuting elements. Then $r_A(x+y)\leq r_A(x)+r_A(y)$ and $r_A(xy)\leq r_A(x)r_A(y)$.
\end{ncor}

\begin{proof}
  WLOG $A$ is unital. The subalgebra generated by $x$ and $y$ is commutative, so it is contained in a maximal commutative subalgebra $C$. Note that $x+y,xy\in C$. By proposition~\ref{prop:CommSubAlg}, $C$ is closed, unital, and $\sigma_C(z)=\sigma_A(z)$ for all $z\in C$, so by replacing $A$ with $C$, WLOG $A$ is commutativel. By corollary~\ref{cor:SpectralRadiusInequality},
  \[
    r_A(x+y)=\sup_{\phi\in\Phi_A}\abs{\phi(x+y)}\leq\sup_{\phi\in\Phi_A} \abs{\phi(x)}+\sup_{\phi\in\Phi_A}\abs{\phi(y)}=r_A(x)+r_A(y)
  \]
  Similarly, $r_A(xy)\leq r_A(x)r_A(y)$.
\end{proof}

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item Let $A=C(K)$, where $K$ is compact Hausdorff, then $\Phi_A=\{\delta_k:k\in K\}$, where $\delta_k(f)=f(k)$.
		\vspace{-\topsep}
		\begin{proof}
		 Clearly, $\delta_k\in\Phi_A$ for all $k\in K$. Let $M$ be a maximal ideal, and assume $M\not=\ker\delta_k$ for any $k\in K$, then $M\not\subseteq\ker\delta_k$ for any $k\in K$, so there exists $f_k\in M$ such that $f_k(k)\not= 0$. Since $f$ is continuous, there exists an open neighborhood $U_k$ of $k$ such that $f_k(z)\not= 0$ for all $z\in U_k$. Since $K$ is compact, there exists finitely many $k_1,\cdots,k_n$ such that $K=\bigcup_{j=1}^n U_{k_j}$. Then $f=\sum_{j=1}^n\bar{f}_{k_j}f_{k_j}\in M$ and is nowhere zero, so $M=C(K)$. This is a contradiction.
		\end{proof}
		\item Let $A=A(\Delta)=\{f\in C(\Delta):f\text{ if analytic on }\Int\Delta\}$, where $\Delta=\{z\in\C:\abs{z}\leq 1\}$. Then $\Phi_A=\{\delta_\alpha:\alpha\in\Delta\}$.
		\vspace{-\topsep}
		\begin{proof}
		 Clearly, $\delta_\alpha\in\Phi_A$ for all $\alpha\in\Delta$. Let $\phi\in\Phi_A$. Let $e(z)=1$, $u(z)=z$ for all $z\in\Delta$, then $e,u\in A$, and $\phi(e)=1$. Let $\alpha=\phi(u)$, then $\abs{\alpha}\leq\norm{\phi}\cdot\norm{u}=1$, so $\alpha\in\Delta$. Since $\phi$ is a homomorphism, $\phi(p)=p(\alpha)=\delta_\alpha(p)$ for all polynomials $p$. The polynomials are dense in $A(\Delta)$, so $\phi=\delta_\alpha$.
		\end{proof}
		\item Let $A=\Rs(K)$ be the closure of rational functions on $\C$ without poles in $K$, where $K\subseteq\C$ is compact. As an exercise, show that $\Phi_A=\{\delta_\alpha:\alpha\in K\}$.
		\item \term{Wiener algebra}: $W=\{f\in C(\T):\sum_{n\in\Z}|\hat{f_n}|<\infty\}$, where $\T$ is the unit circle, and $\hat{f}_n=\frac{1}{2\pi}\int_{\pi}^\pi f(e^{i\theta})e^{-in\theta}d\theta$.

		\emph{Exercise.} Check that $W$ is a Banach algebra with pointwise operations and norm $\norm{f}_1=\sum_{n\in\Z}|\hat{f}_n|$. Furthermore, $\Phi_W=\{\delta_\alpha:\alpha\in\T\}$.

		From this and corollary~\ref{cor:SpectrumCharacter}, we can deduce Wiener's theorem: if $f\in W$ and $f(\alpha)\not= 0$ for all $\alpha\in\T$, then $\frac{1}{f}\in W$.
	\end{enumerate}
\end{eg}

Let $A$ be a commutative unital Banach algebra, then $\Phi_A$ is a w*-closed subset of $B_{A^*}$, so by the Banach-Alaoglu theorem (theorem~\ref{thm:BanachAlaoglu}), $\Phi_A$ with the w*-topology (also called the \term{Gelfand topology} in this case) is a compact Hausdorff space. It is called the \term{spectrum} of $A$, or the \term{character space} of $A$. For $x\in A$, the map $x\mapsto(\hat{x}:\Phi_A\to\C$, $\hat{x}(\phi)=\phi(x))$ is the \term{Gelfand map}.

\begin{nthm}\label{thm:GelfandRep}
	Let $A$ be a commutative unital Banach algebra, then the Gelfand map is a continuous unital homomorphism $A\to C(\Phi(A))$. For $x\in A$,
	\begin{enumerate}[label=(\roman*)]
		\item $\|\hat{x}\|_\infty=r_A(x)\leq\norm{x}$.
		\item $\sigma_{C(\Phi_A)}(\hat{x})=\sigma_A(x)$.
		\item $x\in\G(A)\iff\hat{x}\in\G(C(\Phi_A))$.
	\end{enumerate}
\end{nthm}
\begin{proof}
  The map is easily checked to be an algebra homomorphism. It is unital since $\hat{1}(\phi)=\phi(1)=1$, which implies $\hat{1}=1_{\Phi_A}$. For (i) and (ii), we have
	\begin{align*}
		& \|\hat{x}\|_\infty=\sup_{\phi\in\Phi_A}|\hat{x}(\phi)|=\sup_{\phi\in\Phi_A}\abs{\phi(x)}=r_A(x)\leq\norm{x}\\
		&\sigma_{C(\Phi_A)}(\hat{x})=\{\hat{x}(\phi):\phi\in\Phi_A\}=\{\phi(x):\phi\in\Phi_A\}=\sigma_A(x)
	\end{align*}
  by corollary~\ref{cor:SpectrumCharacter}. Part (iii) follows immediately.
\end{proof}

\begin{remark}
  The Gelfand map need not be injective or surjective. In fact, its kernel is $\{x\in A:\lim\norm{x^n}^{1/n}=0\}$ by the spectral radius formula. Such elements are called \term{quasi-nilpotent elements}. This is also $\bigcap_{\phi\in\Phi_A}\ker\phi$, which equals to the intersection of all maximal ideals in $A$, written as $J(A)$ and called the \term{Jacobson radical} of $A$. An algebra $A$ is \term{semisimple} if $J(A)=0$.
\end{remark}

\begin{nlemma}\label{lem:EmbedIntoCharacteR}
  Let $K$ be a compact Hausdorff space, and $A$ a subalgebra of $C(K)$ that separates the points of $K$ and contains $1_K$. Assume that $A$ is a Banach algebra in some norm $\norm{\cdot}$, then the map $\delta:K\to\Phi_A$, $k\mapsto\delta_k$ is a homeomorphism onto its image.
\end{nlemma}

\begin{proof}
  For all $f\in A$, $\hat{f}\circ\delta$ maps $k$ to $\hat{f}(\delta_k)=\delta_k(f)=f(k)$, so $\hat{f}\circ\delta=f$, which is continuous. Therefore, $\delta$ is continuous by the universal property of weak topology. The algebra $A$ separates the points of $k$, so $\delta$ is injective. Since $K$ is compact and $\delta(K)$ is Hausdorff, this implies $\delta$ is a homeomorphism $K\to\delta(K)$.
\end{proof}

\begin{eg}
  The above map is onto for $C(K)$, $A(\Delta)$, $W$, and $\Rs(K)$. Identifying $\Phi_A$ with the appropriate $K$, the Gelfand maps are just inclusions
  \[
    C(K)\xrightarrow{=} C(K),\ A(\Delta)\hookrightarrow C(\Delta),\ W\hookrightarrow C(\T),\ R(K)\hookrightarrow C(K)
  \]
Therefore, they are semisimple algebras. The Gelfand maps are not onto except for $C(K)$. Its image is not even closed for $W$.
\end{eg}

\newpage

\section{Holomorphic functional calculus}
Let $U\subseteq\C$ be a non-empty open set. Recall that $\Oc(U)=\{f:U\to\C:f\text{ analytic}\}$ is a locally compact space with the topology of local uniform convergence. It is also an algebra with pointwise multiplication. Let $e,u\in\Oc(U)$ be defined by $e(z)=1,\ u(z)=z$ for all $z\in U$, then $\Oc(U)$ is a unital algebra with unit $e$.

\begin{nthm}[Holomorphic Functional Calculus]\label{thm:HFC}\index{holomorphic functional calculus}
  Let $A$ be a commutative unital Banach algebra, $x\in A$, and $U$ be an open subset of $\C$ such that $U\supseteq\sigma_A(x)$, then there exists a unique continuous unital homomorphism $\Theta_x:\Oc(U)\to A$ such that $\Theta_x(u)=x$. Moreover, $\phi(\Theta_x(f))=f(\phi(x))$ for all $\phi\in\Phi_A$, $f\in\Oc(U)$. Hence, $\sigma_A(\Theta_x(f))=\{f(\lambda):\lambda\in\sigma_A(x)\}$.
\end{nthm}

\begin{remark}
  If $f(z)=\sum_{k=0}^n a_k z^k$ is a polynomial, then $\Theta_x(f)=\sum_{k=0}^n a_kx^k$, so this can be seen as a wide generalization of proposition~\ref{prop:PolynomialSpectralMapping}.
\end{remark}

\begin{nthm}[Runge's Approximation Theorem]\label{thm:Runge}\index{Runge's theorem}
  Let $K\subseteq\C$ be non-empty compact, then $\Rs(K)=\Oc(K)$. More precisely, let $\Lambda$ be a set which contains at least one point from each bounded complement of $\C\backslash K$, then for all $f$ analytic in some open $U\supseteq K$ and $\varepsilon>0$, there exists a rational function $r$ with poles only in $\Lambda$ such that $\norm{f-r}_K<\varepsilon$, where we define $\norm{g}_K=\sup_{z\in K}\abs{g(z)}$ for all $g\in C(K)$.
\end{nthm}

\begin{remark}
  If $\C\backslash K$ is connected, then taking $\Lambda=\emptyset$ shows that $\Ps(K)=\Rs(K)=\Oc(K)$.
\end{remark}

We first recall some complex analysis. A 1-chain\index{1-chain} $\Gamma$ is a formal linear combination of $C^1$-paths with integral coefficients, ie. $\Gamma=\sum_{i=1}^n c_i\gamma_i$, where $\gamma_i:[a_i,b_i]\to\C$ is $C^1$, and $c_i\in\Z$. Its trace $[\Gamma]$ is defined to be $\bigcup_{i=1}^n\gamma_i([a_i,b_i])$. It is a cycle\index{cycle} if $\sum_{i=1}^n c_i(\gamma_i(b_i)-\gamma_i(a_i))=0$ as a formal linear combination of points in $\C$. Integration over $\Gamma$ is defined by $\int_\Gamma f(z)dz=\sum_{i=1}^n c_i\int_{\gamma_i}f(z)dz$. In particular, the winding number $n(\Gamma,w)$ is define by
\[n(\Gamma,w)=\frac{1}{2\pi i}\int_\Gamma\frac{dz}{z-w}\]
for $w\notin[\Gamma]$. The winding number is always an integer.

Let $U\subseteq\C$ be open, and $\Gamma$ be a cycle in $U$ such that $n(\Gamma,w)=0$ if $w\notin U$. Let $f:U\to\C$ be analytic, then we have
\begin{align*}
	& \text{\bfseries Cauchy's Theorem:}\quad \int_\Gamma f(z)dz=0\\
	& \text{\bfseries Cauchy's Integral Formula:}\quad\frac{1}{2\pi i}\int_\Gamma\frac{f(z)}{z-a}dz=n(\Gamma,a)f(a)\text{ for all }a\in U\backslash[\Gamma]
\end{align*}
Let $K\subseteq U\subseteq\C$, where $K$ is non-empty compact, and $U$ is open, then there exists a cycle $\Gamma$ in $U\backslash K$ such that $n(\Gamma,w)=1$ if $w\in K$, and $n(\Gamma,w)=0$ if $w\notin U$. This result can be proven by imposing over $U$ a sufficiently fine square grid and take $\Gamma$ to be the sum of all edges in the grid adjacent to squares intersecting $K$, with appropriate orientations.

Let $f:[a,b]\to X$ be continuous, where $[a,b]$ is a closed and bounded interval, and $X$ is a Banach space. Take a sequence of dissections $\mathcal{D}_n=\{a=t_0^{(n)}<t_1^{(n)}<\cdots<t_{k_n}^{(n)}=b\}$, satisfying the condition that $\abs{\mathcal{D}_n}=\max_j|t_j^{(n)}-t_{j-1}^{(n)}|\to 0$ as $n\to\infty$. Define
\[
  \int_a^b f(t)dt=\lim_{n\to\infty}\sum_{j=1}^n f(t_j^{(n)})(t_j^{(n)}-t_{j-1}^{(n)})
\]
It is standard to check that this is well-defined. For $\phi\in X^*$, we have $\phi(\int_a^b f(t)dt)=\int_a^b\phi(f(t))dt$ since $\phi$ is linear and continuous. In particular, by taking $\phi$ to be a norming functional for $\int_a^b f(t)dt$, we get the estimate $\|\int_a^b f(t)dt\|\leq\int_a^b\norm{f(t)}dt$.

If $\gamma:[a,b]\to\C$ is a $C^1$-path, and $f:[\gamma]\to X$ is continuous, then we can define
\[
  \int_\gamma f(x)dz=\int_a^b f(\gamma(t))\gamma'(t)dt
\]
This extends to integration over 1-chains by linearity. For all $\phi\in X^*$, $\phi(\int_\Gamma f(z)dz)=\int_\Gamma \phi(f(z))dz$, so we have the estimation
\[
  \norm{\int_\Gamma f(z)dz}\leq l(\Gamma)\sup_{z\in[\Gamma]}\norm{f(z)}
\]
Let $U\subseteq\C$ be open and $f:U\to X$ analytic. Let $\Gamma$ be a cycle in $U$ such that $n(\Gamma,w)=0$ if $w\notin U$, then $\int_\Gamma f(z)dz=0$ by the normal Cauchy's theorem and Hahn-Banach theorem.

\begin{nlemma}\label{lem:HFCLemma}
	Let $A$ be a commutative unital Banach algebra, $x\in A$, and $U\subseteq\C$ be open and $U\supseteq K=\sigma_A(x)$. Fix a cycle $\Gamma\in U\backslash K$ such taht $n(\Gamma,w)=1$ if $w\in K$ and $n(\Gamma,w)=0$ if $w\notin U$. Define $\Theta_x:\Oc(U)\to A$ by
	\[\Theta_x(f)=\frac{1}{2\pi i}\int_\Gamma f(z)(z1-x)^{-1}dz\]
	then this satisfies
	\begin{enumerate}[label=(\roman*)]
		\item $\Theta$ is well-defined, linear, and continuous.
		\item $\Theta_x(r)=r(x)$ if $r$ is a rational function without poles in $U$.
		\item $\phi(\Theta_x(f))=f(\phi(x))$ for all $\phi\in\Phi_A$, $f\in\Oc(U)$. In particular, $\sigma_A(\Phi_x(f))=\{f(\lambda):\lambda\in\sigma_A(x)\}$.
	\end{enumerate}
\end{nlemma}

\begin{proof}
	(i) By assumption, $[\Gamma]\subseteq U\backslash K$, so for $z\in[\Gamma]$, $z\notin\sigma_A(x)$, so $z\mapsto f(z)(z1-x)^{-1}$ is continuous on $[\Gamma]$ by corollary~\ref{cor:G(X)}(ii). Hence, $\Theta_x$ is well-defined. Linearity is clear. Also,
	\[
	 \norm{\Theta_x(f)}\leq\frac{1}{2\pi}l(\Gamma)\sup_{z\in[\Gamma]}\|f(z)(z1-x)^{-1}\|\leq\bigg(\frac{1}{2\pi}l(\Gamma)\sup_{z\in[\Gamma]}\|(z1-x)^{-1}\|\bigg)\cdot\sup_{z\in[\Gamma]}\abs{f(z)}
	\]
	The expression in the parentheses is constant, and $\sup_{z\in[\Gamma]}\abs{f(z)}$ is one of the defining seminorms of the topology of $\Oc(U)$. By lemma~\ref{lem:LCSCts}, $\Theta_x$ is continuous.

	(ii) Choose $R>\norm{x}$ such that $[\Gamma]\cup K\subseteq\{z\in\C:\abs{z}<R\}$. Let $\gamma(t)=Re^{2\pi it}$, $0\leq t\leq 1$, and let $\Gamma'=\Gamma-\gamma$, then $n(\Gamma',w)=0$ for all $w\in K$ and for all $w$ such that $\abs{w}>R$. Since $(z1-x)^{-1}$ is analytic on $\C\backslash K$, Cauchy's theorem implies $\int_{\Gamma'}(z1-x)^{-1}dz=0$, so
	\[
	 \Theta_x(e)=\frac{1}{2\pi i}\int_{\gamma}(z1-x)^{-1}dz=\frac{1}{2\pi i}\int_\gamma\frac{1}{z}\sum_{n=0}^\infty\frac{x^n}{z^n}dz=\sum_{n=0}^\infty\frac{x^n}{2\pi i}\int_\gamma\frac{dz}{z}=1
	\]
	Now, if $r=p/q$ is rational without poles in $U$, then $q\not= 0$ on $U$, so by the spectral mapping theorem for polynomials, $\sigma_A(q(x))$ does not contain 0. Therefore, $q(x)$ is invertible. We define $r(x)=p(x)q(x)^{-1}$. Then
	\[
	 r(z)\cdot 1-r(x)=(z1-x)\cdot s(z,x)
	\]
	where $s(z,x)=\sum_{k=1}^n s_k(z)t_k(x)$, and $s_k,t_k$ are rational functions without poles in $U$.
	\begin{align*}
		\Theta_x(r)&=\frac{1}{2\pi i}\int_\Gamma r(z)(z1-x)^{-1}dz\\
		&=\frac{1}{2\pi i}\int_\Gamma (r(z)\cdot 1-r(x))(z1-x)^{-1}dz+\frac{r(x)}{2\pi i}\int_\Gamma (z1-x)^{-1}dz\\
		&=\frac{1}{2\pi i}\int_\Gamma s(z,x)dz+r(x)\Theta_x(e)=r(x)
	\end{align*}

	(iii) For all $\phi\in\Phi_A$ and $f\in\Oc(U)$,
	\[
	 \phi(\Theta_x(f))=\frac{1}{2\pi i}\int_\Gamma f(z)(z-\phi(x))^{-1}dz=n(\Gamma,\phi(x))f(\phi(x))=f(\phi(x))\qedhere
	\]
\end{proof}

\begin{proof}[Proof of Theorem~\ref{thm:Runge}]
  Let $K\subseteq\C$ be non-empty and compact. Given an open set $U$ such that $K\subseteq U\subseteq\C$ and an analytic function $f:U\to\C$, we need to show that $f|_K\in\Rs(K)$. Let $A=\Rs(K)$. Set $x=u|_K$, where $u(z)=z$. Then $\sigma_A(x)=\{\phi(x):\phi\in\Phi_A\}=K\subseteq U$, since $\Phi_A$ is just the set of evaluation maps. Let $\Theta_x:\Oc(U)\to A$ be given by lemma~\ref{lem:HFCLemma}. For $z\in K$, $\Theta_x(f)(z)=\delta_z(\Theta_x(f))=f(\delta_z(x))=f(z)$, so $f|_K=\Theta_x(f)\in\Rs(K)$.

  For the more precise version, let $\Lambda$ contain at least one point from each bounded component of $\C\backslash K$. Let $B$ be the closed subalgebra of $A$ generated by $1,\ x$, and $(\lambda 1-x)^{-1}$ for $\lambda\in\Lambda$. If $V$ is a bounded component of $\C\backslash\sigma_A(x)$, then either $V\subseteq\sigma_B(x)$ or $V\cap\sigma_B(x)$ is empty by theorem~\ref{thm:SpecExtension}. However, there exists $\lambda\in\Lambda\cap V$, and $(\lambda 1-x)^{-1}\in B$, so $\lambda\notin\sigma_B(x)$. Therefore, $V\cap\sigma_B(x)=\emptyset$, which implies $\sigma_B(x)=\sigma_A(x)$. The map $\Theta_x:\Oc(U)\to A$ must take values in $B$, so $f|_K\in B$.
\end{proof}

\begin{ncor}\label{cor:Runge}
  Let $U$ be a non-empty open subset of $\C$, then the subalgebra $\Rs(U)$ of $\Oc(U)$ consisting of rational functions without poles in $U$ is dense.
\end{ncor}

\begin{proof}
  We need to show that given $f\in\Oc(U)$, compact $K\subseteq U$, and $\varepsilon>0$, there exists $r\in\Rs(U)$ such that $\norm{r-f}_K<\varepsilon$. Let $\widetilde{K}$ be the union of $K$ and the bounded components $V$ of $\C\backslash K$ satisfying $V\subseteq U$. For any other bounded component $W$ of $\C\backslash K$, fix $\lambda\in W\backslash U$, and let $\Lambda$ be the set of all such $\lambda$. Note that $K\subseteq\widetilde{K}\subseteq U$ and $\widetilde{K}$ is compact, so by theorem~\ref{thm:Runge}, there exists a rational function $r$ with poles in $\Lambda\subseteq\C\backslash U$ such that $\norm{r-f}_{K}\leq\norm{r-f}_{\widetilde{K}}<\varepsilon$.
\end{proof}

\begin{proof}[Proof of Theorem~\ref{thm:HFC}]
  Existence: let $\Theta_x:\Oc(U)\to A$ be defined as in lemma~\ref{lem:HFCLemma}, then $\Theta_x(fg)=(fg)(x)=f(x)g(x)=\Theta_x(f)\Theta_x(g)$ for all $f,g\in\Rs(U)$. Since $\Rs(U)$ is dense in $\Oc(U)$, this shows $\Theta_x$ is multiplicative.

  Uniqueness: Suppose $\theta:\Oc(U)\to A$ is a continuous unital homomorphism such that $\theta(u)=x$, then $\theta(r)=r(x)=\Theta_x(r)$ for all $r\in\Rs(U)$, and hence $\theta=\Theta_x$ on $\Oc(U)$.
\end{proof}

\newpage

\section{C*-algebras}
A \term{$*$-algebra} is a complex algebra $A$ with an \term{involution}, ie. a map $A\to A,\ x\mapsto x^*$ such that for all $x,y\in A$ and $\lambda,\mu\in\C$,
\begin{enumerate}[label=(\roman*)]
	\item $(\lambda x+\mu y)^*=\bar{\lambda}x^*+\bar{\mu}y^*$
	\item $(xy)^*=y^*x^*$
	\item $x^{**}=x$
\end{enumerate}
Note that if $A$ is unital, then $1^*$ is also a unit, so $1^*=1$. A \term{C*-algebra} is a Banach algebra with an involution satisfying the C*-equation $\norm{x^*x}=\norm{x}^2$ for all $x\in A$. A complete algebra norm on a $*$-algebra that satisfies the C*-equation is called a \term{C*-norm}.

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item If $A$ has a multiplicative identity $1\not= 0$, then $A$ is automatically a unital C*-algebra, ie. $\norm{1}=1$.
		\item $\norm{x}^2=\norm{x^*x}\leq\norm{x^*}\cdot\norm{x}$, so $\norm{x}\leq\norm{x^*}$ for all $x\in A$. Apply this to $x^*$ implies $\norm{x^*}\leq\norm{x}$, so $\norm{x}=\norm{x^*}$, and in particular, $x\mapsto x^*$ is continuous.
		\item A Banach $*$-algebra is a Banach algebra with an involution satisfying $\norm{x^*}=\norm{x}$ for all $x\in X$.
	\end{enumerate}
\end{remark}

A \term{$*$-subalgebra} of a $*$-algebra $A$ is a subalgebra $B$ closed under the involution. A closed $*$-subalgebra of a C*-algebra is also a C*-algebra, called a \term{C*-subalgebra}. The closure of a $*$-algebra in a C*-algebra is a C*-algebra.

A homomorphism $\theta:A\to B$ between $*$-algebras is a \term{$*$-homomorphism} if $\theta(x^*)=x^*$. A \term{$*$-isomorphism} is a bijective $*$-homomorphism.

\begin{ex}
  Show that a C*-algebra has a unique C*-norm, and hence a $*$-isomorphism between C*-algebras is automatically an isometric isomorphism.
\end{ex}

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item Let $K$ be compact Hausdorff, then $C(K)$ with $\norm{\cdot}_\infty$, pointwise algebraic operations, and $f^*(k)=\overline{f(k)}$ forms a commutative unital C*-algebra.
		\item Let $H$ be a Hilbert space, then $\B(H)$ is a unital C*-algebra with involution $T\mapsto T^*$, where $T^*$ is defined by $\bra Tx,y\ket=\bra x,T^*y\ket$ for all $x,y\in H$.
	\end{enumerate}
\end{eg}

\begin{remark}
  The Gelfand-Neimark theorem states that if $A$ is a C*-algebra, then there exists a Hilbert space $H$ such that $A$ is (isometrically) $*$-isomorphic to a C*-subalgebra of $\B(H)$.\index{Gelfand-Neimark theorem!general case}
\end{remark}

Let $A$ be a C*-algebra, and $x\in A$, then $x$ is called
\begin{enumerate}[label=(\roman*)]
	\item \term{Hermitian} or \term{self-adjoint} if $x^*=x$.
	\item \term{unitary} if $A$ is unital and $x^*x=xx^*=1$.
	\item \term{normal} if $x^*x=xx^*$.
\end{enumerate}

\begin{eg}
  Every Hermitian or unitary element if normal. In $C(K)$, $f$ is Hermitian if and only if $f(K)\subseteq\R$, and $f$ is normal if and only if $f(K)\subseteq\T$.
\end{eg}

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item For all $x\in A$, there exists unique Hermitian $h,k\in A$ such that $x=h+ik$. In fact, $h=\frac{1}{2}(x+x^*)$, and $k=\frac{1}{2i}(x-x^*)$. It is normal if and only if $hk=kh$.
		\item If $A$ is a unital C*-algebra, and $x\in A$, then $x\in\G(A)$ if and only if $x^*\in\G(A)$, so $\sigma_A(x^*)=\overline{\sigma_A(x)}$. In particular, $r_A(x)=r_A(x^*)$.
	\end{enumerate}
\end{remark}

\begin{nlemma}\label{lem:C*SpectralRadius}
  Let $A$ be a C*-algebra, and let $x\in A$ be normal, then $r_A(x)=\norm{x}$.
\end{nlemma}

\begin{proof}
	If $x$ is Hermitian, then $\norm{x^2}=\norm{x^*x}=\norm{x}^2$, so by induction, $\norm{x^{2^n}}=\norm{x}^{2^n}$. By theorem~\ref{thm:GelfandSpectralRaidus}, we have
	\[r(A)=\lim_{n\to\infty}\|x^{2^n}\|^{2^{-n}}=\norm{x}\]
	If $x$ is normal, then $\norm{x}^2=\norm{x^*x}=r_A(x^*x)\leq r_A(x^*)r_A(x)\leq\norm{x^*}r_A(x)=\norm{x}r_A(x)$, so $\norm{x}\leq r_A(x)$. Therefore, $\norm{x}=r_A(x)$.
\end{proof}

\begin{nlemma}\label{lem:C*morphism}
Let $A$ be a unital C*-algebra, then $\phi(x^*)=\overline{\phi(x)}$ for all $x\in A$, $\phi\in\Phi_A$.
\end{nlemma}

\begin{proof}
  Write $x=h+ik$ with $h,\ k$ Hermitian, then $\phi(x^*)=\phi(h)-i\phi(k)$, and $\overline{\phi(x)}=\overline{\phi(h)}-i\overline{\phi(k)}$, so we need to prove $x$ is Hermitian implies $\phi(x)\in\R$.

  Let $x$ be Hermitian, and write $\phi(x)=\alpha+i\beta$, where $\alpha,\beta\in\R$. Let $y_t=x+it1$ for $t\in\R$, then
  \begin{align*}
    \alpha^2+(\beta+t)^2&=\abs{\phi(y_t)}^2\\
    &\leq\norm{y_t}^2=\norm{y_t^*y_t} =\norm{(x-it1)(x+it1)}=\|x^2+t^2\|\leq\|x^2\|+t^2
  \end{align*}
  so $\alpha^2+\beta^2+2\beta t\leq\norm{x^2}$ for all $t\in\R$, which is only possible if $\beta=0$.
\end{proof}

\begin{ncor}
	Let $A$ be a unital C*-algebra, and $x\in A$, then
	\begin{enumerate}[label=(\roman*)]
		\item If $x$ is Hermitian, then $\sigma(x)\subseteq\R$.
		\item If $x$ is unitary, then $\sigma(x)\subseteq\T$.
	\end{enumerate}
\end{ncor}

\begin{proof}
	Consider $x\in A$ normal. Let $B$ be the unital $C$*-subalgebra of $A$ generated by $x$, then it is commutative, so $\sigma_B(x)=\{\phi(x):\phi\in\Phi_B\}$ by corollary~\ref{cor:SpectrumCharacter}. In (i), $\phi(x)=\phi(x^*)=\overline{\phi(x)}$, so $\phi(x)\in\R$ for all $\phi\in\Phi_B$. In (ii), $\abs{\phi(x)}^2=\overline{\phi(x)}\phi(x)=\phi(x^*)\phi(x)=1$, so $\phi(x)\in\T$. The result now follows since $\sigma_A(x)\subseteq\sigma_B(x)$.
\end{proof}

\begin{remark}
	\begin{enumerate}[label=(\arabic*)]
		\item In both (i) and (ii),
		\[
		 \sigma_B(x)=\partial\sigma_B(x)\subseteq \partial\sigma_A(x)\subseteq \sigma_A(x)\subseteq\sigma_B(x)
		\]
		so $\sigma_A(x)=\sigma_B(x)$.
		\item If $C$ is a unital C*-subalgebra of $A$ and $x\in C$ is normal, then $\sigma_C(x)=\sigma_A(x)$: if $x$ is Hermitian, then the proof is as above. Otherwise, given $\lambda\in\C$, let $y=\lambda 1-x$. Then $y$ is normal, so $y\in\G(C)$ if and only if $y^*y\in\G(C)$. The result now follows since $y^*y$ is Hermitian.
		\item If $T\in\B(H)$, where $H$ is a Hilbert space, and $T$ is Hermitian or unitary, then $\sigma(T)=\partial\sigma(T)\subseteq\sigma_{ap}(T)\subseteq\sigma(T)$, where
		\[
		 \sigma_{ap}(T)=\{\lambda\in\C:\text{$\lambda$ is an approximate eigenvalue of $T$}\}
		\]
		so $\sigma(T)=\sigma_{ap}(T)$. The same is true for normal operators.
	\end{enumerate}
\end{remark}

\begin{nthm}[Commutative Gelfand-Neimark Theorem]\label{thm:GelfandNeimark}\index{Gelfand-Neimark theorem!commutative case}
  Let $A$ be a commutative unital C*-algebra, then there exists a compact Hausdorff $K$ and an isometric unital $*$-isomorphism $\theta:A\to C(K)$.

  The space $K$ can be taken to be $\Phi_A$, and $\theta$ the Gelfand map.
\end{nthm}

\begin{proof}
  Let $K=\Phi_A$, and let $\theta:A\to C(K)$ be the Gelfand map. Then $\theta$ is a unital algebra homomorphism. By lemma~\ref{lem:C*SpectralRadius}, $\norm{\theta(x)}=r_A(x)=\norm{x}$, so $\theta$ is isometric. By lemma~\ref{lem:C*morphism}, $\theta(x)^*(\phi)=\overline{\hat{x}(\phi)}=\overline{\phi(x)}=\phi(x^*)=\theta(x^*)(\phi)$ for all $x\in A$ and $\phi\in K$. Therefore, $\theta(x)^*=\theta(x^*)$. The image of $\theta$ in $C(K)$ is a closed subalgebra which is closed under complex conjugation, contains 1, and separates the points of $K$, so by the Stone-Weierstrass theorem, $\theta$ is onto.
\end{proof}

\begin{eg}
	\begin{enumerate}[label=(\arabic*)]
		\item Let $A$ be a unital $C$*-algebra, and $x\in A$. Say $x$ is \emph{positive} if it is Hermitian and $\sigma_A(x)\subseteq [0,\infty)$. If $x$ is positive, then $x$ has a unique positive square root.
		\vspace{-\topsep}
		\begin{proof}
		 Let $B$ be the unital $C$*-subalgebra generated by $x$, then $B$ is commutative. By theorem~\ref{thm:GelfandNeimark}, $\theta:B\xrightarrow{\sim}C(\Phi_B)$. Let $y=\theta^{-1}(\sqrt{\theta(x)})$, then $y$ is a positive square root of $x$. For uniqueness, suppose $z$ is another positive square root, then $z$ commutes with $x=z^2$, so $z$ commutes with $B$. In particular, $z$ commutes with $y$. Let $C$ be the unital $C$*-subalgebra generated by $z$ and $y$, then $\hat{y}^2=\hat{z}^2=\hat{x}$, and $\hat{y},\ \hat{z}\geq 0$, where $\hat{(\cdot)}$ is the Gelfand map. Therefore, $\hat{y}=\hat{z}$, and so $y=z$.
		\end{proof}
		\item A Hermitian operator $T\in\B(H)$ is positive if and only if $\bra Tx, x\ket\geq 0$ for all $x\in H$.
		\vspace{-\topsep}
		\begin{proof}
  		If $T$ is positive, then it has a positive square root $S$, so $\bra Tx,x\ket=\bra S^2x,x\ket=\bra Sx,Sx\ket\geq 0$. Conversely, suppose $\lambda<0$ and $\norm{x}=1$, then
		\[\norm{(\lambda I-T)x}^2=\bra(\lambda I-T)^2x,x\ket=\lambda^2-2\lambda\bra Tx,x\ket+\norm{Tx}^2\geq\lambda^2\]
		Therefore, $\lambda\notin\sigma_{ap}(T)=\sigma(T)$.
		\end{proof}
		\item Polar decomposition for invertible operators: Given invertible $T\in\B(H)$, there exists unique positive $R$ and unitary $U$ such that $T=RU$.
		\vspace{-\topsep}
		\begin{proof}
		 Uniqueness: if $T=RU$ with $U$ unitary and $R$ positive, then $TT^*=RUU^*R^*=R^2$, so $R$ is the unique square root of $TT^*$, and $U=R^{-1}T$.

		 Existence: by (2), $TT^*$ is positive, so it has a positive square root $R$. Let $U=R^{-1}T$, then $UU^*=R^{-1}TT^*R^{-1}=R^{-1}R^2R^{-1}=I$. Since $U$ is invertible, this implies $U$ is unitary.
		\end{proof}
	\end{enumerate}
\end{eg}

\printindex
\end{document}
