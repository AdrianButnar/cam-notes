\documentclass[a4paper]{article}

\def\npart {III}
\def\nterm {Michaelmas}
\def\nyear {2016}
\def\nlecturer {H. C. Johansson}
\def\ncourse {Local Fields}
\def\nlectures {MWF.10}

\input{header}

\begin{document}
\maketitle
{\small
\setlength{\parindent}{0em}
\setlength{\parskip}{1em}

The $p$-adic numbers $\Q_p$ (where $p$ is any prime) were invented by Hensel in the late 19th century, with a view to introduce function-theoretic methods into number theory. They are formed by completing $\Q$ with respect to the $p$-adic absolute value $|-|_p$ , defined for non-zero $x \in \Q$ by $|x|_p = p^{-n}$, where $x = p^n a/b$ with $a, b, n \in \Z$ and $a$ and $b$ are coprime to $p$. The $p$-adic absolute value allows one to study congruences modulo all powers of $p$ simultaneously, using analytic methods. The concept of a local field is an abstraction of the field $\Q_p$, and the theory involves an interesting blend of algebra and analysis. Local fields provide a natural tool to attack many number-theoretic problems, and they are ubiquitous in modern algebraic number theory and arithmetic geometry.

Topics likely to be covered include:
\begin{itemize}[label={}]
  \item The $p$-adic numbers. Local fields and their structure.
  \item Finite extensions, Galois theory and basic ramification theory.
  \item Polynomial equations; Hensel's Lemma, Newton polygons.
  \item Continuous functions on the $p$-adic integers, Mahler's Theorem.
  \item Local class field theory (time permitting).
\end{itemize}

\subsubsection*{Pre-requisites}
Basic algebra, including Galois theory, and basic concepts from point set topology and metric spaces. Some prior exposure to number fields might be useful, but is not essential.
}
\tableofcontents
\setcounter{section}{-1}
\section{Introduction}
What are local fields? Suppose we are interested in some basic number theoretic problem. Say we have a polynomial $f(x_1, \cdots, x_n) \in \Z[x_1, \cdots, x_n]$. We want to look for solutions $\mathbf{a} \in \Z^n$, or show that there are no solutions at all. We might try to view this polynomial as a real polynomial, look at its roots, and see if they are integers. In lucky cases, we might be able to show that there are no real solutions at all, and conclude that there cannot be any solutions at all.

On the other hand, we can try to look at it modulo some prime $p$. If there are no solutions mod $p$, then there cannot be any solution. But sometimes $p$ is not enough. We might want to look at it mod $p^2$, or $p^3$, or \ldots. One important application of local fields is that we can package all these information together. In this course, we are not going to study the number theoretic problems, but just look at the properties of the local fields for their own sake.

Throughout this course, all rings will be commutative with unity, unless otherwise specified.
\section{Basic theory}
We are going to start with some generalities.
\begin{defi}[Absolute value]\index{absolute value}
  Let $K$ be a field. An \emph{absolute value} on $K$ is a function $|\ph|: K \to \R_{\geq 0}$ such that
  \begin{enumerate}
    \item $|x| = 0$ iff $x = 0$;
    \item $|xy| = |x||y|$ for all $x, y \in K$;
    \item $|x + y| \leq |x| + |y|$.\index{triangle inequality}
  \end{enumerate}
\end{defi}

\begin{defi}[Valued field]\index{valued field}
  A \emph{valued field} is a field with an absolute value.
\end{defi}

\begin{eg}
  The rationals, reals and complex numbers with the usual absolute values are absolute values.
\end{eg}

\begin{eg}[Trivial absolute value]
  The \emph{trivial absolute value}\index{trivial absolute value} on a field $K$ is the absolute value given by
  \[
    |x| =
    \begin{cases}
      1 & x \not= 0\\
      0 & x = 0
    \end{cases}.
  \]
\end{eg}
From now on, we assume our absolute values are non-trivial.

There are some familiar basic properties of the absolute value such as
\begin{prop}
  $||x| - |y|| \leq |x - y|$. Here the outer absolute value on the left hand side is the usual absolute value of $\R$, while the others are the absolute values off the relevant field.
\end{prop}

An absolute value defines a metric $d(x, y) = |x - y|$ on $K$.

\begin{defi}[Equivalence of absolute values]\index{absolute values, equivalence}\index{equivalent absolute values}
  Let $K$ be a field, and let $|\ph|, |\ph|'$ be absolute values. We say they are \emph{equivalent} if they induce the same topology.
\end{defi}

\begin{ex}
  Using the same notation as above, show that the following are equivalent:
  \begin{enumerate}
    \item $|\ph|$ and $|\ph|'$ are equivalent
    \item $|x| < 1$ implies $|x|' < 1$ for all $x \in K$
    \item There is some $s \in \R_{> 0}$ such that $|x|^s = |x|'$ for all $x \in K$.
  \end{enumerate}
\end{ex}

\begin{ex}
  Let $K$ be a valued field. Then equivalent absolute values induce the same the \emph{completion} $\hat{K}$ of $K$, and $\hat{K}$ is a valued field with an absolute value extending $|\ph|$.
\end{ex}

\begin{defi}[Non-archimedean absolute value]\index{non-archimedean absolute value}\index{absolute value, non-archimedean}\index{archimedean absolute value}\index{absolute value, archimedean}
  An absolute value $|\ph|$ on a field $K$ is called \emph{non-archimedean} if $|x + y| \leq \max(|x|, |y|)$. This condition is called the \emph{strong triangle inequality}\index{strong triangle inequality}.

  An absolute value which isn't non-archimedean is called \emph{archimedean}.
\end{defi}
Metrics satisfying $d(x, z) \leq \max(d(x, y), d(y, z))$ are often known as \emph{ultrametrics}\index{ultrametric}.

\begin{eg}
  $\Q$, $\R$ and $\C$ under the usual absolute values are archimedean.
\end{eg}

However, in this course, we will only consider non-archimedean absolute values. Thus, from now on, unless otherwise mentioned, an absolute value is assumed to be non-archimedean. The metric is weird!

\begin{eg}
  Let $(K, |\ph|)$ be a non-archimedean valued field. let $x \in K$ and $r \in \R_{> 0}$. Let
  \[
    B(x, r) = \{y: |x - y| \leq r\}.
  \]
  We pick $z \in B(x, r)$, and suppose $y$ is such that $|y - z| \leq r$, ie. $y \in B(z, r)$. Then
  \[
    |x - y| = |(x - z) + (z - y)| \leq \max(|x - z|, |z - y|) \leq r.
  \]
  So $y \in B(x, r)$. So we conclude that $B(z, r) \subseteq B(x, r)$. By symmetry, we have $B(x, r) = B(z, r)$! Thus, closed balls do not have unique ``centers''. Every point can be viewed as the center.

  In particular, we have
  \[
    \{y: |y - z| < r\} \subseteq B(z, r) = B(x, r)
  \]
  for all $z \in B(x, r)$. So the closed ball $B(x, r)$ is open as well! (In the other direction, open balls are also closed!)
\end{eg}

\begin{prop}
  Let $K$ be a valued field. Then
  \[
    \mathcal{O} = \{x: |x| \leq 1\}
  \]
  is an open subring of $K$, called the \emph{valuation ring of K}. Moreover, for each $r \in (0, 1]$, we have $\{x : |x| < r\}$ and $\{x: |x| \leq r\}$ are open ideals of $\mathcal{O}$. Moreover, $\mathcal{O}^\times = \{x : |x| = 1\}$.
\end{prop}

\begin{proof}
  We know that these sets are open by the previous example.

  To see $\mathcal{O}$ is a subring, we have $|1| = |-1| = 1$. So $1, -1 \in \mathcal{O}$. If $x, y \in \mathcal{O}$, then $|x + y| \leq \max(|x|, |y|) \leq 1$. So $x + y \in \mathcal{O}$. Also, $|xy| = |x||y| \leq 1 \cdot 1 = 1$. So $xy \in \mathcal{O}$.

  That the other sets are ideals of $\mathcal{O}$ is checked in the same way.

  To check the units, we have $x \in \mathcal{O}^\times \Leftrightarrow |x|, |x^{-1}| \leq 1 \Leftrightarrow |x| = |x|^{-1} = 1$.
\end{proof}

\begin{defi}[Valuation ring]\index{valuation ring}
   Let $K$ be a valued field. Then the \emph{valuation ring of K}\index{valuation ring} is the open subring
  \[
    \mathcal{O} = \{x: |x| \leq 1\}.
  \]
\end{defi}
We start to see how these non-archimedean fields have more interesting algebraic properties than our usual fields.

\begin{prop}
  Let $K$ be a valued field.
  \begin{enumerate}
    \item Let $(x_n)$ be a sequence in $K$. If $x_n - x_{n + 1} \to 0$, then $x_n$ is Cauchy.
  \end{enumerate}
  If we assume further that $K$ is complete, then
  \begin{enumerate}[resume]
    \item Let $(x_n)$ be a sequence in $K$. If $x_n - x_{n + 1} \to 0$, then a sequence $(x_n)$ in $K$ converges.
    \item Let $\sum_{n = 0}^\infty y_n$ be a series in $K$. If $y_n \to 0$, then $\sum_{n = 0}^\infty y_n$ converges.
  \end{enumerate}
\end{prop}
The converses to all these are of course also true, with the usual proofs.

\begin{proof}\leavevmode
  \begin{enumerate}
    \item Pick $\varepsilon > 0$ and $N$ such that $|x_n - x_{n + 1}| < \varepsilon$ for all $n \geq N$. Then given $m\geq n \geq N$, we have
      \begin{align*}
        |x_m - x_n| &= |x_m - x_{m - 1} + x_{m - 1} - x_{m - 2} + \cdots - x_n| \\
        &\leq \max(|x_m - x_{m - 1}|, \cdots, |x_{n + 1} - x_n|) \\
        &< \varepsilon.
      \end{align*}
      So the sequence is Cauchy.
    \item Follows from (1) and the definition of completeness.
    \item Follows from the definition of convergence of a series and (2).
  \end{enumerate}
\end{proof}

\begin{defi}[Integral element]\index{integral element}
  Let $R \subseteq S$ be rings and $s \in S$. We say $s$ is \emph{integral over $R$} if there is some monic $f \in R[x]$ such that $f(s) = 0$.
\end{defi}

\begin{eg}
  Any $r \in R$ is integral (take $f(x) = x - r$).
\end{eg}

\begin{eg}
  Take $\Z \subseteq \C$. Then $z \in \C$ is integral over $\Z$ if it is an \term{algebraic integer} (by definition of algebraic integer).
\end{eg}

\begin{defi}[Adjoint/Adjugate matrix]
  Let $A = (a_{ij})$ be an $n \times n$ matrix with coefficients in a ring $R$. The \term{adjugate matrix} or \term{adjoint matrix} $A^* = (a_{ij}^*)$ of $A$ is defined by
  \[
    a_{ij}^* = (-1)^{i + j} \det (A_{ij}),
  \]
  where $A_{ij}$ is an $(n-1)\times (n-1)$ matrix obtained from $A$ by deleting the $i$th column and the $j$th row.
\end{defi}

\begin{prop}
  For any $A$, we have $A^*A = AA* = \det(A) I$, where $I$ is the identity matrix.
\end{prop}

\begin{prop}
  Let $R \subseteq S$ be rings. Then $s_1, \cdots, s_n \in S$ are all integral iff $R[s_1, \cdots, s_n] \subseteq S$ is a finitely-generated $R$-module.
\end{prop}
Note that $R[s_1, \cdots, s_n]$ is by definition a finitely-generated $R$-algebra, but requiring it to be finitely-generated as a module is stronger.

\begin{proof}
  Note that we can construct $R[s_1, \cdots, s_n]$ by a sequence
  \[
    R \subseteq R[s_1] \subseteq R[s_1, s_2] \subseteq \cdots \subseteq R[s_1, \cdots, s_n] \subseteq S,
  \]
  and each $s_i$ is integral over $R[s_1, \cdots, s_{n - 1}]$. Since the finite extension of a finite extension is still finite, it suffices to prove it for the case $n = 1$, and we write $s$ for $s_1$.

  Suppose $f(x) \in R[[x]$ is monic such that $f(s) = 0$. If $g(x) \in R[x]$, then there is some $q, r \in R[x]$ such that $g(x) = f(x)q(x) + r(x)$ with $\deg r < \deg f$. Then $g(s) = r(s)$. So any polynomial expression in $s$ can be written as a polynomial expression with degree less than $\deg f$. So $R[s]$ is generated by $1, s, \cdots, s^{\deg f - 1}$.

  In the other direction, let $t_1, \cdots, t_d$ be $R$-module generators of $R[s_1, \cdots, s_n]$. Now let $b \in R[s_1, \cdots, s_n]$. Then there is some $a_{ij} \in R$ such that
  \[
    b t_i = \sum_{j = 1}^d a_{ij} t_j.
  \]
  In matrix form, this says
  \[
    (bI - A)t = 0.
  \]
  We now multiply by $(bI - A)^*$ to obtain
  \[
    \det(bI - A) t_j = 0
  \]
  for all $j$. Now we know $1 \in R$. So $1 = \sum c_j t_j$ for some $c_j \in R$. Then we have
  \[
    \det(bI - A) = \det(bI - A) \sum c_j t_j = \sum c_j (\det (bI - A) t_j) = 0.
  \]
  Since $\det(bI - A)$ is a monic polynomial in $b$, it follows that $b$ is integral. In particular, the generators $s_i$ are integral.
\end{proof}

\begin{cor}
  Let $R \subseteq S$ be rings. If $s_1, s_2 \in S$ are integral over $R$, then $s_1 + s_2$ and $s_1s_2$ are integral over $R$. In particular, the set $\tilde{R} \subseteq S$ of all elements in $S$ integral over $R$ is a ring, known as the integral closure of $R$ in $S$.
\end{cor}

\begin{proof}
  If $s_1, s_2$ are integral, then $R[s_1, s_2]$ is a finite extension over $R$. Since $s_1 + s_2$ and $s_1s_2$ are elements of $R[s_1, s_2]$, they are also integral over $R$.
\end{proof}

\begin{defi}[Integrally closed]
  Given a ring extension $R \subseteq S$, we say $R$ is \term{integrally closed} in $S$ if $\tilde{R} = R$.
\end{defi}

\begin{defi}[Topological ring]\index{topological ring}\index{ring topology}
  Let $R$ be a ring. A topology on $R$ is called a \emph{ring topology} if addition and multiplication are continuous maps $R \times R \to R$. A ring with a ring topology is a \emph{topological ring}.
\end{defi}

\begin{eg}
  $\R$ and $\C$ with the usual topologies and usual ring structures are topological rings.
\end{eg}

\begin{ex}
  Let $K$ be a valued field. Then $K$ is a topological ring. We can see this from the fact that the product topology on $K \times K$ is induced by the metric $d((x_0, y_0), (x_1, y_1)) = \max(|x_0 - x_1|, |y_0 - y_1|)$.
\end{ex}

\begin{defi}[$i$-adically open]\index{$I$-adically open}
  Let $R$ be a ring and $I \subseteq R$ an ideal. A subset $U \subseteq R$ is called \emph{$I$-adically open} if for all $x \in U$, there is some $n \geq 1$ such that $x + I^n \subseteq U$.
\end{defi}

\begin{prop}
  The set of all $I$-adically open sets form a topology on $R$, called the $I$-adic topology.
\end{prop}

\begin{proof}
  By definition, we have $\emptyset$ and $R$ are open, and arbitrary unions are clearly open. if $U, V$ are $I$-adically open, and $x \in U \cap V$, then there are $n, m$ such that $x + I^n \subseteq U$ and $x + I^m \subseteq V$. Then $x + I^{\max(m, n)} \subseteq U \cap V$.
\end{proof}

\begin{ex}
  Check that the $I$-adic topology is a ring topology.
\end{ex}

\begin{defi}[Inverse/projective limit]\index{inverse limit}\index{projective limit}
  Let $R_1, R_2,, \cdots$ be topological rings, with continuous homomorphisms $f_n: R_{n + 1} \to R_n$.
  \[
    \begin{tikzcd}
      R_1 & R_2 \ar[l, "f_1"] & R_3 \ar[l, "f_2"] & R_4 \ar[l, "f_3"] & \ar[l] \cdots
    \end{tikzcd}
  \]
  The \emph{inverse limit} or \emph{projective limit} of the $R_i$ is the ring
  \[
    \varprojlim R_n = \left\{(x_n) \in \prod_n R_n : f_n(x_{n + 1}) = x_n\right\},
  \]
  with coordinatewise addition and multiplication, together with the subspace topology coming from the product topology of $\prod R_n$. This topology is known as the \term{inverse limit topology}.
\end{defi}

\begin{prop}
  The inverse limit topology is a ring topology.
\end{prop}

\begin{proof}[Proof sketch]
  We can fit the addition and multiplication maps into diagrams
  \[
    \begin{tikzcd}
      \varprojlim R_n \times \varprojlim R_n \ar[r] & \varprojlim R_n\\
      \prod R_n \times \prod R_n \ar[u, hook] \ar[r] & \prod R_n \ar[u, hook]
    \end{tikzcd}
  \]
  By the definition of the subspace topology, it suffices to show that the corresponding maps on $\prod R_n$ are continuous. By the universal property of the product, it suffices to show that the projects $\prod R_n \times \prod R_n \to R_m$ is continuous for all $m$. But this map can alternatively be obtained by first projecting to $R_m$, then doing multiplication in $R_m$, and projection is continuous. So the result follows.
\end{proof}

\begin{defi}[$I$-adic completion]
  Let $R$ be a ring and $I$ be an ideal. The \term{$I$-adic completion} of $R$ is the topological ring
  \[
    \varprojlim R/I^n,
  \]
  where $R/I^n$ has the discrete topology, and $R/I^{n + 1} \to R/I^n$ is the obvious map. There is an evident map
  \begin{align*}
    \nu: R &\to \varprojlim R/I^n\\
    r &\mapsto (r \bmod I^n)_.
  \end{align*}
  This map is a continuonus ring homomorphism if $R$ is given the $I$-adic topology.
\end{defi}

\begin{defi}[$I$-adically complete]\index{$I$-adically complete}
  We say that $R$ is \emph{$I$-adically complete} if $\nu$ is a bijection.
\end{defi}

\begin{ex}
  If $\nu$ is a bijection, then $\nu$ is in fact a homeomorphism.
\end{ex}
If $I = xR$, when we often call the $I$-adic topology the \term{$x$-adic topology}.

\section{The $p$-adic numbers}
For the rest of this course, $p$ is going to be a prime number.

Let $x \in \Q$ be non-zero. Then by uniqueness of factorization, we can write $x$ uniquely as
\[
  x =p^n \frac{a}{b},
\]
where $a, b, n \in \Z$, $b > 0$ and $a, b, p$ are pairwise coprime.

\begin{defi}[$p$-adic absolute value]\index{$p$-adic absolute value}
  The \emph{$p$-adic absolute value} on $Q$ is the function $|\ph|_p: \Q \to \R_{\geq 0}$ given by
  \[
    |x|_p =
    \begin{cases}
      0 & x = 0\\
      p^{-n} & x = p^n \frac{a}{b}\text{ as above}
    \end{cases}.
  \]
\end{defi}

\begin{prop}
  The $p$-adic absolute value is an absolute value.
\end{prop}

\begin{proof}
  It is clear that $|x|_p = 0$ iff $x = 0$.

  Suppose we have
  \[
    x = p^n \frac{a}{b},\quad y = p^m \frac{c}{d}.
  \]
  We wlog $m \geq n$. Then we have
  \[
    |xy|_p = \left|p^{n + m}\frac{ac}{bd}\right| = p^{-m-n}|x|_p |y|_p.
  \]
  So this is multiplicative. Finally, we have
  \[
    |x + y|_p = \left|p^n \frac{ab + p^{m - n}cb}{bd}\right| \leq p^{-n} = \max(|x|_p, |y|_p).
  \]
  Note that we must have $bd$ coprime to $p$, but $ab + p^{m - n}cb$ need not be. However, any extra powers of $p$ could only decrease the absolute value, hence the above result.
\end{proof}

Note that if $x \in \Z$ is an integer, then $|x|_p = p^{-n}$ iff $p^n \mid\mid x$ (we say $p^n \mid\mid x$ if $p^n \mid x$ and $p^{n + 1} \nmid x$).

\begin{defi}[$p$-adic numbers]\index{$p$-adic numbers}
  The \emph{$p$-adic numbers} $\Q_p$ is the completion of $\Q$ with respect to $|\ph|_p$.
\end{defi}

\begin{defi}[$p$-adic integeres]\index{$p$-adic integers}
  The valuation ring
  \[
    \Z_p = \{x \in \Q_p: |x|_p \leq 1\}
  \]
  is the \emph{$p$-adic integers}.
\end{defi}

\begin{prop}
  $\Z_p$ is the closure of $\Z$ inside $\Q_p$.
\end{prop}

\begin{proof}
  If $x \in \Z$ is non-zero, then $x = p^na$ with $n \geq 0$. So $|x|_p \leq 1$. So $\Z \subseteq \Z_p$.

  We now want to show that $\Z$ is dense in $\Z_p$. We know the set
  \[
    \Z_{(p)} = \{x \in \Q: |x|_p \leq 1\}
  \]
  is dense inside $\Z_p$, essentially by definition. So it suffices to show that $\Z$ is dense in $\Z_{(p)}$. We let $x \in \Z_{(p)} \setminus\{0\}$, say
  \[
    x = p^n \frac{a}{b},\quad n \geq 0.
  \]
  It suffices to find $x_i \in \Z$ such that $x_i \to \frac{1}{b}$. Then we have $p^n ax_i \to x$.

  Since $(b, p) = 1$, we can find $x_i, y_i \in \Z$ such that $b x_i + p^i y_i = 1$ for all $i \geq 1$. So
  \[
    \left|x_i - \frac{1}{b}\right|_p = \left|\frac{1}{b}\right|_p |bx_i - 1|_p = |p^i y_i|_p \leq p^{-i} \to 0.
  \]
  So done.
\end{proof}

\begin{prop}
  The non-zero ideals of $\Z_p$ are $p^n \Z_p$ for $n \geq 0$. Moreover,
  \[
    \frac{\Z}{p^n \Z} \cong \frac{\Z_p}{p^n \Z_p}.
  \]
\end{prop}

\begin{proof}
  Let $0 \not= I \subseteq \Z_p$ be an ideal, and pick $x \in I$ such that $|x|_p$ is maximal. This supremum exists and is attained because the possible values of the absolute values are discrete and bounded above. If $y \in I$, then by maximality, we have $|y|_p \leq |x|_p$. So we have $|yx^{-1}|_p \leq 1$. So $yx^{-1} \in \Z_p$, and this implies that $y = (yx^{-1})x \in x\Z_p$. So $I \subseteq x\Z_p$, and we obviously have $x\Z_p \subseteq I$. So we have $I = x\Z_p$.

  Now if $x = p^n \frac{a}{b}$, then since $\frac{a}{b}$ is invertible in $\Z_p$, we have $x\Z_p = p^n \Z_p$. So $I = p^n \Z_p$.

  To show the second part, consider the map
  \[
    f_n: \Z \to \frac{\Z_p}{p^n \Z_p}
  \]
  given by the inclusion map followed by quotienting. Now $p^n \Z_p = \{x : |x|_p \leq p^{-n}$. So we have
  \[
    \ker f_n = \{x \in \Z: |x|_p \leq p^{-n}\} = p^n \Z.
  \]
  Now since $\Z$ is dense in $\Z_p$, we know $f_n$ is surjective (let $x \in \Z_p$. Then by density, there is an integer in the $p^{-n}$-ball of $x$, and this belongs to the same $p^n \Z_p$ equivalence class as $x$). So $f_n$ induces an isomorphism $\Z/p^n Z \cong \Z_p/p^n \Z_p$.
\end{proof}

\begin{cor}
  $\Z_p$ is a PID with a unique prime element $p$ (up to units).
\end{cor}
This is pretty much the point of the $p$-adic numbers --- there are a lot of primes in $\Z$, and by passing on to $\Z_p$, we are left with just one of them.

\begin{prop}
  The topology on $\Z$ induced by $|\ph|_p$ is the $p$-adic topology (ie. the $p\Z$-adic topology).
\end{prop}

\begin{proof}
  Let $U \subseteq \Z$. By definition, $U$ is open wrt $|\ph|_p$ iff for all $x \in U$, there is an $n\in \N$ such that
  \[
    \{y \in \Z: |y - x|_p \leq p^{-n}\} \subseteq U.
  \]
  On the other hand, $U$ is open in the $p$-adic topology iff for all $x \in U$, there is some $n \geq 0$ such that $x + p^n \Z \subseteq U$. But we have
  \[
    \{y \in \Z: |y - x|_p \leq p^{-n}\} = x + p^n \Z.
  \]
  So done.
\end{proof}

\begin{prop}
  $\Z_p$ is $p$-adically complete and is (isomorphic to) the $p$-adic completion of $\Z$.
\end{prop}

\begin{proof}
  The second part follows from the first as follows: we have the maps
  \[
    \begin{tikzcd}
      \Z_p \ar[r, "\nu"] & \varprojlim \Z_p/(p^n \Z_p) & \lim \Z/(p^n\Z) \ar[l, "(f_n)_n"]
    \end{tikzcd}
  \]
  We know the map induced by $(f_n)_n$ is an isomorphism. So we just have to show that $\nu$ is an isomorphism

  To prove the first part, we have $x \in \ker \nu$ iff $x \in p^n \Z_p$ for all $n$ iff $|x|_p \leq p^{-n}$ for all $n$ iff $|x|_p = 0$ iff $x = 0$. So the map is injective.

  To show surjectivity, we let
  \[
    z_n \in \varprojlim \Z_p/p^n \Z_p.
  \]
  We define $a_i \in \{0, 1, \cdots, p - 1\}$ recursively such that
  \[
    x_n = \sum_{i = 0}^{n - 1} a_i p^i
  \]
  is the unique representative of $z_n$ in the set of integers $\{0, 1, \cdots, p^n - 1\}$. Then
  \[
    x = \sum_{i = 0}^\infty a_i p^i
  \]
  exists in $\Z_p$ and maps to $x \equiv x_n \equiv z_n \pmod{p^n}$ for all $n \geq 0$. So $\nu(x) = (z_n)$. So the map is surjective. So $\nu$ is bijective.
\end{proof}

\begin{cor}
  Every $a \in \Z_p$ has a unique expansion
  \[
    a = \sum_{i = 0}^\infty a_i p^i.
  \]
  with $a_i \in \{0, \cdots, p - 1\}$.

  More generally, for any $a \in \Q^\times$, there is a unique expansion
  \[
    a = \sum_{i = n}^\infty a_i p^i
  \]
  for $a_i \in \{0, \cdots, p - 1\}$, $a_n \not= 0$ and
  \[
    n = - \log_p |a|_p \in \Z.
  \]
\end{cor}

\begin{proof}
  The second part follows from the first part by multiplying $a$ by $p^{-n}$.
\end{proof}

\begin{eg}
  We have
  \[
    \frac{1}{1 - p} = 1 + p + p^2 + p^3 + \cdots.
  \]
\end{eg}

\section{Valued fields}
We return to the discussion of general valued fields.
\begin{defi}[Valuation]
  Let $K$ be a field. A \term{valuation} on $K$ is a function $v: K \to \R \cup \{\infty\}$ such that
  \begin{enumerate}
    \item $v(x) = 0$ iff $x = 0$
    \item $v(xy) = v(x) + v(y)$
    \item $v(x + y) \geq \min\{v(x), v(y)\}$.
  \end{enumerate}
\end{defi}
Here we use the conventions that $r + \infty = \infty$ and $r \leq \infty$ for all $r \in \infty$.

In some sense, this definition is sort-of pointless, since if $v$ is a valuation, then the function
\[
  |x| = c^{-v(x)}
\]
for any $c > 1$ is a (non-archimedean) absolute value. Conversely, if $|\ph|$ is a valuation, then
\[
  v(x) = - \log_c |x|
\]
is a valuation.

Despite this, sometimes people prefer to talk about the valuation rather than the absolute value, and often this is more natural.

\begin{eg}
  For $x \in \Q_p$, we define
  \[
    v_p(x) = -\log_p |x|_p.
  \]
  This is a valuation, and if $x \in \Z_p$, then $v_p(x) = n$ iff $p^n \mid\mid x$.
\end{eg}

\begin{eg}
  Let $K$ be a field, and define
  \[
    k((T)) = \left\{\sum_{i = n}^\infty a_i T^i: a_i \in k, n \in \Z\right\}.
  \]
  This is the field of \term{formal Laurent series} over $k$. We define
  \[
    v\left(\sum a_i T^i\right) = \min\{i: a_i \not= 0\}.
  \]
  Then $v$ is a valuation of $k((T))$.
\end{eg}

Recall that for a valued field $K$, the \term{valuation ring}\index{$\mathcal{O}_K$} is given by
\[
  \mathcal{O} = \mathcal{O}_K = \{x \in k; |x|\leq 1\}.
\]
Since this is a subring of a field, and the absolute value is multiplicative, we notice that the units in $\mathcal{O}$ are exactly the elements of absolute value $1$. The remaining elements form an ideal (since the field is non-archimedean), and thus we have a \term{maximal ideal}
\[
  \mathfrak{m} = \mathfrak{m}_K = \{x \in K: |x| < 1\}
\]
The quotient
\[
  k = k_K = \mathcal{O}_K/\mathfrak{m}
\]
is known as the \term{residue field}.

\begin{eg}
  Let $K = \Q_p$. Then $\mathcal{O} = \Z_p$, and $\mathfrak{m} = p\Z_p$. So
  \[
    k = \mathcal{O}/\mathfrak{m} = \Z_p/p\Z_p \cong \Z/p\Z.
  \]
\end{eg}

\begin{defi}[Primitive polynomial]\index{primitive polynomial}
  If $K$ is a valued field and $F(x) = a_0 + a_1 x + \cdots + a_n x^n \in K[x]$ is a polynomial, we say that $F$ is \emph{primitive} if
  \[
    \max_i |a_i| = 1.
  \]
  In particular, we have $F \in \mathcal{O}[x]$.
\end{defi}
The point of a primitive polynomial is that such a polynomial is naturally, and non-trivially, an element of $k[x]$. Moreover, focusing on such polynomials is not that much of a restriction, since any polynomial is a constant multiple of a primitive polynomial.

\begin{thm}[Hensel's lemma]\index{Hensel's lemma}
  Let $K$ be a complete valued field, and let $F \in K[x]$ be primitive. Put $f = F\bmod \mathfrak{m} \in k[x]$. If there is a factorization
  \[
    f(x) = g(x) h(x)
  \]
  with $(g, h) = 1$, then there is a factorization
  \[
    F(x) = G(x) H(x)
  \]
  in $\mathcal{O}[x]$ with
  \[
    g = G,\quad h = H\mod m,
  \]
  with $\deg g = \deg G$.
\end{thm}
Note that requiring $\deg g = \deg G$ is the best we can hope for --- we cannot guarantee $\deg h = \deg H$, since we need not have $\deg f = \deg F$.

This is one of the most important results in the course. Unfortunately, the proof is not terribly enlightening.

\begin{proof}
  Put $d = \deg F$ and $m = \deg g$. Then we have $\deg h \leq d - m$.

  We pick lifts $G_0, H_0 \in \mathcal{O}[x]$ of $g, h$ with $\deg G_0 = \deg g$, and $\deg H_0 \leq d - m$. Then we have
  \[
    F = G_0 H_0 \mod \mathfrak{m}.
  \]
  Our strategy is to add some correction terms to $G_0$ and $H_0$ so that the corresponding equation holds mod $\mathfrak{m}^2$, then lift to a result mod $\mathfrak{m}^3$ etc, \ldots and hopefully eventually get something in the limit.

  However, this doesn't really work, since there is no guarantee that the limit converges! The trick is to pick and element $\pi \in \mathfrak{m}$, and then work modulo $\pi^k$. This is not hard, since we notice that
  \[
    \pi \mathcal{O} = \{x \in \mathcal{O}: |x| \leq |\pi|\}.
  \]
  Since our equations only have finitely many coefficients, we can always replace $\bmod \mathfrak{m}$ with $\bmod \pi$ for large enough $\pi$.

  If we do this, then the correction terms we add in each iteration will be bounded by $|\pi|^k$, and thus tends to $0$. Now recall that a series converges iff the moduli of the terms tend to $0$! So we are done if this works.

  Before we begin, we use the given condition $(g, h) = 1$ to obtain some $A, B \in \mathcal{O}[x]$ such that
  \[
    AG_0 + B H_0 \equiv 1 \mod \mathfrak{m}.
  \]
  Then we know that
  \[
    F - G_0 H_0 \equiv AG_0 + BH_0 - 1 \equiv 0 \mod \mathfrak{m}.
  \]
  Thus, since the polynomials involved have finitely many coefficients, we can pick pick a $\pi \in \mathfrak{m}$ with large enough modulus such that
  \[
    F - G_0 H_0 \equiv AG_0 + BH_0 - 1 \equiv 0 \mod \pi.
  \]
  The idea is to find successive approximations
  \begin{align*}
    G_{n - 1} &= G_0 + \pi P_1 + \cdots + \pi^{n - 1} P_{n - 1},\\
    H_{n - 1} &= H_0 + \pi Q_1 + \cdots + \pi^{n - 1} Q_{n - 1}.
  \end{align*}
  that satisfy
  \[
    F \equiv G_{n - 1}H_{n - 1}\mod \pi^n.
  \]
  We then set
  \begin{align*}
    G &= G_0 + \pi P_1 + \pi^2 P_2 + \cdots,\\
    H &= H_0 + \pi Q_1 + \pi^2 Q_2 + \cdots.
  \end{align*}
  We then have $G \equiv G_i \mod \pi^{i + 1}$, and similarly for $H$. So we have
  \[
    F \equiv GH \mod \pi^n
  \]
  for all $n$. As $|\pi^n| \to 0$ as $n \to \infty$, we must have $F = GH$.

  We proceed by induction. Assume we already have $G_{n - 1}, H_{n - 1}$. We need to find $P_n, Q_n$ such that
  \begin{align*}
    G_n &= G_{n - 1} + \pi^n P_n\\
    H_n &= H_{n - 1} - \pi^n Q_n
  \end{align*}
  satisfy
  \[
    F - G_n H_n = 0\mod \pi^{n + 1}.
  \]
  Expanding $G_n$ and $H_n$ out, we get
  \[
    F - G_{n - 1}H_{n - 1} \equiv \pi^n (G_{m - 1} Q_n + H_{n - 1} P_n) \mod \pi^{n + 1}.
  \]
  We rearrange and divide by $\pi^n$ to obtain
  \[
    G_{n - 1} Q_n + H_{n - 1} P_n \equiv \frac{1}{\pi^n}(F - G_{n - 1}H_{n - 1}) \mod \pi.
  \]
  However, note that $G_{n - 1} = G_0 \mod \pi$ (and similarly for $H$), so we have
  \[
    G_0 Q_n + H_0 P_n \equiv \frac{1}{\pi^n}(F - G_{n - 1}H_{n - 1}) \mod \pi.
  \]
  We write
  \[
    E_n = \frac{1}{\pi^n}(F - G_{n - 1}H_{n - 1}).
  \]
  Now recall that there are $A, B$ such that
  \[
    AG_0 + B H_0 \equiv 1\mod \pi.
  \]
  Multiplying by $E_n$ thus gives
  \[
    E_n \equiv AG_0 E_n + B H_0 E_n\mod \pi.
  \]
  We might be tempted to set $Q_n$ and $P_n$ to be just $AE_n$ and $BE_n$ respectively, but we must control the degree of $P_n$ appropriately. Its degree must be less than $\deg g = \deg G_0$.

  Fortunately, the division algorithm comes to the rescue. Recall that $G_0$ is the lift of $g$ of the same degree, and thus its leading coefficient must be an element of $\mathcal{O} \setminus \mathfrak{m}$, ie. a unit. So we can perform the division algorithm to write
  \[
    B F_n = Q G_0 + P_n.
  \]
  with $\deg P_n < \deg G_0$. This gives the desired $P_n$. Then we have
  \[
    G_0 (A E_n + H_0 Q) + H_0 P_n \equiv E_n \mod \pi.
  \]
  Finally, let $Q_n = A E_n + H_0 Q$, where we drop all coefficients divisible by $\pi$. Then since $\deg E_n, \deg H_0 P_n \leq \deg F = m$, we must have $\deg Q_n \leq m - \deg G_0 = m - d$. So this has the desired degree as well. So done.
\end{proof}

\begin{cor}
  Let $F(x) = a_0 + a_1 x + \cdots + a_n x^n \in K[x]$ where $K$ is complete and $a_0, a_n \not= 0$. if $F$ is irreducible, then
  \[
    |a_\ell| \leq \max(|a_0|, |a_n|)
  \]
  for all $i$.
\end{cor}

\begin{proof}
  By scaling, we can wlog $F$ is primitive. Let $r$ be minimal such that $|a_r| = 1$. Then we have
  \[
    F(x) \equiv x^r (a_r + a_{r + 1}x + \cdots + a_n x^{n - r})\mod \mathfrak{m}.
  \]
  We want to prove that $\max(|a_0|, |a_n|) = 1$. If not, then $o < r < n$, and thus congruence lifts to a non-trivial factorization of $F$ by Hensel's lemma.
\end{proof}

\begin{cor}[of Hensel's lemma]
  Let $F \in \mathcal{O}[x]$ be monic, and $K$ complete. If $F \mod \mathfrak{m}$ has a simple root $\bar{\alpha} \in k$, then $F$ has a (unique) simple root $\alpha \in \mathcal{O}$ lifting $\bar{\alpha}$.
\end{cor}

\begin{eg}
  Consider $x^{p - 1} - 1 \in \Z_p[x]$. We know $x^{p - 1}$ splits into distinct linear factors over $\F_p[x]$. So all roots lift to $\Z_p$. So $x^{p - 1} - 1$ splits completely in $\Z_p$. So $\Z_p$ contains all $p$ roots of unity.
\end{eg}

\begin{eg}
  We can use Hensel's lemma to prove that $\Q(\sqrt{p}) \not= \Q(\sqrt{q})$ for all distinct primes $p$ and $q$. Indeed, by quadratic reciprocity and Dirichlet's theorem on the arithmetic progression of primes, there is some prime $k$ such that $p$ is a quadratic residue mod $k$ but $q$ is not. Then $\sqrt{p} \in \Q_k$ but $\sqrt{q} \not\in \Q_k$, by Hensel's lemma. So we have $\Q(\sqrt{p}) \leq \Q_k$ but $\Q(\sqrt{q}) \not\leq \Q_k$. So they are in particular not equal.
\end{eg}

\printindex
\end{document}

